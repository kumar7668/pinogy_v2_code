
{% extends 'admin/base_change_form.html' %}
{% load cms_tags menu_tags sekizai_tags static admin_modify %}
{% load global_theme_config_tags %}
{% block content %}
{% global_theme_object as global_theme_config %}
{% addtoblock 'css' %}
<link rel="stylesheet" href='{{global_theme_config.get_themecss_file}}'>
<link rel="stylesheet" type="text/css" href="{% static 'css/custom-info.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css">
<style>
    {% if global_theme_config.primary_color and global_theme_config.secondary_color %}
    :root {
    --primary-element: {{global_theme_config.primary_color}};
    --secondary-element: {{global_theme_config.secondary_color}};
    }
    {% endif %}
    .newsletter_container_main{
        display : flex;
        margin-top: 40px;
        margin-bottom: 40px;
        flex-direction : column;
        gap : 40px;
    }
    .newsletter_container_main .box-theme-form-devider{
        margin : 0;
    }
    .newsletter_container_main .box-theme-header{
        margin-bottom : 0;
    }
    .text_h4{
        color: var(--Primary, #003F5A);
        /* H4 */
        font-family: "Open Sans";
        font-size: 24px;
        font-style: normal;
        font-weight: 700;
        line-height: 125%; /* 30px */
    }

    .box-theme-form-item.colordiv{
        padding-top : 20px;
    }
    
    .F2{
        background-color : var(--secondary-element);
        color : white;
        border : none;
    }
    .F1{
        background-color : var(--primary-element);
        color : white;
        border : none;
    }
    .F4{
        background-color : white;
        color : var(--secondary-element);
        border : none;
    }
    .F3{
        background-color : white;
        color : var(--primary-element);
        border : none;
    }
    .O1{
        background-color : white;
        border : 1px solid var(--primary-element);
        color : var(--primary-element);
    }
    .O2{
        background-color : white;
        border : 1px solid var(--secondary-element);
        color : var(--secondary-element);
    }
    .O3{
        background-color : white;
        border : 1px solid black;
        color : black;
    }
    .O4{
        background-color : F2F5F6;
        border : 1px solid white;
        color : white;
    }
    .activelayout {
        padding: 10px;
        border-radius: 12px;
        border: 2px dashed #12BBD2;
        background: rgba(18, 187, 210, 0.05);
    }
</style>
<style>

    .newsletter_container_main .newsletter_section_area {
        flex-direction : column;
        gap : 20px;
    }
    .newsletter_container_main .newsletter_section_area16 {
        flex-direction : column;
        gap : 16px;
    }
    .newsletter_container_main .banner-layout-wrap{
        margin-bottom : 0;
    }
    #grid_all_layouts .banner-layout-wrap img{
        width :100%;
    }
    .ck.ck-balloon-panel.ck-powered-by-balloon{
        display : none;
    }
    .grid-filter .newsletter_section_area{
        gap : 15px;
    }

</style>

<style>
    #id_gridName{
        width : 36em;
        padding : 6px 10px;
    }
    .grid-no-of-rows .section-header{
        font-size: 20px;
        line-height: 140%;
    }
    .admin-form:not(.horizontal-checkbox) .form-check:first-child{
        margin-top : 0;
    }
    .admin-form:not(.horizontal-checkbox) .form-check:last-child{
        margin-bottom : 0;
    }
    #grid_all_layouts .text_h4{
        margin-bottom : 18px;
    }
    #grid_all_layouts .box-theme-form-item{
        padding-bottom : 0;
    }
    .w-50.admin-form{
        width : 510px!important;
    }
    .del-anchor{
        text-decoration: none;
        color: #12BBD2 !important;
        font-size: 18px;
        font-weight: 400;
    }
    .PetFilter h4{
        margin-top : 20px;
    }
    .mt-20{
        margin-top : 20px;
    }
    .breed_list_item{
        background-color: #12BBD2;
        color : white;
        padding : 4px 12px;
        border-radius : 999px;
    }
    .breed_list_item span{
        font-weight: 200;
        cursor: pointer;
    }
    {% comment %} BUTTON SECTION {% endcomment %}

    #main-section-btn .box-theme-sub-title{
        justify-content: space-between;
     }
    .double20{
        margin: 20px 0 20px 0;
    }
    #main-section-btn .box-theme-form-item{
        padding-bottom : 0;
    }
</style>
{% endaddtoblock %}
<form {% if has_file_field %}enctype="multipart/form-data" {% endif %}{% if form_url %}action="{{ form_url }}" {% endif %}method="post" id="{{ opts.model_name }}_form" onsubmit="save_changes()">
{% csrf_token %}
{{adminform.form.errors}}
<input type = 'hidden' name = '{{adminform.form.grid_breeds_list.name}}' value = '{{adminform.form.grid_breeds_list.value|default:""}}'/>
<input type = 'hidden' name = '{{adminform.form.grid_button_data.name}}' value = '' id = "{{adminform.form.grid_button_data.name}}"/>
<div class="mg-all-40 d-flex newsletter_container_main">

    {% comment %}  MAIN HEADER {% endcomment %}
    <div class = 'd-flex align-items-center flex-gap'>
        <div class="box-theme-header">
            Grid
        </div>
        <div class="">
            {{adminform.form.gridName}}
        </div>
    </div>
    {% comment %} GRID TYPE {% endcomment %}
    <div class = 'complete_marketing_list'>
        <div class = 'newsletter_section_area d-flex'>
            <div class="text_h4"> Type</div>
            {{adminform.form.grid_type}}
        </div>
    </div>

    <div class="box-theme-form-devider">
    </div>

    <div id = "grid_all_layouts">
        <div class="text_h4"> Layout</div>
        {% comment %} PETS LAYOUTS {% endcomment %}
        <div class = 'id_grid_type_0' style = "display : {% if adminform.form.grid_type.value == 'PETS' %} block; {% else %}none;{% endif%}">
            <div id = "" class = "">
                <div class="box-theme-form-item">
                    <div class="banner-layout-types">
        
                        {% comment %} PETS LAYOUT 1 {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectMarketingLayout('pet_layout_1',this)">
                            <img src="{% static 'images/grid_pets_layouts/pets_layout1.png' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" id="pet_layout_1">Pet information is displayed overlaying the image
                            <input type="radio" value="pet_layout_1" id="{{adminform.form.pet_layout.name}}" name="{{adminform.form.pet_layout.name}}" {% if adminform.form.pet_layout.value == 'pet_layout_1' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
        
                    {% comment %} PETS LAYOUT 2  {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectMarketingLayout('pet_layout_2',this)">
                            <img src="{% static 'images/grid_pets_layouts/pets_layout2.png' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" id="pet_layout_2">No pet information
                            <input type="radio" value="pet_layout_2" id="{{adminform.form.pet_layout.name}}" name="{{adminform.form.pet_layout.name}}" {% if adminform.form.pet_layout.value == 'pet_layout_2' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
        
                    {% comment %} PETS LAYOUT 3  {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left random_layouts" onclick="SelectMarketingLayout('pet_layout_3',this)">
                            <img src="{% static 'images/grid_pets_layouts/pets_layout3.jpg' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" id="pet_layout_3">Pet information is displayed overlaping the image
                            <input type="radio" value="pet_layout_3" id="{{adminform.form.pet_layout.name}}" name="{{adminform.form.pet_layout.name}}" {% if adminform.form.pet_layout.value == 'pet_layout_3' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
        
                    {% comment %} PETS LAYOUT 4 {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectMarketingLayout('pet_layout_4',this)">
                            <img src="{% static 'images/grid_pets_layouts/pets_layout4.png' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" id="pet_layout_4">Pet information is displayed below the image
                            <input type="radio" value="pet_layout_4" id="{{adminform.form.pet_layout.name}}" name="{{adminform.form.pet_layout.name}}" {% if adminform.form.pet_layout.value == 'pet_layout_4' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
        
                    {% if adminform.form.layout.errors %}
                            {% for error in adminform.form.layout.errors  %}
                                    <div class="alert alert-danger error-block" role="alert">
                                        {{error}}
                                    </div>
                            {% endfor %}
                    {% endif %}
                    </div>
                </div>
            </div>
        </div>

        {% comment %} BRANDS LAYOUTS {% endcomment %}
        <div class = 'id_grid_type_1' style = "display : {% if adminform.form.grid_type.value == 'BRANDS' %} block; {% else %}none;{% endif%}">
            <div id = "" class = "">
                <div class="box-theme-form-item">
                    <div class="banner-layout-types">
        
                    {% comment %} BRANDS LAYOUT 1 {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectMarketingLayout('brand_layout_1',this)">
                            <img src="{% static 'images/grid_brands/grid_brands1.png' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" for="brand_layout_1" >No image, collection form only
                            <input type="radio" value="brand_layout_1" id="brand_layout_1" name="{{adminform.form.brand_layout.name}}" {% if adminform.form.brand_layout.value == 'brand_layout_1' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
        
                    {% comment %} BRANDS LAYOUT 2  {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectMarketingLayout('brand_layout_2',this)">
                            <img src="{% static 'images/grid_brands/grid_brands2.png' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" for="brand_layout_2" >No image, collection form centered 
                            <input type="radio" value="brand_layout_2" id="brand_layout_2" name="{{adminform.form.brand_layout.name}}" {% if adminform.form.brand_layout.value == 'brand_layout_2' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                        </div>
        
                    {% if adminform.form.brand_layout.errors %}
                            {% for error in adminform.form.brand_layout.errors  %}
                                    <div class="alert alert-danger error-block" role="alert">
                                        {{error}}
                                    </div>
                            {% endfor %}
                    {% endif %}
                    </div>
                </div>
            </div>
        </div>

        {% comment %} PROMOTIONS LAYOUTS {% endcomment %}
        <div class = 'id_grid_type_2' style = "display : {% if adminform.form.grid_type.value == 'PROMOTIONS' %} block; {% else %}none;{% endif%}">
            <div id = "" class = "">
                <div class="box-theme-form-item">
                    <div class="banner-layout-types">
        
                    {% comment %} PROMOTIONS LAYOUT 1 {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectMarketingLayout('promotion_layout_1',this)">
                            <img src="{% static 'images/grid_promotions/grid_promotions1.png' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" for="promotion_layout_1" >Image with text at the bottom
                            <input type="radio" value="promotion_layout_1" id="promotion_layout_1" name="{{adminform.form.promotion_layout.name}}" {% if adminform.form.promotion_layout.value == 'promotion_layout_1' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
        
                    {% comment %} PROMOTIONS LAYOUT 2  {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectMarketingLayout('promotion_layout_2',this)">
                            <img src="{% static 'images/grid_promotions/grid_promotions2.jpg' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" for="promotion_layout_2" >Image left and text on the right
                            <input type="radio" value="promotion_layout_2" id="promotion_layout_2" name="{{adminform.form.promotion_layout.name}}" {% if adminform.form.promotion_layout.value == 'promotion_layout_2' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                        </div>
        
                    {% if adminform.form.promotion_layout.errors %}
                            {% for error in adminform.form.promotion_layout.errors  %}
                                    <div class="alert alert-danger error-block" role="alert">
                                        {{error}}
                                    </div>
                            {% endfor %}
                    {% endif %}
                    </div>
                </div>
            </div>
        </div>

        {% comment %} TESTIMONIALS LAYOUTS {% endcomment %}
        <div class = 'id_grid_type_3' style = "display : {% if adminform.form.grid_type.value == 'TESTIMONIALS' %} block; {% else %}none;{% endif%}">
            <div id = "" class = "">
                <div class="box-theme-form-item">
                    <div class="banner-layout-types">
        
                    {% comment %} TESTIMONIALS LAYOUT 1 {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectMarketingLayout('testimonials_layout_1',this)">
                            <img src="{% static 'images/grid_testimonials/grid_testimonial_img1.png' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" for="testimonials_layout_1" >Image left and text on the right
                            <input type="radio" value="testimonials_layout_1" id="testimonials_layout_1" name="{{adminform.form.testimonial_layout.name}}" {% if adminform.form.testimonial_layout.value == 'testimonials_layout_1' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
        
                    {% comment %} TESTIMONIALS LAYOUT 2  {% endcomment %}
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectMarketingLayout('testimonials_layout_2',this)">
                            <img src="{% static 'images/grid_testimonials/grid_testimonial_img2.png' %}" alt="">
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" for="testimonials_layout_2" >Image on the top and text at the bottom
                            <input type="radio" value="testimonials_layout_2" id="testimonials_layout_2" name="{{adminform.form.testimonial_layout.name}}" {% if adminform.form.testimonial_layout.value == 'testimonials_layout_2' %} checked {% endif %} >
                            <span class="radiobtn"></span>
                            </label>
                        </div>
                        </div>
        
                    {% if adminform.form.brand_layout.errors %}
                            {% for error in adminform.form.brand_layout.errors  %}
                                    <div class="alert alert-danger error-block" role="alert">
                                        {{error}}
                                    </div>
                            {% endfor %}
                    {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% comment %} BLOG LAYOUTS {% endcomment %}
        <div class = 'id_grid_type_4' style = "display : {% if adminform.form.grid_type.value == 'BLOG' %} block; {% else %}none;{% endif%}">
        
        </div>
    </div>
     {% comment %} NUMBER OF ROWS {% endcomment %}
    <div class = 'grid-no-of-rows'>
        {{adminform.form.grid_no_of_rows}}
    </div>

    <div class="box-theme-form-devider">
    </div>

    {% comment %} CARD SIZE {% endcomment %}
    <div class = "grid-card-size">
        <div class = 'newsletter_section_area d-flex'>
            <div class="text_h4"> Card Size</div>
            <div class="admin-form ">
                <div class="form-check radio-outer d-flex align-items-center gap-2 p-0">
                    <input class="form-check-input custom-radio m-0" type="radio" name="grid_card_size" id="id_grid_card_size_0" value="SMALL" {% if adminform.form.grid_card_size.value == 'SMALL' %} checked {% else %} {% endif %}>
                    <label class="form-check-label custom-radio-label m-0" for="id_grid_card_size_0">
                        Small
                    </label>
                    <div class="box-theme-form-label" style="margin-left: -7px;">
                        <span style="/* position:relative; *//* margin-right: 20px; */">
                            <img src="/static/images/ic-info.svg" class="abs_meg_icon" style="top: 0;">
                            <div class="form-tooltip">
                                Small cards result in smaller images, but more of the cards can fit on the screen and be seen at one time.
                            </div>
                        </span>
                    </div>
                </div>
            
                <div class="form-check radio-outer d-flex align-items-center gap-2 p-0">
                    <input class="form-check-input custom-radio m-0" type="radio" name="grid_card_size" id="id_grid_card_size_1" value="LARGE" {% if adminform.form.grid_card_size.value == 'LARGE' %} checked {% else %} {% endif %}>
                    <label class="form-check-label custom-radio-label m-0" for="id_grid_card_size_1">
                        Large
                    </label>
                    <div class="box-theme-form-label" style="margin-left: -7px;">
                        <span style="/* position:relative; *//* margin-right: 20px; */">
                            <img src="/static/images/ic-info.svg" class="abs_meg_icon" style="top: 0;">
                            <div class="form-tooltip">
                                Large cards result in larger images, but fewer cards can fit on the screen and be seen at one time.
                            </div>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="box-theme-form-devider">
    </div>

    {% comment %} FILTER {% endcomment %}
    <div class = "grid-filter">
        <div class = "newsletter_section_area d-flex">

            <div class="text_h4">
                Filter
            </div>
            <div class="box-theme-help-text m-0">
                Select a filter by which pets will be displayed.
            </div>

            <div class = ''>
                <div class = 'grid-filter-section d-flex flex-column flex-gap'>
                    <div id="id_add_btn" class="box-theme-sub-title m-0">
                        <a href="javascript:void(0);" id = 'add_filter_btn' onclick = "AddFilter(this)" > + Add Filter</a>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

    <div class="box-theme-form-devider">
    </div>

    {% comment %} SORTING {% endcomment %}
    <div class = "newsletter_section_area16 d-flex">
        <div class="text_h4"> Sorting</div>
        <div class="box-theme-help-text m-0"> Select in what order pets will be displayed.</div>
        <div>
            {{adminform.form.marketing_message}}
        </div>

    </div>
    <div class="box-theme-form-devider">
    </div>

    {% comment %} NOTIFICATION {% endcomment %}
    <div class = "newsletter_section_area16 d-flex">
        <div class="text_h4"> Notification</div>
        <div class="box-theme-help-text m-0"> If no pets  are available, a collection form may show up.</div>
        <div>
            {{adminform.form.grid_notification}}
        </div>
    </div>
    <div class="box-theme-form-devider">
    </div>

    {% comment %} TITLE AND SUBTITLE {% endcomment %}
    <div class = "newsletter_section_area16 d-flex">
        <div class="text_h4"> Text</div>
        <div class="banner-edit-section banner-text-layout">
            <div id = 'text-section' class = "d-flex flex-column flex-gap">
                <div class = 'd-flex flex-column flex-gap-20'>
                    <div class="box-theme-form-item">
                        {{adminform.form.title_text}}
                    </div>
                    <div class="box-theme-tab-wrap sb50">
                        {{adminform.form.title_text_color}}
                    </div>
                </div>

                {% if adminform.form.title_text.errors %}
                    {% for error in adminform.form.title_text.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
                {% if adminform.form.title_text_color.errors %}
                    {% for error in adminform.form.title_text_color.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
                <div class = 'd-flex flex-column flex-gap-20'>
                    <div class="box-theme-form-item">
                        {{adminform.form.sub_title_text}}
                    </div>
                    <div class="box-theme-tab-wrap sb50">
                        {{adminform.form.sub_title_text_color}} 
                    </div>
                </div>
                {% if adminform.form.sub_title_text.errors %}
                    {% for error in adminform.form.sub_title_text.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
                {% if adminform.form.sub_title_text_color.errors %}
                    {% for error in adminform.form.sub_title_text_color.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            <div>
                <div class="banner-layout-wrap no-hover d-none">
                    <div class="banner-layout-wrap no-hover">
                        <div class="banner-layout-wrap-inner">
                            <img src="/static/images/widget_image/bannerplugin/banner-view2.png" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="box-theme-form-devider">
    </div>

    {% comment %} CARD DETAILS {% endcomment %}
    <div class = "grid-card-details">
        <div class = "newsletter_section_area16 d-flex" style = "display : block;">
        <div class="text_h4"> Card Details</div>
        <div class="box-theme-help-text m-0"> Select the information to be displayed.</div>
       
            <div class = "{{adminform.form.grid_card_details.name}}" style = "display : {% if adminform.form.grid_type.value == 'PETS' %} block; {% else %} none; {% endif %}">
                {{adminform.form.grid_card_details}}
            </div>
        
            <div class = "{{adminform.form.testimonial_info_display.name}}" style = "display : {% if adminform.form.grid_type.value == 'TESTIMONIALS'%} block; {% else %} none; {% endif %}">
                {{adminform.form.testimonial_info_display}}
            </div>
        </div>
    </div>

    <div class="box-theme-form-devider">
    </div>

    {% comment %} BUTTONS {% endcomment %}
    <div class = 'newsletter_section_area16 d-flex'> 
        <div class="text_h4"> Button</div>
        <div class="box-theme-help-text m-0"> Select the information to be displayed.</div>
        <div class="banner-edit-section button-layout">
            <div id="main-section-btn"  class = "d-flex flex-column flex-gap-30">
            </div>
            <div>
                <div class="banner-layout-wrap no-hover d-none">
                    <div class="banner-layout-wrap-inner">
                        <img src="{% static 'images/widget_image/bannerplugin/banner-view2.png' %}" alt="">
                    </div>
                </div>
            </div>
        </div>
        <div class = "d-flex" style = "gap:12px;">
            <div id="id_add_btn" class="box-theme-sub-title m-0">
                <a href="javascript:void(0);" onclick="AddButtons(mydata = false)"> + Add Button</a>
            </div>
        </div>
    </div>

    <div class="box-theme-form-devider">
    </div>

    {% comment %} PREVIEW {% endcomment %}
    <div class = "marketing_preview d-none">
        <div class="text_h4 pb-2"> Preview</div>
        <div class="mb-5">
            <ul class="theme-tab-layout">
                <li class="active btn_style_1_layout" data-target="btn_style_1_layout"><img src="/static/images/widget_image/bannerplugin/ph_monitor_enable.svg" alt="">
                </li><li class="btn_color_1_layout" data-target="btn_color_1_layout"><img src="/static/images/widget_image/bannerplugin/icons8_iphone.svg" alt=""></li>
            </ul>
        </div>
        <div class="desktop-preview desktop-newsletter-preview" id = "btn_style_1_layout">
           
        </div>
        <div class = "mobile-preview mobile-newsletter-preview d-none" id = "btn_color_1_layout">
           
        </div>
    </div>
    <div class="box-theme-form-devider d-none">
    </div>



</div>
{% block submit_buttons_bottom %} {% submit_row %} {% endblock %}
</form>
{% addtoblock 'js' %}
<script type = "text/javascript">

// to enable or disable the radio option 
$('input[type = "radio"]').on("click",function(){
    let x = $(this).val();
    let div_name = $(this).attr('name')
    $('.'+div_name).children().addClass('d-none')
    $('#'+x).removeClass('d-none')
   // previewNewsletter()
 });

 function SelectMarketingLayout(layoutId,data){
    $("#"+layoutId).click()
    let me = data

       
    $(me).parents(".box-theme-form-item").find(".activelayout").removeClass('activelayout')
    $(me).addClass('activelayout')
    //previewNewsletter(radio_choice = null, makt_email = selected_layout)
       

 }


function setPrimaryBtnStyle(shape,name){
    let ids = name.getAttribute('class').split(' ')[0]
    $("#"+ids).val(shape);
    let no = ids.split('-')[1]
    if(shape == 'fill'){
        // below code to toggle the color patterns 
        $("#primary-btn-set1-"+no).removeClass("d-none")
        $("#primary-btn-set2-"+no).addClass("d-none")
        $("#primary-btn-set2-"+no).children('li.active').removeClass('active')
        if ($("#primary-btn-set1-"+no).children('li.active').length <= 0){
            let firstcolor = $("#primary-btn-set1-"+no).children().first()
            firstcolor.addClass('active')
            $('#button_color_pattern-'+no).val('F2')
            $(name).children().removeClass('F1 F2 F3 F4')
            $(name).children().addClass($('#primary-btn-set1-'+no+' .button_color_pattern-'+no+'.active').data('value'))
        }
        else{
            $('#button_color_pattern-'+no).val($('#primary-btn-set1-'+no+' .button_color_pattern-'+no+'.active').data('value'))
            $(name).children().removeClass('F1 F2 F3 F4')
            $(name).children().addClass($('#primary-btn-set1-'+no+' .button_color_pattern-'+no+'.active').data('value'))
        }
    
    } else if(shape == 'outline'){
        // below code to toggle the color patterns 
        $("#primary-btn-set1-"+no).addClass("d-none")
        $("#primary-btn-set2-"+no).removeClass("d-none")
        $("#primary-btn-set1-"+no).children('li.active').removeClass('active')
        if ($("#primary-btn-set2-"+no).children('li.active').length <= 0){
            let firstcolor =  $("#primary-btn-set2-"+no).children().eq(1)
            firstcolor.addClass('active')
            $('#button_color_pattern-'+no).val('O2')
            $(name).children().removeClass('O1 O2 O3 O4')
            $(name).children().addClass($('#primary-btn-set2-'+no+' .button_color_pattern-'+no+'.active').data('value'))
        }
        else{
            $('#button_color_pattern-'+no).val($('#primary-btn-set2-'+no+' .button_color_pattern-'+no+'.active').data('value'))
            $(name).children().removeClass('O1 O2 O3 O4')
            $(name).children().addClass($('#primary-btn-set2-'+no+' .button_color_pattern-'+no+'.active').data('value'))
        }
    
    }
    
    }
     

 // preview switching tabs function
 $(".theme-tab-layout li").on("click", function () {
    let target_box = $(this).data("target");
    $(this).siblings().removeClass("active");
    $(this).addClass("active");
    if (target_box == 'btn_style_1_layout'){
        $(this).children().prop('src','/static/images/widget_image/bannerplugin/ph_monitor_enable.svg')
        $('.btn_color_1_layout').children().prop('src','/static/images/widget_image/bannerplugin/icons8_iphone.svg')
        $('#btn_style_1_layout').removeClass('d-none')
        $('#btn_color_1_layout').addClass('d-none')
    }
    else if (target_box == 'btn_color_1_layout'){
        $(this).children().prop('src','/static/images/widget_image/bannerplugin/icons8_iphone_enable.svg')
        $('.btn_style_1_layout').children().prop('src','/static/images/widget_image/bannerplugin/ph_monitor.svg')
        $('#btn_color_1_layout').removeClass('d-none')
        $('#btn_style_1_layout').addClass('d-none')
    }
})

   // set message color and background color from custom color
   $('.custom_color_change').on('blur',function(){
    let custom = $(this).parents('ul.theme-color-tab').siblings('input[type = "hidden"]').attr('id')
    $("#"+custom).val($(this).val())
    //previewNewsletter()
}) 

//previewNewsletter()

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>
<script>
    // TASK code to show the selected layout and hide the rest onchange of pet type
    $('input[name = "grid_type"]').on('change',function(){
        let ids = $(this).attr('id');
        $('.'+ids).siblings().css('display','none')
        $('.'+ids).css('display','block')
        cardDetailsToggle($(this).val())
        changefilter() // change filter 
    })
    function changefilter(){
        $(".PetFilter").remove()
        $("#main-section-btn").children().remove()
        loadfilters();
        loadbutton();
    }

    // functionality to toggle the card Details and filters
    function cardDetailsToggle(pet_type){
    
        if (pet_type == 'PETS'){
            $('.grid-card-details').show().next().show()
            $('.grid_card_details').show()
            $('.testimonial_info_display').hide()
            $('.grid-filter').show().next().show()
        }
        else if(pet_type == 'TESTIMONIALS'){
            $('.grid-card-details').show().next().show()
            $('.testimonial_info_display').show()
            $('.grid-filter').hide().next().hide()
            $('.grid_card_details').hide()
        }
        else{
            $('.testimonial_info_display').hide()
            $('.grid_card_details').hide()
            $('.grid-card-details').hide().next().hide()
            $('.grid-filter').show().next().show()
        }
    }
    // functionality to hide and show the font color tab
    $('.title-color-display:first').on('click',function(){
        $('.sb50').eq(0).toggle();
    })
    $('.title-color-display:last').on('click',function(){
        $('.sb50').eq(1).toggle();
    })

    // set font color of title and subtitle
    $(".theme-color-tab li").on("click", function () {
        $(this).siblings().removeClass("active");
        $(this).addClass("active");
        let x = $(this).attr("data-value");
        $('#instance1').val(x)
        $(this).siblings().last().find('.clr-field').css({'color':x});
        
        if ($(this).parent().attr('data-id') == 'id_title_text_color'){
            $('.title-color-display:first').css({"background":x});
        }
        else if (($(this).parent().attr('data-id') == 'id_sub_title_text_color')){
            $('.title-color-display:last').css({"background":x});
        }
        
        //setbannerPreview()
    })

    // set the selected color from color selector to the font selected title
    $('#id_title_text_color').nextAll().find('.color-selector').on('blur',function(){
                
        $('.title-color-display:first').css({"background":$(this).val()});
        
        //setbannerPreview()
    });

    // set the selected color from color selector to the font selected subtitle
    $('#id_sub_title_text_color').nextAll().find('.color-selector').on('blur',function(){
        $('.title-color-display:last').css({"background":$(this).val()});
        //setbannerPreview()
    });

// VALIDATE HOW MANY FILTER IS APPLIED BY THE USER
function validateFilter(added_elements){
    let validation = true
        let selected_pet_type = $(added_elements).find('select').val()
        if(selected_pet_type == '' || selected_pet_type == null){
            validation = false
        }
    return { 'validation' : validation, 'selected_pet_type' : selected_pet_type }
    
}
// TODO FUNCTION TO ADD THE DROPDOWN OPTION OF FILTER BY WHICH PETS WILL BE DISPLAYED.
function AddFilter(element){ 

    // get the number of pet filter
    let added_filters = $('.grid-filter-section').children().not('div#id_add_btn').last()
    let number = added_filters.length
    if (number > 0){
        let valid = validateFilter(added_filters)
        if(valid.validation == false){
            return false
        }
    }

    let drop_down = populateDropdown()
    $(element).closest('#id_add_btn').before(`<div class = "PetFilter"><div class="d-flex justify-content-between">
                                
                <select class="form-select w-50" name="pet_filter" id="" onchange = "selectPetType(this)">
                        ${drop_down}
                </select>
                <a id="delAnchor-1" class="del-anchor" href="javascript:void(0);" onclick="DeletePetType(this)"> <svg width="24" height="24" viewBox="2 2 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 6H14C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4C11.4696 4 10.9609 4.21071 10.5858 4.58579C10.2107 4.96086 10 5.46957 10 6ZM8 6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6H21C21.2652 6 21.5196 6.10536 21.7071 6.29289C21.8946 6.48043 22 6.73478 22 7C22 7.26522 21.8946 7.51957 21.7071 7.70711C21.5196 7.89464 21.2652 8 21 8H20.118L19.232 18.34C19.1468 19.3385 18.69 20.2686 17.9519 20.9463C17.2137 21.6241 16.2481 22.0001 15.246 22H8.754C7.75191 22.0001 6.78628 21.6241 6.04815 20.9463C5.31002 20.2686 4.85318 19.3385 4.768 18.34L3.882 8H3C2.73478 8 2.48043 7.89464 2.29289 7.70711C2.10536 7.51957 2 7.26522 2 7C2 6.73478 2.10536 6.48043 2.29289 6.29289C2.48043 6.10536 2.73478 6 3 6H8ZM15 12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17C14.2652 17 14.5196 16.8946 14.7071 16.7071C14.8946 16.5196 15 16.2652 15 16V12ZM10 11C10.2652 11 10.5196 11.1054 10.7071 11.2929C10.8946 11.4804 11 11.7348 11 12V16C11 16.2652 10.8946 16.5196 10.7071 16.7071C10.5196 16.8946 10.2652 17 10 17C9.73478 17 9.48043 16.8946 9.29289 16.7071C9.10536 16.5196 9 16.2652 9 16V12C9 11.7348 9.10536 11.4804 9.29289 11.2929C9.48043 11.1054 9.73478 11 10 11ZM6.76 18.17C6.8026 18.6694 7.03117 19.1346 7.40044 19.4735C7.76972 19.8124 8.25278 20.0003 8.754 20H15.246C15.7469 19.9998 16.2294 19.8117 16.5983 19.4728C16.9671 19.134 17.1954 18.6691 17.238 18.17L18.11 8H5.89L6.762 18.17H6.76Z" fill="#12BBD2"></path>
                </svg>Delete</a>

            </div></div>  `)
}


// TODO ALGORITHM TO ADD AND SHOW THE ADDED FILTERS
const petfilters = [
    { value: "Pet_Type", text: "Pet Type" },
    { value: "Breed", text: "Breed" },
    { value: "Sex", text: "Sex" },
    { value: "Status", text: "Status" },
    { value: "on_sale", text: "Is Pet On Sale?" },
    { value: "loc", text: "Location" }
  ];
const promotions = [
    { value: "Pet_Type", text: "Pet Type" },
    { value: "promotion_type", text: "Promotion Type" },
]
const brands = [
    { value: "Status", text: "Status" },
    { value: "promotion_type", text: "Promotion Type" },
]

  let selectedValues = [];

// Function to populate the dropdown
function populateDropdown() {
    let dropdown = '<option value="" disabled selected>------</option>';
    const gridType = $('input[name = "grid_type"]:checked').val() // fetch grid type 

    let allOptions = []
    if(gridType == 'PETS'){
        allOptions = petfilters
    }
    else if (gridType == 'PROMOTIONS'){
        allOptions = promotions
    }
    
    allOptions.forEach(option => {
      if (!selectedValues.includes(option.value)) {
        dropdown += `<option value="${option.value}">${option.text}</option>`
      }
    });
    return dropdown
  }
    
    
  function selectPetType(data){

    let selected_pet_type = $(data).val()
    selectedValues.push(selected_pet_type) // push the selected pet type in selectedValues list


    let grid_filter = ''

    if(selected_pet_type == 'Pet_Type'){
        grid_filter = `<div class = 'mt-20' >{{adminform.form.grid_pet_type}}</div>`
    }
    else if(selected_pet_type == 'Status'){
        
        grid_filter = `<div class = 'mt-20' >{{adminform.form.grid_pet_status}}</div>`
    }
    else if(selected_pet_type == 'Sex'){
        
        grid_filter = `<div class = 'mt-20' >{{adminform.form.grid_pet_sex}}</div>`
    }
    else if(selected_pet_type == 'loc'){
        
        grid_filter = `<div class = 'mt-20' >{{adminform.form.grid_pet_location}}</div>`
    }
    else if(selected_pet_type == 'on_sale'){
        
        grid_filter = `<div class = 'mt-20' >{{adminform.form.grid_Is_pet_on_sale}}</div>`
    }
    else if(selected_pet_type == 'Breed'){
        
        grid_filter = `<div class=" box-theme-help-text mt-20">Start typing the breed, click to select which adds to the array of breeds</div><div class = 'mt-20' >{{adminform.form.grid_breeds}}</div><div class = "breed_list d-flex gap-2 mt-20 flex-wrap"></div>`
    }
    else if(selected_pet_type == 'promotion_type'){
        
        grid_filter = `<div class = 'mt-20' >{{adminform.form.promotion_type}}</div>`
    }
    $(data).parents('.PetFilter').append(grid_filter)
    $('#id_grid_breeds').attr('class', 'w-50 selectpicker filter-dropdown'); // class to show it like a all the dropdowns
    $('#id_grid_breeds').attr({'data-live-search':'true', "data-width" : "100%" });
    $('.selectpicker').selectpicker();
    $(data).css('pointer-events', 'none') // and disable the dropdown
}
 
// LOAD FILTERS
$(document).ready(function(){
    loadfilters();

    let grid_type = $('input[name = "grid_type"]:checked').val()
    cardDetailsToggle(grid_type)
})
    function loadfilters(){

        const grid_type = $("input[name = 'grid_type']:checked").val()
        let pet_filter = {{adminform.form.pet_filter.value|safe}} || '';
        
        if(grid_type == "PETS"){
            pet_filter = pet_filter.filter(id => ['Pet_Type', 'Status', 'Sex', 'loc', 'on_sale', 'Breed' ].includes(id))
        }
        else if (grid_type == "BRANDS"){
            pet_filter = pet_filter.filter(id => ['Status',"Subcategory", 'Group',"Pet Type" ].includes(id))
        }
        else if(grid_type == "PROMOTIONS"){
            pet_filter = pet_filter.filter(id => ['Pet_Type',"promotion_type" ].includes(id))
        }
        else if(grid_type == "TESTIMONIALS"){
            pet_filter = pet_filter.filter(id => ['',"" ].includes(id))
        }
        else{
            pet_filter = null
        }

        const add_filter_btn = $('#add_filter_btn')
        selectedValues = []
        $.each(pet_filter, function(index,value){

            AddFilter(add_filter_btn);
            $('select[name="pet_filter"]').last().val(value).trigger('change')
            if(value == 'Breed'){
                let breeeds = JSON.parse($('[name="grid_breeds_list"]').val())
                
                $.each(breeeds, function(ind,val){
                    $('#id_grid_breeds').val(val).trigger('change');
                }) 
            }
        })
        }
    

    // BREED LIST
  let breed_data = []
  $(document).on('change', '#id_grid_breeds', function() {  // Use 'change' event instead of 'click'

  const breed_val = $(this).find("option:selected").text();  // Get the selected breed text
    
    // Check if the breed is already in the list
    if ($('.breed_list_item').filter(function() {
        return $(this).text().includes(breed_val);
    }).length === 0) {

        // Append the selected breed to the breed list if it's not already there
        $('.breed_list').append(`<div class="breed_list_item">${breed_val} <span onclick="deleteBreedList(this,'${$(this).val()}')">x</span></div>`);

        breed_data.push($(this).val())
        $('input[name="grid_breeds_list"]').val(JSON.stringify(breed_data))
    }   
  });

  function deleteBreedList(element,elm_val){
    $(element).parent().remove()
    breed_data = breed_data.filter(function(item) {
        return item !== elm_val;
    }); 
    $('input[name="grid_breeds_list"]').val(JSON.stringify(breed_data))
  }


  function DeletePetType(data){
    let deleted_pet_type = $(data).siblings('select').val()
    myArray = selectedValues.filter(function(value) {
        return value != `${deleted_pet_type}`; 
    });
    selectedValues = myArray
    $(data).parents('.PetFilter').remove();
  }

  // BUTTON SECTION CODES-------------------------------------------------

  const btn_list = {1:'First Button',2:'Second Button',3:"Third Button",4:"Fourth Button"};

    function waitForUserInput(no) {
        let grid_type = $("input[name = 'grid_type']:checked").val()
        let option = ''
        if (grid_type == "PETS"){
            option = `<option value="" disabled="" selected="">------</option>
                        <option value="Load_More">Load More</option>
                        <option value="See_all">See All {Plural_Pet_type}</option>
                        <option value="button_name">Link </option>`
        }
        else if (grid_type == "BRANDS"){
            option = `<option value="" disabled="" selected="">------</option>
                        <option value="Load_More">Load More</option>
                        <option value="Shop_All">Shop All</option>
                        <option value="See_all">See All</option>
                        <option value="button_name">Link </option>`
        }
        else if(grid_type == "PROMOTIONS"){
            option = `<option value="" disabled="" selected="">------</option>
                        <option value="Load_More">Load More</option>
                        <option value="Shop_Now">Shop Now</option>
                        <option value="See_all_promo">See All</option>
                        <option value="button_name">Link </option>`
        }
        else if(grid_type == "TESTIMONIALS"){
            option = `<option value="" disabled="" selected="">------</option>
                        <option value="Load_More">Load More</option>
                        <option value="share_your_story">Share Your Own Pet Story</option>
                        <option value="See_All">See All Testimonials</option>`
        }
        $("#main-section-btn").append(`
            <div class = "button_selection"><div class="box-theme-sub-title d-flex" id="headline_color">
                <div>${btn_list[no + 1]}</div>
                <a id="delAnchor-1" class="del-anchor" href="javascript:void(0);" onclick="DeletePetTypeButton(this)"> <svg width="24" height="24" viewBox="2 2 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 6H14C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4C11.4696 4 10.9609 4.21071 10.5858 4.58579C10.2107 4.96086 10 5.46957 10 6ZM8 6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6H21C21.2652 6 21.5196 6.10536 21.7071 6.29289C21.8946 6.48043 22 6.73478 22 7C22 7.26522 21.8946 7.51957 21.7071 7.70711C21.5196 7.89464 21.2652 8 21 8H20.118L19.232 18.34C19.1468 19.3385 18.69 20.2686 17.9519 20.9463C17.2137 21.6241 16.2481 22.0001 15.246 22H8.754C7.75191 22.0001 6.78628 21.6241 6.04815 20.9463C5.31002 20.2686 4.85318 19.3385 4.768 18.34L3.882 8H3C2.73478 8 2.48043 7.89464 2.29289 7.70711C2.10536 7.51957 2 7.26522 2 7C2 6.73478 2.10536 6.48043 2.29289 6.29289C2.48043 6.10536 2.73478 6 3 6H8ZM15 12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17C14.2652 17 14.5196 16.8946 14.7071 16.7071C14.8946 16.5196 15 16.2652 15 16V12ZM10 11C10.2652 11 10.5196 11.1054 10.7071 11.2929C10.8946 11.4804 11 11.7348 11 12V16C11 16.2652 10.8946 16.5196 10.7071 16.7071C10.5196 16.8946 10.2652 17 10 17C9.73478 17 9.48043 16.8946 9.29289 16.7071C9.10536 16.5196 9 16.2652 9 16V12C9 11.7348 9.10536 11.4804 9.29289 11.2929C9.48043 11.1054 9.73478 11 10 11ZM6.76 18.17C6.8026 18.6694 7.03117 19.1346 7.40044 19.4735C7.76972 19.8124 8.25278 20.0003 8.754 20H15.246C15.7469 19.9998 16.2294 19.8117 16.5983 19.4728C16.9671 19.134 17.1954 18.6691 17.238 18.17L18.11 8H5.89L6.762 18.17H6.76Z" fill="#12BBD2"></path>
                    </svg>Delete
                </a>

            </div>
            <select class="form-select w-50" name="button_type" id="button_type" >
                        ${option}
                        
            </select>
            </div>
        `)
        return new Promise((resolve) => {
            const dropdown = document.getElementById('button_type');
            dropdown.addEventListener('change', function() {
                if(dropdown.value){
                    resolve(dropdown.value);  // Resolve the promise with the selected value
                }
                else{
                    //console.log("jkle")
                }
            });
        });
    }

    
    
    async function AddButtons(mydata){

        let no_of_btns = $("#main-section-btn").children().length;
        let userSelection = ''
        if(!$("#button_type").length ){
            userSelection = await waitForUserInput(no_of_btns);
            if(userSelection){
                $("#main-section-btn").children().last().remove()
            }
        }
        else{
            return false
        }
        
        addFirstBtn((no_of_btns+1), userSelection);
        // check if no of buttons not less than 1
        if(no_of_btns == 0){
            $('#id_add_btn.box-theme-sub-title').css('margin-top', '40px') // if length of button greater than 0 then add button magin-top should be 40px
            
        }
        else if (no_of_btns == 4) {
            $('#id_add_btn').hide()
            return false
        }
    
    }

    function addFirstBtn(no, btn_type){

        const btn_type_dict = {'Load_More':'Load More','See_all':'See All {Plural_Pet_type}','button_name':"{button_name}", "Shop_All" : "Shop All", "See_All" : "See All Testimonials", "share_your_story" : "Share Your Own Pet Story", 'See_all_promo' : "See All", "Shop_Now" : "Shop Now"};
        let btn_length = btn_type_dict[btn_type].length
        let title_delete_section = `<div id = "section-${no}">
                    <div class="box-theme-sub-title d-flex" >
                        <div>${btn_list[no]} — <span class = "dy_btn_title_${no}">${btn_type_dict[btn_type]}</span></div>
                        <a id = "delAnchor-${no}" class = "del-anchor" href = "javascript:void(0);" onclick = "DeleteButton(this)"> <svg width="24" height="24" viewBox="2 2 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 6H14C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4C11.4696 4 10.9609 4.21071 10.5858 4.58579C10.2107 4.96086 10 5.46957 10 6ZM8 6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6H21C21.2652 6 21.5196 6.10536 21.7071 6.29289C21.8946 6.48043 22 6.73478 22 7C22 7.26522 21.8946 7.51957 21.7071 7.70711C21.5196 7.89464 21.2652 8 21 8H20.118L19.232 18.34C19.1468 19.3385 18.69 20.2686 17.9519 20.9463C17.2137 21.6241 16.2481 22.0001 15.246 22H8.754C7.75191 22.0001 6.78628 21.6241 6.04815 20.9463C5.31002 20.2686 4.85318 19.3385 4.768 18.34L3.882 8H3C2.73478 8 2.48043 7.89464 2.29289 7.70711C2.10536 7.51957 2 7.26522 2 7C2 6.73478 2.10536 6.48043 2.29289 6.29289C2.48043 6.10536 2.73478 6 3 6H8ZM15 12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17C14.2652 17 14.5196 16.8946 14.7071 16.7071C14.8946 16.5196 15 16.2652 15 16V12ZM10 11C10.2652 11 10.5196 11.1054 10.7071 11.2929C10.8946 11.4804 11 11.7348 11 12V16C11 16.2652 10.8946 16.5196 10.7071 16.7071C10.5196 16.8946 10.2652 17 10 17C9.73478 17 9.48043 16.8946 9.29289 16.7071C9.10536 16.5196 9 16.2652 9 16V12C9 11.7348 9.10536 11.4804 9.29289 11.2929C9.48043 11.1054 9.73478 11 10 11ZM6.76 18.17C6.8026 18.6694 7.03117 19.1346 7.40044 19.4735C7.76972 19.8124 8.25278 20.0003 8.754 20H15.246C15.7469 19.9998 16.2294 19.8117 16.5983 19.4728C16.9671 19.134 17.1954 18.6691 17.238 18.17L18.11 8H5.89L6.762 18.17H6.76Z" fill="#12BBD2"/>
                            </svg>Delete</a>

                    </div>
                    <div class="box-theme-form-item background">
                        <div class="box-theme-form-item-inline Btn_textbox">
                            <div class="box-theme-form-item-inline-input">

                                <!-- input the button name -->
                                <div class = "btn_text_main">
                                    <input name="selected_button_type-${no}" id="selected_button_type-${no}" type="hidden" value="${btn_type}" >
                                    <input name="button_text-${no}" id="button_text-${no}" type="text" value="${btn_type_dict[btn_type]}" placeholder="" class="form-input btn-text mb-20">
                                    <div class = 'l_button_text-${no} word_count'>${btn_length}/25</div>  
                                </div>
                                `
        
            if(btn_type == 'Load_More'){
                title_delete_section += ''
            }
            else if (btn_type == 'See_all'){
                title_delete_section += ''
            }
            else if (btn_type == 'button_name'){

                title_delete_section += `<div class = "mb-20">   
                                <div class="admin-form  horizontal-checkbox ">

                                    <div class="form-check radio-outer d-flex align-items-center p-0 gap-2">
                                        <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field-${no}" onclick = "selectRadioOption(this)" id="link_choice_field_1-${no}" value="Internal link" checked="">
                                        <label class="form-check-label custom-radio-label" for="link_choice_field_1-${no}">
                                            Internal link
                                        </label>
                                        <div class="box-theme-form-label">
                                        <span style="position:relative; margin-right: 20px;">
                                            <img src="/static/images/ic-info.svg" class="abs_meg_icon">
                                            <div class="form-tooltip">
                                                An internal link is a link to an existing page on your website. When an internal link button is clicked, the page will open in the same tab.
                                            </div>
                                        </span>
                                    </div>
                                    </div>
                                
                                    <div class="form-check radio-outer d-flex align-items-center p-0 gap-2">
                                        <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field-${no}" onclick = "selectRadioOption(this)" id="link_choice_field_2-${no}" value="External link">
                                        <label class="form-check-label custom-radio-label " for="link_choice_field_2-${no}">
                                            External link
                                        </label>
                                        <div class="box-theme-form-label">
                                        <span style="position:relative; margin-right: 20px;">
                                            <img src="/static/images/ic-info.svg" class = "abs_meg_icon">
                                            <div class="form-tooltip">
                                                An external link is a link that directs users away from your website. When an external link button is clicked, the page will open in a new window or tab.
                                            </div>
                                        </span>
                                    </div>
                                    </div>
                                
                                </div>
                                </div>
                                    <!-- input fields for internal link, external link, phone link  -->
                        <div class="row">    
                            <div class="col-8">                    
                                <div id="cont_internal_link_btn_${no}" class = "mb-20">
                                    {{adminform.form.button_internallink_1}}
                                </div>
                                <div id="cont_external_link_btn_${no}" style="display: {% if adminform.form.link_choice_field_btn1.value == 'External link' %}block{% else %}none{%endif%} " class = "mb-20">
                                    <input name="button_link-${no}" id = "button_link-${no}" type="text" value="{% if adminform.form.first_button_link.value %}{{adminform.form.first_button_link.value}}{% endif %}" placeholder="http://" class="form-input">
                                </div>
                                
                            </div>
                        </div>
                    
                    </div>
                </div>
                {% if adminform.form.first_button_text.errors %}
                    {% for error in adminform.form.first_button_text.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
                {% if adminform.form.first_button_link.errors %}
                    {% for error in adminform.form.first_button_link.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
                {% if adminform.form.button_internallink_1.errors %}
                    {% for error in adminform.form.button_internallink_1.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
                {% if adminform.form.first_button_target.errors %}
                {% for error in adminform.form.first_button_target.errors  %}
                    <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                    </div>
                {% endfor %}
                {% endif %}
            </div>`


            }
            title_delete_section += `   
                            
            <div class="box-theme-tab-wrap" id="first-btn-section">
                <div class="box-theme-tab">
                    <ul class="theme-tab">
                        <li class="active btn_style_${no}" data-target="btn_style_${no}">Style</li>
                        <li class="btn_color_${no}" data-target="btn_color_${no}">Color</li>
                    </ul>
                </div>
                <div>
                <div class="box-theme-form-item theme-tab-content style-tab" id="btn_style_${no}">
                    <div class="box-theme-tab-wrap admin-form admin-form ">
                        <ul class="theme-button-tab ">
                            <input type="hidden" name="button_style-${no}" id="button_style-${no}" value="{{adminform.form.first_button_style.value|default:'fill'}}"> 
                            <li class="button_style-${no} active" onclick="setPrimaryBtnStyle('fill',this)"><button class="btn-theme F2">Button </button></li>
                            <li class="button_style-${no}" onclick="setPrimaryBtnStyle('outline',this)"><button class="btn-theme O2">Button </button></li>
                        </ul>
                    </div>
                </div>
                <div class="box-theme-form-item theme-tab-content color-tab" id="btn_color_${no}" style="display: none;">
                    <div class="box-theme-tab-wrap admin-form admin-form ">

                            <input type="hidden" name="button_color_pattern-${no}" id="button_color_pattern-${no}" value="{{adminform.form.first_button_color_pattern.value|default:'F2'}}">
                            <ul class="theme-button-tab" id="primary-btn-set1-${no}">
                                <li class="button_color_pattern-${no} active {% if adminform.form.first_button_color_pattern.value == 'F2' %}active{% endif %}" data-value = "F2" onclick="selectButtonColor(this, 'F2')"><button class="btn-theme F2">Button</button></li>
                                <li class="button_color_pattern-${no}{% if adminform.form.first_button_color_pattern.value == 'F1' %}active{% endif %}" data-value = "F1" onclick="selectButtonColor(this, 'F1')"><button class="btn-theme F1">Button</button></li>
                                <li class="button_color_pattern-${no}{% if adminform.form.first_button_color_pattern.value == 'F4' %}active{% endif %}" data-value = "F4" onclick="selectButtonColor(this, 'F4')"><button class="btn-theme F4">Button</button></li>
                                <li class="button_color_pattern-${no}{% if adminform.form.first_button_color_pattern.value == 'F3' %}active{% endif %}" data-value = "F3" onclick="selectButtonColor(this, 'F3')"><button class="btn-theme F3">Button</button></li>
                            </ul>
                            <ul class="theme-button-tab {% if adminform.form.first_button_style.value == 'outline' %} {% else %} d-none {% endif %} " id="primary-btn-set2-${no}">
                                <li class="button_color_pattern-${no}{% if adminform.form.first_button_color_pattern.value == 'O1' %}active{% endif %}" data-value = "O1" onclick="selectButtonColor(this, 'O1')"><button class="btn-theme O1">Button</button></li>
                                <li class="button_color_pattern-${no}{% if adminform.form.first_button_color_pattern.value == 'O2' %}active{% endif %}" data-value = "O2" onclick="selectButtonColor(this, 'O2')"><button class="btn-theme O2">Button</button></li>
                                <li class="button_color_pattern-${no}{% if adminform.form.first_button_color_pattern.value == 'O3' %}active{% endif %}" data-value = "O3" onclick="selectButtonColor(this, 'O3')"><button class="btn-theme O3">Button</button></li>
                                <li class="button_color_pattern-${no}{% if adminform.form.first_button_color_pattern.value == '04' %}active{% endif %}" data-value = "O4" onclick="selectButtonColor(this, 'O4')"><button class="btn-theme O4">Button</button></li>
                            </ul>
                    </div>
                </div>
                </div>
            </div>
            {% if adminform.form.first_button_style.errors %}
                {% for error in adminform.form.first_button_style.errors  %}
                    <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                    </div>
                {% endfor %}
            {% endif %}
            {% if adminform.form.first_button_outline_color.errors %}
                {% for error in adminform.form.first_button_outline_color.errors  %}
                    <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                    </div>
                {% endfor %}
            {% endif %}
            {% if adminform.form.first_button_fill_color.errors %}
                {% for error in adminform.form.first_button_fill_color.errors  %}
                    <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                    </div>
                {% endfor %}
            {% endif %}
            {% if adminform.form.first_button_font_color.errors %}
                {% for error in adminform.form.first_button_font_color.errors  %}
                    <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                    </div>
                {% endfor %}
            {% endif %}
        </div>
        `
        $("#main-section-btn").append(
            title_delete_section
        )


    // this code to make the drop down icon of the internal link as per the figma
    $('#id_button_internallink_1').addClass('form-select') 
    }

    // THIS FUNCTION IS TO DELETE THE SELECTION BUTTON TYPE
    function DeletePetTypeButton(element){
        $(element).parents('.button_selection').remove();
    }


// delete Buttons for now
function DeleteButton(data){
    let ids = data.id.split('-')[1]
 
    // THIS WILL DELETE THE SECTION
       
    let remain_btn = $("#main-section-btn").children()
 
    // check the lenght of the buttons to remove the add button margin
    if (remain_btn.length == 1 ){
       $('#id_add_btn.box-theme-sub-title').css('margin-top', '0px') // if length of button greater than 0 then add button magin-top should be 40px
    }
    for (let no_of_btns = (parseInt(ids)); no_of_btns <= remain_btn.length; no_of_btns++){
       
          // ADD THE DELETE BUTTON 
          let btn_val = no_of_btns+1
          $(remain_btn[no_of_btns]).find(`#delAnchor-`+btn_val).attr('id','delAnchor-'+(no_of_btns))
 
          // change the id of the section
          $(remain_btn[no_of_btns]).attr('id','section-'+(no_of_btns))
 
          // change the title and delete btn class
          $(remain_btn[no_of_btns]).find('.box-theme-sub-title.d-flex').children().eq(0).text(btn_list[no_of_btns])
          //x.find('.box-theme-sub-title.d-flex').children().eq(1).removeClass().addClass('section-'+(no_of_btns+1))
          
          // change the text of the button (also change the name and id)
          $(remain_btn[no_of_btns]).find('#button_text-'+btn_val).attr('name','button_text-'+(no_of_btns))
          $(remain_btn[no_of_btns]).find('#button_text-'+btn_val).attr('id','button_text-'+(no_of_btns))
 
          $(remain_btn[no_of_btns]).find('.l_button_text-'+btn_val).removeClass('l_button_text-'+no_of_btns).addClass('l_button_text-'+(no_of_btns))
          // change the name and id of the buttons link 
          $(remain_btn[no_of_btns]).find('#link_choice_field_1-'+btn_val).attr({'id':'link_choice_field_1-'+(no_of_btns),'name' : 'link_choice_field-'+(no_of_btns)})
          $(remain_btn[no_of_btns]).find('#link_choice_field_2-'+btn_val).attr({'id':'link_choice_field_2-'+(no_of_btns),'name' : 'link_choice_field-'+(no_of_btns)})
          $(remain_btn[no_of_btns]).find('#link_choice_field_3-'+btn_val).attr({'id':'link_choice_field_3-'+(no_of_btns),'name' : 'link_choice_field-'+(no_of_btns)})
 
          // hide and show the link field using the below code 
          $(remain_btn[no_of_btns]).find('#cont_internal_link_btn_'+btn_val).attr('id','cont_internal_link_btn_'+(no_of_btns))
          $(remain_btn[no_of_btns]).find('#cont_external_link_btn_'+btn_val).attr('id','cont_external_link_btn_'+(no_of_btns))
          $(remain_btn[no_of_btns]).find('#cont_phone_link_btn_'+btn_val).attr('id','cont_phone_link_btn_'+(no_of_btns))
 
          // change the name id tag of the dropdown for internal link
          $(remain_btn[no_of_btns]).find('#id_button_internallink_'+btn_val).attr({'id':'id_button_internallink_'+(no_of_btns),'name' : 'button_internallink_'+(no_of_btns)})
 
          // change the id and name of the external link 
          $(remain_btn[no_of_btns]).find('#button_link-'+btn_val).attr({'id':'button_link-'+(no_of_btns),'name' : 'button_link-'+(no_of_btns)})
          
          // change the id and name of the phone link 
          $(remain_btn[no_of_btns]).find('#button_phone_link-'+btn_val).attr({'id':'button_phone_link-'+(no_of_btns),'name' : 'button_phone_link-'+(no_of_btns)})
          
          // change the id and name of the Window selection
          $(remain_btn[no_of_btns]).find('#id_button_target-'+btn_val).attr({'id':'id_button_target-'+(no_of_btns),'name' : 'button_target-'+(no_of_btns)})
 
          // change the class of the tab for style and color
          
          let btn_style = $(remain_btn[no_of_btns]).find(".btn_style_"+btn_val)
          btn_style.attr({'data-target':'btn_style_'+(no_of_btns)})
          btn_style.addClass('btn_style_'+(no_of_btns)).removeClass("btn_style_"+btn_val)
          let btn_color = $(remain_btn[no_of_btns]).find(".btn_color_"+btn_val)
          btn_color.attr({'data-target':'btn_color_'+(no_of_btns)})
          btn_color.addClass('btn_color_'+(no_of_btns)).removeClass("btn_color_"+btn_val)
 
          $(remain_btn[no_of_btns]).find("#btn_style_"+btn_val).attr('id','btn_style_'+(no_of_btns))
          $(remain_btn[no_of_btns]).find("#btn_color_"+btn_val).attr('id','btn_color_'+(no_of_btns))
 
          // below code to change the id of the hidden field of the style of the button
          $(remain_btn[no_of_btns]).find("#button_style-"+btn_val).attr({'id':'button_style-'+(no_of_btns),'name':'button_style-'+(no_of_btns)})
          let button_style = $(remain_btn[no_of_btns]).find(".button_style-"+btn_val)
          button_style.addClass('button_style-'+(no_of_btns)).removeClass('button_style-'+(btn_val))
 
          // hide and show the custom color set options
          $(remain_btn[no_of_btns]).find('#primary-btn-set1-'+btn_val).attr("id","primary-btn-set1-"+(no_of_btns))
          $(remain_btn[no_of_btns]).find('#primary-btn-set2-'+btn_val).attr("id","primary-btn-set2-"+(no_of_btns))
 
          //change the id and name of the input field for color patterns
          $(remain_btn[no_of_btns]).find("#button_color_pattern-"+btn_val).attr({'id':'button_color_pattern-'+(no_of_btns),'name':'button_color_pattern-'+(no_of_btns)})
          let button_color_pattern = $(remain_btn[no_of_btns]).find(".button_color_pattern-"+btn_val)
          button_color_pattern.addClass('button_color_pattern-'+(no_of_btns)).removeClass('button_color_pattern-'+(btn_val))
          
    }
    $('#section-'+ids).remove()
    $('#id_add_btn').show()
 
 }
  
 function selectRadioOption(data){
    let id = data.id
    let index = id.split('-')[1]
    if (id == 'link_choice_field_1-'+index){
        $('#cont_internal_link_btn_'+index).show()
        $("#cont_external_link_btn_"+index).hide()
        $("#cont_phone_link_btn_"+index).hide()
        $(`#id_button_target-${index}`).val('_self')
    }
    else if (id == 'link_choice_field_2-'+index){
        $('#cont_internal_link_btn_'+index).hide()
        $("#cont_external_link_btn_"+index).show()
        $("#cont_phone_link_btn_"+index).hide()
        $(`#id_button_target-${index}`).val('_blank')
    }
    else if (id == 'link_choice_field_3-'+index){
        $('#cont_internal_link_btn_'+index).hide()
        $("#cont_external_link_btn_"+index).hide()
        $("#cont_phone_link_btn_"+index).show()
        $(`#id_button_target-${index}`).val('_self')
    }
 }

 // functionality to linit the charecter in button text
 $('#main-section-btn').on('keyup','.btn-text',function(){
    if($(this).val().length > 25){
       $(this).val($(this).val().substring(0,25));
    }
    else{
       let id = $(this).attr('id').split('-')[1]
       $('.dy_btn_title_'+id).text($(this).val())
       $(this).siblings().text($(this).val().length+'/25')
       
    }
   })

// BUTTON STYLE ----------------------------------------

$(document).ready(function () {
      
    $(".theme-tab li").on("click", function () {
        var target_box = $(this).data("target");
        $(this).siblings().removeClass("active");
        $(this).addClass("active");
        $(this).parents(".box-theme-tab-wrap").find(".box-theme-form-item").hide();
        $("#" + target_box).show();
    })
    $(".theme-button-tab li").on("click", function () {
        $(this).siblings().removeClass("active");
        $(this).addClass("active");
      
        let change_style = $(this).data('name')
         if(change_style == "fill"){
            $('#submit-btn').removeClass('O2').addClass("F2")
            $('#submit').removeClass('O2').addClass("F2")
         }
         else{
            $('#submit-btn').removeClass('F2').addClass("O2")
            $('#submit').removeClass('F2').addClass("O2")
         }
    })
    $(".theme-color-tab li").on("click", function () {
        $(this).siblings().removeClass("active");
        $(this).addClass("active");
    })

    if('{{adminform.form.title_text_color.value}}'){
        $('.title-color-display:first').css({"background":'{{adminform.form.title_text_color.value}}' });
    }
    if('{{adminform.form.sub_title_text_color.value}}'){
        $('.title-color-display:last').css({"background":'{{adminform.form.sub_title_text_color.value}}' });
    }
})

// to change the tab list like style to colors
$(document).on("click",".theme-tab li", function () {
    let target_box = $(this).attr('class');
    $(this).siblings().removeClass("active");
    $(this).addClass("active");
    $("#" + target_box).show();
    $("#" + target_box).siblings().hide();
 });
 
 // this click function is on style two buttons to active and inactive the buttons
 $(document).on("click",".theme-button-tab li", function () {
    $(this).siblings().removeClass("active");
    $(this).addClass("active");
 });

 function selectButtonColor(btn, colorPattern){
    $("#" + btn.getAttribute('class')).val(colorPattern);
    let no = $(btn).attr('class').split('-')[1]
    let myclasses = $('.button_style-'+no+'.active button')
    let myclass= $('.button_style-'+no+'.active button').attr('class').split(' ');
    update_btn_color(no,myclass,myclasses,colorPattern)
 }

 function update_btn_color(num,class_names,my_class_names,color_pattern){
    class_names.forEach(function(number){
 
       if(['F1','F2','F3','F4'].includes(number)){
          my_class_names.removeClass(number)
          $('.button_style-'+num+'.active button').addClass(`btn-theme `+color_pattern)
       }
       else{
          my_class_names.removeClass(number)
          $('.button_style-'+num+'.active button').addClass(`btn-theme `+color_pattern)
       }
    }) 
 }

 // SAVE DYNAMIC BUTTONS 
 function save_changes(){
    let no_of_btns = $("#main-section-btn").children().length;
    let custom_btn_data = {};
    let grid_type = $('input[name = "grid_type"]:checked').val() // fetch the grid type and save the buttons according to the grid type 
    custom_btn_data[grid_type] = {}
    $("#main-section-btn").children().each(function(index, element) {
       if($('#button_text-'+(index+1)).val() != ''){
        custom_btn_data[grid_type]['btn'+(index+1)] = {}
        custom_btn_data[grid_type]['btn'+(index+1)]['button_text'] = $('#button_text-'+(index+1)).val()
        custom_btn_data[grid_type]['btn'+(index+1)]['link_choice_field'] = $('[name = "link_choice_field-'+(index+1)+'"]:checked').val()
        custom_btn_data[grid_type]['btn'+(index+1)]['id_button_internallink'] = $('[name = "button_internallink_'+(index+1)+'"').val()
        custom_btn_data[grid_type]['btn'+(index+1)]['button_link'] = $('[name = "button_link-'+(index+1)+'"').val()
        custom_btn_data[grid_type]['btn'+(index+1)]['button_style'] = $('[name = "button_style-'+(index+1)+'"').val()
        custom_btn_data[grid_type]['btn'+(index+1)]['button_color_pattern'] = $('[name = "button_color_pattern-'+(index+1)+'"').val()
        custom_btn_data[grid_type]['btn'+(index+1)]['selected_button_type'] = $('[name = "selected_button_type-'+(index+1)+'"').val()
       }
    });
    let string_data = JSON.stringify(custom_btn_data)
    $('#{{adminform.form.grid_button_data.name}}').val(JSON.stringify(custom_btn_data))
 }

  //  load all the buttons that is saved
  $(document).ready(function(){
        loadbutton()
    });


    function loadbutton(){

    let btn_data = {{adminform.form.grid_button_data.value|safe}}
    let grid_type = $('input[name = "grid_type"]:checked').val()
    btn_data = btn_data[`${grid_type}`] || {}

    let n = Object.keys(btn_data)
    for(let i = 1;i<=n.length;i++){
            let btn_txt_len  = btn_data['btn'+i]['button_text'].length
            addFirstBtn(i,btn_data['btn'+i]['selected_button_type'])
            $('#button_text-'+i).val(btn_data['btn'+i]['button_text'])
            $('#selected_button_type-'+i).val(btn_data['btn'+i]['selected_button_type'])
            $('.dy_btn_title_'+i).text(btn_data['btn'+i]['button_text'])
            $('.l_button_text-'+i).text(btn_txt_len+"/25")
            $('[name = "link_choice_field-'+i+'"][value = "'+btn_data['btn'+i]['link_choice_field']+'"]').prop('checked',true)
 
            // check which button is saved like internal link, external link, or phone link
            if (btn_data['btn'+i]['link_choice_field'] == 'Internal link'){
                $('#cont_internal_link_btn_'+i).show()
                $('#cont_external_link_btn_'+i).hide()
                $('#cont_phone_link_btn_'+i).hide()
            }
            else if(btn_data['btn'+i]['link_choice_field'] == 'External link'){
                $('#cont_internal_link_btn_'+i).hide()
                $('#cont_external_link_btn_'+i).show()
                $('#cont_phone_link_btn_'+i).hide()
            }
            $('[name = "button_internallink_'+i+'"]').val(btn_data['btn'+i]['internallink_id'])
            $('[name = "button_link-'+i+'"]').val(btn_data['btn'+i]['button_link'])

            $('[name = "button_style-'+i+'"]').val(btn_data['btn'+i]['button_style'])
            $('[name = "button_color_pattern-'+i+'"]').val(btn_data['btn'+i]['button_color_pattern'])

            if (btn_data['btn'+i]['button_style'] == 'fill'){
                $('[name = "button_style-'+i+'"]').siblings('li.button_style-'+i).removeClass('active')
                $('[name = "button_style-'+i+'"]').siblings('li.button_style-'+i+':first').addClass('active')
                $('#primary-btn-set1-'+i).removeClass('d-none')
                $('#primary-btn-set2-'+i).addClass('d-none')
                $('#primary-btn-set1-'+i+' li').each(function(){
                    if(btn_data['btn'+i]['button_color_pattern'] == $(this).data('value')){
                        $(this).addClass('active')
                    } 
                    else{
                        $(this).removeClass('active')
                    }
                });
            }
            else if (btn_data['btn'+i]['button_style'] == 'outline'){
                $('[name = "button_style-'+i+'"]').siblings('li.button_style-'+i).removeClass('active')
                $('[name = "button_style-'+i+'"]').siblings('li.button_style-'+i+':last').addClass('active')
                //$('[name = "button_style-'+i+'"]').siblings('li.button_style-'+i+':last').children().removeClass('button-style-outline').addClass(btn_data['btn'+i]['button_color_pattern'])
                $('#primary-btn-set2-'+i).removeClass('d-none')
                $('#primary-btn-set1-'+i).addClass('d-none')
                $('#primary-btn-set2-'+i+' li').each(function(){
                    if(btn_data['btn'+i]['button_color_pattern'] == $(this).data('value')){
                        $(this).addClass('active')
                    } 
                    else{
                        $(this).removeClass('active')
                    }
                });
            }
 
    }
    for(let i = 1;i<=n.length;i++){
       $('.button_style-'+i+'.active button').removeClass().addClass(`btn-theme `+btn_data['btn'+i]['button_color_pattern'])
    }
    // default button style and pattern
 
    if(n.length == 0){
       $('#id_add_btn.box-theme-sub-title').css('margin-top', '0') // code to remove the margin of add button 
       $('.button_style-1').eq(0).addClass('active')
       $('#primary-btn-set1-1').removeClass('d-none')
       $('#primary-btn-set1-1').children().first().addClass('active')
    }
}
</script>
{% endaddtoblock %}
{% endblock content %}
