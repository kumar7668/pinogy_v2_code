{% extends 'admin/base_change_form.html' %}
{% load cms_tags menu_tags sekizai_tags static admin_modify %}
{% load global_theme_config_tags %}
{% block content %}
{% global_theme_object as global_theme_config %}
{% addtoblock 'css' %}
<link rel="stylesheet" href='{{global_theme_config.get_themecss_file}}'>
<link rel="stylesheet" type="text/css" href="{% static 'css/custom-info.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/custom-plugin.css' %}">
<style>
   {% if global_theme_config.primary_color and global_theme_config.secondary_color %}
   :root {
   --primary-element: {{global_theme_config.primary_color}};
   --secondary-element: {{global_theme_config.secondary_color}};
   }
   {% endif %}
   .dev_colorpicker_preview .clr-field {
   opacity: 0;
   cursor: pointer;
   }
   .banner-layout-wrap-inner img{

   }
   #first-btn-section .rectangle,
   #second-btn-section .rectangle {
   border-radius: 0px;
   }
   #first-btn-section .rounded,
   #second-btn-section .rounded {
   border-radius: 12px;
   }
   #first-btn-section .pill,
   #second-btn-section .pill {
   border-radius: 100px;
   }
   .buck-absolute {
   position: absolute;
   }
   /* Django admin style override */
   ul > li {
   list-style-type: none;
   }
   .infofirst-preview{
      margin-top : 20px;
   }
   .mobile-view{
      margin-top : 20px;
   }
   {% if global_theme_config.primary_button_shape %}
   .infofirst-preview .infofirst-btn.pill{
   border-radius: 100px;
   }
   .infofirst-preview .infofirst-btn.rounded{
   border-radius: 12px;
   }
   .infofirst-preview .infofirst-btn.rectangle{
   border-radius: 0;
   }
   {% endif %}
   .infofirst-preview .infofirst-img {
   width: 416px;

   }
   .btnhide{
   display: none;
   }
   .btnshow{
   display: block;
   }
   .btnshow .box-theme-tab{
      margin: 20px 0 20px 0;
   }
   .clsbuttontype{
   font-size: 18px;
   padding-bottom: 20px;
   color: var(--primary);
   }
   .clsbgbuttontype{
   font-size: 18px;
   padding-bottom: 20px;
   color: var(--primary);
   display: flex;
   align-items: center;
   }
</style>
<style>
   .tab {
      display: none;
      }
    .main_tab {
        display: flex;
        align-items: center;
        gap: 40px;
        align-self: stretch;
        {% comment %} margin: 20px 0 20px 0; {% endcomment %}
        font-weight : 700;
    }
    p{
      font-size : 18px;
    }
    .main_tab div span:after{
        content : '|';
        padding-left: 40px;
        color : #003F5A;
      }
      {% comment %} .top-indicator{
         color: #003F5A;
         opacity : 0.6;
      }
      .top-indicator:hover{
         color: #003F5A;
         opacity : 1;
      } {% endcomment %}
      .not-top-indicator{
         color: #003F5A;
         opacity : 0.6;
      }
      .not-top-indicator:hover{
         color: #003F5A;
         opacity : 1;
      }
      .active1{
         color: #12BBD2;
      }

    .main_tab div:last-child span::after{
       content : '';
    }
    .video_img > img{
      width: 100%;
    }
    .admin-form.horizontal-checkbox {
      gap: 25px;
      padding : 15px 0 15px 0;
  }
   .F2{
      background-color : var(--secondary-element);
      color : white;
      border : none;
   }
   .F1{
      background-color : var(--primary-element);
      color : white;
      border : none;
   }
   .F4{
      background-color : white;
      color : var(--secondary-element);
      border : none;
   }
   .F3{
      background-color : white;
      color : var(--primary-element);
      border : none;
   }
   .O1{
      background-color : white;
      border : 1px solid var(--primary-element);
      color : var(--primary-element);
   }
   .O2{
      background-color : white;
      border : 1px solid var(--secondary-element);
      color : var(--secondary-element);
   }
   .O3{
      background-color : white;
      border : 1px solid black;
      color : black;
   }
   .O4{
      background-color : F2F5F6;
      border : 1px solid white;
      color : white;
   }

   .btn_fill_fn{
      background-color : {{adminform.form.first_button_fill_color.value}};
      color : {{adminform.form.first_button_font_color.value}};
      border : {{adminform.form.first_button_fill_color.value}};
   }
   .btn_fill_fn2{
      background-color : {{adminform.form.second_button_fill_color.value}};
      color : {{adminform.form.second_button_font_color.value}};
      border : {{adminform.form.second_button_fill_color.value}};
   }
   .btn_outline_fn{
      background-color : white;
      color : {{adminform.form.first_button_outline_color.value}};
      border :1px solid {{adminform.form.first_button_outline_color.value}};
   }
   .btn_outline_fn2{
      background-color : white;
      color : {{adminform.form.second_button_outline_color.value}};
      border :1px solid {{adminform.form.second_button_outline_color.value}};
   }
   .button-style-fill {
      background-color: var(--secondary-element);
      color: white;
      border : none;
   }
   .button-style-outline{
      border : 1px solid var(--secondary-element);
      color : var(--secondary-element);
      background-color : white;
   }
   .submit_btn{
      background-color : #02BBFF;
      border : 1px solid #02BBFF;
      color : white;
      border-radius : 3px;
      font-family: 'Open Sans';
      font-style: normal;
      float: left;
      width: 100px;
      height: 45px;
      font-size: 18px;
      font-weight: 700;
   }
   .d-none-display{
      display : block;
   }
   .activelayout {
      padding: 10px;
      border-radius: 12px;
      border: 2px dashed #12BBD2;
      background: rgba(18, 187, 210, 0.05);
  }
  .banner-layout-types .banner-layout-wrap img {
      width : 100%;
  }
  .my50img{
   aspect-ratio: 1;
   background-size: cover;
   background-repeat: no-repeat;
   background-position: center;
  }
  .card.formcard input{
   border-color : var(--global-primary-color);
   opacity : 0.4;
  }
  .card.formcard input::placeholder,textarea,label{
   color : var(--global-primary-color);
  }
  .card.formcard textarea{
   border-color : var(--global-primary-color);
   opacity : 0.4;
  }
  .card.formcard textarea::placeholder{
   color : var(--global-primary-color);
  }
  .card.formcard .h3-info-title{
   font-size : 24px;
  }
  .card.formcard .h3-info-subtitle{
   font-size : 18px;
  }
  .info-layout-content-vid {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%;
  }
  .prev_video{
   position: absolute;
   width: 100%;
   height: auto;
   top: 0;
   left: 0;
  }
  .prev_video{
   position: absolute;
   width: 100%;
   height: auto;
   top: 0;
   left: 0;
  }
  .iframecss{
   position: absolute;
   width: 100%;
   height: 100%;
   top: 0;
   left: 0;
  }
  @media (min-width : 1200px){
   .banner-layout-types{
      {% comment %} grid-template-columns: 1fr 1fr 1fr; {% endcomment %}
   }
  }
</style>
<style>
   .mobile-view{
      position : relative;
      max-width : 320px;
      border-radius : 5px;
      background-size: cover; /* or background-size: 100%; */
      background-repeat: no-repeat;
      background-position: center; 

   }
   .mobile-img-prev{
      height : 100%;
      width : 100%;
   }
   .devidor{
      flex-direction : column;
   }
   #main-section-btn .box-theme-sub-title{
      justify-content: space-between;
   }
   #main-section-btn #section-1 .box-theme-sub-title{
      margin-top : 0px;
   }
   #btnaction .del-anchor{
      text-decoration : none;
      color: #12BBD2!important;
      font-size : 18px;
      font-weight : 400;
   }
   #id_add_btn a{
      color : #003f5a;
      text-decoration : none;
      line-height : 1;
   }
   #id_add_btn.box-theme-sub-title{
      margin : 40px 0 0 0 ;
  }
  #main-section-btn .theme-button-tab {
   margin-bottom : 8px;
}
   .ck-editor__editable {
      cursor: text;
  }
  .quantity_of_image .banner-layout-wrap img{
      border-radius : 12px;
  }
  #infoblockfirstpluginmodel_form .box-theme-form-devider{
      margin : 40px 0 40px 0;
  }
  #infoblockfirstpluginmodel_form .main_tab{
      height : 20px;
      font-size : 22px;
  }

  {% comment %} ckeditor source balloon {% endcomment %}
  [dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{
   position : absolute;
   right : 0;
  }
  .ck.ck-balloon-panel.ck-powered-by-balloon{
   display : none;
}

{% comment %} this codes is global change of info block {% endcomment %}
#infoblockfirstpluginmodel_form .box-theme-title {
   margin-bottom : 20px;
}

#infoblockfirstpluginmodel_form  .admin-form.horizontal-checkbox{
   padding : 0;
}
#button-section .box-theme-form-item{
   padding-bottom : 0;
}
#infoblockfirstpluginmodel_form .banner-layout-wrap{
   margin-bottom : 0;
}
.background{
   margin-top : 20px;
}
.ml-2{
   margin-left : 8px!important;
}
.double20{
   margin: 20px 0 20px 0;
}
{% comment %} end here {% endcomment %}
.flex-background .box-theme-title{
   margin-bottom : 0;
}
.flex-background .admin-form.horizontal-checkbox {
   padding : 0;
}
.flex-background .box-theme-sub-title{
   margin : 0 0 20px 0;
}
.flex-background .box-theme-form-item{
   padding-bottom : 0;
}
#collection_form .w-50{
   width : 510px !important;
}
#collection_form .sec-label{
   font-family: 'Open Sans';
   font-style: normal;
   font-weight: 400;
   font-size: 20px;
   line-height: 140%;
   color: var(--custom-primary);
}
iframe.iframecss{
   height : 100vh;
}
iframe.iframecss50{
   position: absolute;
   width: 100%;
   height: 100%;
   top: 0;
   left: 0;
}
.mobile-view .msg-btn-cont .message_text{
   line-height : 140%;
}


.main_tab div {
   margin-left: -15px;
}
.abs_meg_icon{
   position : absolute;
   top : -2px;
}

.plugin-section-flex {
   justify-content: center;
    position: fixed;
    height: 44px;
    background: white;
    align-items: center;
    text-align: center;
    top: 0;
    width: 93%;
    padding: 40px 0 40px 20px;
    z-index : 100;
    left : 40px;
}
#infoblockfirstpluginmodel_form .mg-all-40 .tab{
   padding-top : 40px;
}
</style>
{% endaddtoblock %}
<form {% if has_file_field %}enctype="multipart/form-data" {% endif %}{% if form_url %}action="{{ form_url }}" {% endif %}method="post" id="{{ opts.model_name }}_form" onsubmit="save_changes()">
{% csrf_token %}
{{adminform.form.errors}}
<input type="hidden" value="" id = "{{adminform.form.button_data.name}}" name = "{{adminform.form.button_data.name}}">
<div class="mg-all-40">
   <div class = "plugin-section-flex">
      <div class = "main_tab">
         <div id = 'media_id' class="active1"><img src="{% static 'images/widget_image/infoblockfirst/media1.svg' %}">
            <span >Media</span>
         </div>
         <div id = "text_id" class="not-top-indicator">
            <img src="">
            <span >Text</span>
         </div>
         <div id = 'button_id' class="not-top-indicator">
            <img src="">
            <span >{% if adminform.form.layout.value == "LAYOUT6" and adminform.form.media_type.value == "Image" %} Collection Form {% else %} Button{% endif %}</span>
         </div>
      </div>
   </div>

   



   <div class="tab">
      <div class="box-theme-title">
         Media
      </div>
      <div class="box-theme-sub-title">
         {{adminform.form.media_type}}
      </div>
      <div class="box-theme-form-devider">
      </div>
      <div class="{{adminform.form.media_type.name}}">
         <div class="media {% if adminform.form.media_type.value == 'Image' %} {% else %} d-none {% endif %}" id = "Image">
            <div class="box-theme-title">
               Layout
            </div>
            <div class="box-theme-sub-title">
               Quantity of images
            </div>

            <div class="box-theme-sub-title">
               {{adminform.form.quantity_of_image}}
            </div>
            
            <div class="{{adminform.form.quantity_of_image.name}}">
               <div class="media {% if adminform.form.quantity_of_image.value == 'QTY1'%} {% else %} d-none {% endif %}" id="QTY1">
                  <div class="box-theme-form-item p-0">
                     <div class="banner-layout-types">
                        <div class="banner-layout-wrap">
                           <div class="banner-layout-wrap-inner txt-1-btn-left" onclick="SelectInfoBlockFirstLayout('layout_1',this)">
                              <img src="{% static 'images/widget_image/infoblockfirst/layout1.png' %}" alt="">
                           </div>
                           <div class="banner-layout-box-control">
                              <label class="checkcontainer" id="layout_1">Image left and text on the right 
                              <input type="radio" value="LAYOUT1" id="layout_group" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT1' %} checked {% endif %} >
                              <span class="radiobtn"></span>
                              </label>
                           </div>
                        </div>
                        <div class="banner-layout-wrap">
                           <div class="banner-layout-wrap-inner txt-1-btn-right" onclick="SelectInfoBlockFirstLayout('layout_2',this)">
                              <img src="{% static 'images/widget_image/infoblockfirst/layout2.png' %}" alt="">
                           </div>
                           <div class="banner-layout-box-control">
                              <label class="checkcontainer" id="layout_2">Text left and image on the right 
                              <input type="radio" value="LAYOUT2" id="layout_group" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT2' %} checked {% endif %} >
                              <span class="radiobtn"></span>
                              </label>
                           </div>
                        </div>
                        <div class="banner-layout-wrap">
                           <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectInfoBlockFirstLayout('layout_3',this)">
                              <img src="{% static 'images/widget_image/infoblockfirst/layout3.png' %}" alt="">
                           </div>
                           <div class="banner-layout-box-control">
                              <label class="checkcontainer" id="layout_3">Round image left and text on the right 
                              <input type="radio" value="LAYOUT3" id="layout_group" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT3' %} checked {% endif %} >
                              <span class="radiobtn"></span>
                              </label>
                           </div>
                        </div>
                        <div class="banner-layout-wrap">
                           <div class="banner-layout-wrap-inner txt-2-btn-right" onclick="SelectInfoBlockFirstLayout('layout_4',this)">
                              <img src="{% static 'images/widget_image/infoblockfirst/layout4.png' %}" alt="">
                           </div>
                           <div class="banner-layout-box-control">
                              <label class="checkcontainer" id="layout_4">Text left and round image on the right 
                              <input type="radio" value="LAYOUT4" id="layout_group" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT4' %} checked {% endif %} >
                              <span class="radiobtn"></span>
                              </label>
                           </div>
                        </div>
                        
                        <div class="banner-layout-wrap">
                           <div class="banner-layout-wrap-inner txt-2-btn-left" onclick="SelectInfoBlockFirstLayout('layout_7',this)">
                              <img src="{% static 'images/widget_image/infoblockfirst/layout5.png' %}" alt="">
                           </div>
                           <div class="banner-layout-box-control">
                              <label class="checkcontainer" id="layout_7">Image left and text on the right 
                              <input type="radio" value="LAYOUT7" id="layout_group" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT7' %} checked {% endif %} >
                              <span class="radiobtn"></span>
                              </label>
                           </div>
                        </div>
                        <div class="banner-layout-wrap">
                           <div class="banner-layout-wrap-inner txt-2-btn-right" onclick="SelectInfoBlockFirstLayout('layout_5',this)">
                              <img src="{% static 'images/widget_image/infoblockfirst/layout7.png' %}" alt="">
                           </div>
                           <div class="banner-layout-box-control">
                              <label class="checkcontainer" id="layout_5">Text left and image on the right 
                              <input type="radio" value="LAYOUT5" id="layout_group" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT5' %} checked {% endif %} >
                              <span class="radiobtn"></span>
                              </label>
                           </div>
                        </div>
                        <div class="banner-layout-wrap">
                           <div class="banner-layout-wrap-inner txt-2-btn-right" onclick="SelectInfoBlockFirstLayout('layout_6',this)">
                              <img src="{% static 'images/widget_image/infoblockfirst/layout17.png' %}" alt="image with form">
                           </div>
                           <div class="banner-layout-box-control">
                              <label class="checkcontainer" id="layout_6">Text, image left and form on the right
                              <input type="radio" value="LAYOUT6" id="layout_group" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT6' %} checked {% endif %}>
                              <span class="radiobtn"></span>
                              </label>
                           </div>
                        </div>
                        {% if adminform.form.layout.errors %}
                        {% for error in adminform.form.layout.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                           {{error}}
                        </div>
                        {% endfor %}
                        {% endif %}
                     </div>
                  </div>
                  <div class="box-theme-form-devider">
                  </div>
                  <div class="box-theme-title">
                     Image
                  </div>
                  <div class="box-theme-form-item p-0">
                     <div class="form-upload">
                        <p>Drop files or click to upload</p>
                        <button class="btn-theme btn-shape-1 btn-style-1 btn-color-1" style="background:#12BBD2;">Upload Image</button>
                        <div class="area">
                           <input type="file" name="{{adminform.form.image.name}}" id="{{adminform.form.image.name}}"/>
                        </div>
                     </div>
                     <div class="alert alert-danger error-block d-none err-img" role="alert">
                        This field is required.
                     </div>
                     {% if adminform.form.image.errors %}
                     {% for error in adminform.form.image.errors  %}
                     <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                     </div>
                     {% endfor %}
                     {% endif %}
                  </div>
                  <div class = "{% if adminform.form.image.value %}{% else%}d-none {% endif %} preview-{{adminform.form.image.name}}">
                     <div class="box-theme-preview-list" >
                        <ul class="{{adminform.form.image.name}}">
                           {% if adminform.form.image.value %}
                           <li class="banner-image-preview-list">
                              <img id = "prew-image" src="{{adminform.form.instance.image.url}}" alt="">
                              <button onClick="deleteImage('{{adminform.form.image.name}}','{{adminform.form.instance.id}}',this)" type="button">
                                 <img src="{% static 'images/ic-delete.svg' %}" alt="">
                             </button>
                           </li>
                           {% endif %}
                        </ul>
                     </div>
                  </div>
                  <div class="box-theme-sub-title d-flex ms-1" >
                     {{adminform.form.alt_name_image}}
                     <div class = "box-theme-form-label">
                        <span style = "position:relative;">
                           <img src="/static/images/ic-info.svg">
                           <div class="form-tooltip">
                              ALT text is important, it improves your image accesibility & SEO.
                           </div>
                        </span>
                     </div>
                  </div>
                  <div class="box-theme-form-devider">
                  </div>
               </div>
               <div class="media {% if adminform.form.quantity_of_image.value == 'QTY2'%} {% else %} d-none {% endif %}" id="QTY2">
                  <div class="box-theme-form-item p-0">
                     <div class="banner-layout-types">
                        <div class="banner-layout-wrap">
                           <div class="banner-layout-wrap-inner txt-1-btn-left" onclick="SelectInfoBlockFirstLayout('layout_12',this)">
                              <img src="{% static 'images/widget_image/infoblockfirst/layoutwithdoubleimage.png' %}" style="width: 100%;" alt="">
                           </div>
                           <div class="banner-layout-box-control">
                              <label class="checkcontainer" id="layout_12">Images left and right and text centered
                              <input type="radio" value="LAYOUT12" id="layout_group2" name="{{adminform.form.layout2.name}}" {% if adminform.form.layout2.value == 'LAYOUT12' %} checked {% endif %} >
                              <span class="radiobtn"></span>
                              </label>
                           </div>
                        </div>
                        {% if adminform.form.layout2.errors %}
                        {% for error in adminform.form.layout2.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                           {{error}}
                        </div>
                        {% endfor %}
                        {% endif %}
                     </div>
                     <div class="box-theme-form-devider">
                     </div>
                  </div>
                  <div class="box-theme-title">
                     Image
                  </div>
                  <div class="box-theme-sub-title">
                     On the left side
                  </div>
                  <div class="box-theme-form-item">
                     <div class="form-upload">
                        <p>Drop files or click to upload</p>
                        <button class="btn-theme btn-shape-1 btn-style-1 btn-color-1" style="background:#12BBD2;">Upload Image</button>
                        <div class="area">
                           <input type="file" name="{{adminform.form.image_left.name}}" id="{{adminform.form.image_left.name}}" />
                        </div>
                     </div>
                     <div class="alert alert-danger error-block d-none err-img-left" role="alert">
                        This field is required.
                     </div>
                     {% if adminform.form.image_left.errors %}
                     {% for error in adminform.form.image_left.errors  %}
                     <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                     </div>
                     {% endfor %}
                     {% endif %}
                  </div>
                  <div class = "{% if adminform.form.image_left.value %}{% else%}d-none {% endif %} preview-{{adminform.form.image_left.name}}">
                     <div class="box-theme-preview-list" >
                        <ul class="{{adminform.form.image_left.name}}">
                           {% if adminform.form.image_left.value %}
                           <li class="banner-image-preview-list">
                              <img src="{{adminform.form.instance.image_left.url}}" alt="">
                              <button onClick="deleteImage('{{adminform.form.image_left.name}}','{{adminform.form.instance.id}}',this)" type="button">
                                 <img src="{% static 'images/ic-delete.svg' %}" alt="">
                             </button>
                           </li>
                           {% endif %}
                        </ul>
                     </div>
                  </div>
                  <div class="box-theme-sub-title d-flex ms-1">
                     {{adminform.form.alt_name_image_left}}
                     <div class = "box-theme-form-label">
                        <span style = "position:relative;">
                           <img src="/static/images/ic-info.svg">
                           <div class="form-tooltip">
                              ALT text is important, it improves your image accesibility & SEO.
                           </div>
                        </span>
                     </div>
                  </div>
                  <div class = 'mt-40'></div>
                  <div class="box-theme-sub-title">
                     On the Right side
                  </div>
                  <div class="box-theme-form-item">
                     <div class="form-upload">
                        <p>Drop files or click to upload</p>
                        <button class="btn-theme btn-shape-1 btn-style-1 btn-color-1" style="background:#12BBD2;">Upload Image</button>
                        <div class="area">
                           <input type="file" name="{{adminform.form.image_right.name}}" id="{{adminform.form.image_right.name}}" />
                        </div>
                     </div>
                     <div class="alert alert-danger error-block d-none err-img-right" role="alert">
                        This field is required.
                     </div>
                     {% if adminform.form.image_right.errors %}
                     {% for error in adminform.form.image_right.errors  %}
                     <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                     </div>
                     {% endfor %}
                     {% endif %}
                  </div>
                  <div class = "{% if adminform.form.image_right.value %}{% else%}d-none {% endif %} preview-{{adminform.form.image_right.name}}">
                     <div class="box-theme-preview-list">
                        <ul class="{{adminform.form.image_right.name}}">
                           {% if adminform.form.image_right.value %}
                           <li class="banner-image-preview-list">
                              <img src="{{adminform.form.instance.image_right.url}}" alt="">
                              <button onClick="deleteImage('{{adminform.form.image_right.name}}','{{adminform.form.instance.id}}',this)" type="button">
                                 <img src="{% static 'images/ic-delete.svg' %}" alt="">
                             </button>
                           </li>
                           {% endif %}
                        </ul>
                     </div>
                  </div>
                  <div class="box-theme-sub-title d-flex ms-1">
                     {{adminform.form.alt_name_image_right}}
                     <div class = "box-theme-form-label">
                        <span style = "position:relative;">
                           <img src="/static/images/ic-info.svg">
                           <div class="form-tooltip">
                              ALT text is important, it improves your image accesibility & SEO.
                           </div>
                        </span>
                     </div>
                  </div>
                  <div class="box-theme-form-devider">
                  </div>
               </div>
            </div>
            
         </div>
         <div class="media {% if adminform.form.media_type.value == 'Video' %} {% else %} d-none {% endif %}" id = "Video">
            <div class="box-theme-title">
               Layout
            </div>
            <div>
               <div>
            <div class="box-theme-form-item p-0">
               <div class="banner-layout-types">
                  <div class="banner-layout-wrap">
                     <div class="banner-layout-wrap-inner video_img" onclick="SelectInfoBlockFirstLayout('layout_13',this)">
                        <img src="{% static 'images/widget_image/infoblockfirst/video1.png' %}" alt="">
                     </div>
                     <div class="banner-layout-box-control">
                        <label class="checkcontainer" id="layout_13">Video left and text on the right
                        <input type="radio" value="LAYOUT13" id="layout_group" name="{{adminform.form.layout_video.name}}" {% if adminform.form.layout_video.value == 'LAYOUT13' %} checked {% endif %} >
                        <span class="radiobtn"></span>
                        </label>
                     </div>
                  </div>
                  <div class="banner-layout-wrap">
                     <div class="banner-layout-wrap-inner video_img" onclick="SelectInfoBlockFirstLayout('layout_14',this)">
                        <img src="{% static 'images/widget_image/infoblockfirst/video2.png' %}" alt="">
                     </div>
                     <div class="banner-layout-box-control">
                        <label class="checkcontainer" id="layout_14">Text left and video on the right
                        <input type="radio" value="LAYOUT14" id="layout_group" name="{{adminform.form.layout_video.name}}" {% if adminform.form.layout_video.value == 'LAYOUT14' %} checked {% endif %} >
                        <span class="radiobtn"></span>
                        </label>
                     </div>
                  </div>
                  <div class="banner-layout-wrap">
                     <div class="banner-layout-wrap-inner video_img" onclick="SelectInfoBlockFirstLayout('layout_15',this)">
                        <img src="{% static 'images/widget_image/infoblockfirst/video3.png' %}" alt="">
                     </div>
                     <div class="banner-layout-box-control">
                        <label class="checkcontainer" id="layout_15">Video and text centered
                        <input type="radio" value="LAYOUT15" id="layout_group" name="{{adminform.form.layout_video.name}}" {% if adminform.form.layout_video.value == 'LAYOUT15' %} checked {% endif %} >
                        <span class="radiobtn"></span>
                        </label>
                     </div>
                  </div>
                  <div class="banner-layout-wrap">
                     <div class="banner-layout-wrap-inner video_img" onclick="SelectInfoBlockFirstLayout('layout_16',this)">
                        <img src="{% static 'images/widget_image/infoblockfirst/video4.png' %}" alt="">
                     </div>
                     <div class="banner-layout-box-control">
                        <label class="checkcontainer" id="layout_16">Video only
                        <input type="radio" value="LAYOUT16" id="layout_group" name="{{adminform.form.layout_video.name}}" {% if adminform.form.layout_video.value == 'LAYOUT16' %} checked {% endif %} >
                        <span class="radiobtn"></span>
                        </label>
                     </div>
                  </div>
                  
                  {% if adminform.form.layout_video.errors %}
                  {% for error in adminform.form.layout_video.errors  %}
                  <div class="alert alert-danger error-block" role="alert">
                     {{error}}
                  </div>
                  {% endfor %}
                  {% endif %}
               </div>
               <div class="box-theme-form-devider">
               </div>
               <div class="box-theme-title">
                  Video
               </div>
               <div class="box-theme-sub-title">
                  {{adminform.form.video_type}}
               </div>
               <div class="{{adminform.form.video_type.name}}">
                  <div class="media {% if adminform.form.video_type.value == 'link'%} {% else %} d-none {% endif %}" id="link">
                     {{adminform.form.video_link}}
                     <br>
                     <div class="alert alert-danger error-block d-none err-img-link" role="alert">
                        This field is required.
                     </div>
                     {% if adminform.form.video_link.errors %}
                     {% for error in adminform.form.video_link.errors  %}
                     <div class="alert alert-danger error-block mt-3" role="alert">
                        {{error}}
                     </div>
                     {% endfor %}
                     {% endif %}
                     <div class="mt-4 box-theme-form-devider">
                     </div>
                  </div>
                  <div class="media {% if adminform.form.video_type.value == 'upload'%} {% else %} d-none {% endif %}" id="upload">
                     {% comment %} {{ adminform.form.video }} {% endcomment %}
                     {% comment %} <div class="box-theme-title">
                        Video upload
                     </div> {% endcomment %}
                     <div class="box-theme-form-item p-0">
                        <div class="form-upload">
                           <p>Click to upload</p>
                           <button class="btn-theme btn-shape-1 btn-style-1 btn-color-1" style="background:#12BBD2;">Upload Video</button>
                           <div class="area">
                              <input type="file" name="{{adminform.form.video.name}}" id="{{adminform.form.video.name}}" accept="video/*"/>
                           </div>
                        </div>
                     </div>
                     <div class="alert alert-danger error-block d-none err-img-upload mt-3" role="alert">
                        This field is required.
                     </div>
                     {% if adminform.form.video.errors %}
                     {% for error in adminform.form.video.errors  %}
                     <div class="alert alert-danger error-block mt-3" role="alert">
                        {{error}}
                     </div>
                     {% endfor %}
                     {% endif %}
                     <div id ="video_size_error" class="alert alert-danger error-block mt-3 d-none" role="alert">
                        The video size must not exceed 30 MB.
                     </div>
                     <div class="col-12">
                        <div class = "{% if adminform.form.video.value %}{% else%}d-none {% endif %} preview-{{adminform.form.video.name}}">
                           <div class="box-theme-sub-title">
                              Preview Video
                           </div>
                           <div class="box-theme-preview-list" >
                              <ul class="{{adminform.form.video.name}}">
                                 {% if adminform.form.video.value %}
                                 <li class="banner-image-preview-list">
                                    <iframe id="preview_video" src="{{adminform.form.instance.video.url}}" ></iframe>
                                    {% comment %} <button onClick="deleteImage('{{adminform.form.video.name}}','{{adminform.form.instance.id}}',this)" type="button">
                                       <img src="{% static 'images/ic-delete.svg' %}" alt="">
                                 </button> {% endcomment %}
                                 </li>
                                 {% endif %}
                              </ul>
                           </div>
                        </div>
                     </div>
                     <div class="box-theme-form-devider">
                     </div>
                  </div>
               </div>
            </div>
         </div>
         </div>
         </div>
         <div class="media {% if adminform.form.media_type.value == 'None' %} {% else %} d-none {% endif %}" id = "None">
         </div>
      </div>
      <div class = 'flex-background'>
         <div class="box-theme-title">
            Background
         </div>
         {{ adminform.form.background}}

         <div class = "{{adminform.form.background.name}}">
            <div id = "yes" class = "{% if adminform.form.background.value == 'no' %} d-none {% endif %}" >
               <div class="box-theme-sub-title">
                  Type
               </div>
               <div class="clsbgbuttontype">
                  {{ adminform.form.bg_type }}
               </div>
               <div class="imagediv">
                  {{ adminform.form.bg_color }}
                  {% if adminform.form.bg_color.errors %}
                  {% for error in adminform.form.bg_color.errors  %}
                  <div class="alert alert-danger error-block" role="alert">
                     {{error}}
                  </div>
                  {% endfor %}
                  {% endif %}
               </div>
               <div class="box-theme-form-item colordiv">
                  <div class="form-upload">
                     <p>Drop files or click to upload</p>
                     <button class="btn-theme btn-shape-1 btn-style-1 btn-color-1" style="background:#12BBD2;">Upload Image</button>
                     <div class="area">
                        <input type="file" name="{{adminform.form.bg_image.name}}" id="{{adminform.form.bg_image.name}}" />
                     </div>

                     
                     {% if adminform.form.bg_image.errors %}
                     {% for error in adminform.form.bg_image.errors  %}
                     <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                     </div>
                     {% endfor %}
                     {% endif %}
                  </div>
                  <div class="alert alert-danger error-block d-none err-img-bg mt-3" role="alert">
                     This field is required.
                  </div>
                  <div class = "{% if adminform.form.bg_image.value %}{% else%}d-none {% endif %} preview-{{adminform.form.bg_image.name}}">
                     <div class="box-theme-preview-list" >
                        <ul class="{{adminform.form.bg_image.name}}">
                           {% if adminform.form.bg_image.value %}
                           <li class="banner-image-preview-list">
                              <img src="{{adminform.form.instance.bg_image.url}}" alt="">
                              <button onClick="deleteImage('{{adminform.form.bg_image.name}}','{{adminform.form.instance.id}}',this)" type="button">
                                 <img src="{% static 'images/ic-delete.svg' %}" alt="">
                           </button>
                           </li>
                           {% endif %}
                        </ul>
                     </div>
                  </div>
                  <div class="d-flex">
                     {{adminform.form.alt_name_bg_image}}
                     <div class = "box-theme-form-label">
                        <span style = "position:relative;">
                           <img src="/static/images/ic-info.svg">
                           <div class="form-tooltip">
                              ALT text is important, it improves your image accesibility & SEO.
                           </div>
                        </span>
                     </div>
                  </div>
                  
                  <div class="container-fluid d-none">
                     <div class="row">
                        <div class="col-12">
                           <div class="box-theme-title">
                              Mobile Image
                           </div>
                           <div class="box-theme-form-item">
                              <div class="form-upload">
                                 <p>Upload your .JPG, .PNG, .SVG, .WEBP or .GIF files here or drag the image</p>
                                 <button class="btn-theme btn-shape-1 btn-style-1 btn-color-1" style="background:#12BBD2;">Upload Mobile Image</button>
                                 <div class="area">
                                    <input type="file" name="{{adminform.form.mobimage.name}}" id="{{adminform.form.mobimage.name}}" />
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="alert alert-danger error-block d-none err-img-bgmob" role="alert">
                           This field is required.
                        </div>
                        {% if adminform.form.mobimage.errors %}
                        {% for error in adminform.form.mobimage.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                           {{error}}
                        </div>
                        {% endfor %}
                        {% endif %}
                        <div class="col-12">
                           <div class = "{% if adminform.form.mobimage.value %}{% else%}d-none {% endif %} preview-{{adminform.form.mobimage.name}}">
                              <div class="box-theme-preview-list" >
                                 <ul class="{{adminform.form.mobimage.name}}">
                                    {% if adminform.form.mobimage.value %}
                                    <li class="banner-image-preview-list">
                                       <img id="banner-mob-img" src="{{adminform.form.instance.mobimage.url}}" alt="">
                                       <button onClick="deleteImage('{{adminform.form.mobimage.name}}','{{adminform.form.instance.id}}',this)" type="button">
                                          <img src="{% static 'images/ic-delete.svg' %}" alt="">
                                    </button>
                                    </li>
                                    {% endif %}
                                 </ul>
                              </div>
                           </div>
                        </div>
                        <div class="box-theme-sub-title d-flex ms-1">
                           {{adminform.form.alt_name_mobimage}}
                           <div class = "box-theme-form-label">
                              <span style = "position:relative;">
                                 <img src="/static/images/ic-info.svg">
                                 <div class="form-tooltip">
                                    ALT text is important, it improves your image accesibility & SEO.
                                 </div>
                              </span>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div id = "no">
            </div>

         </div>
      </div>
      <div class="box-theme-form-devider">
      </div>
   </div>
   <div class="tab">
      <div class="box-theme-title banner-text-layout">
         Text
      </div>
      <div class="main-section">
         <div class="box-theme-sub-title">
            Title
         </div>
         <div class="child-section my-3">
            {{adminform.form.title_text}}
         </div>
         <div class="child-section my-3 d-none">
            {{adminform.form.title_text_color}}
         </div>
         <div class="child-section my-3 d-none">
            {{adminform.form.sub_title_text}}
         </div>
         <div class="child-section my-3 d-none">
            {{adminform.form.sub_title_text_color}}
         </div>
         <div class="mt-40">
         
         </div>
         <div class="box-theme-sub-title">
            Message
         </div>
         <div class="child-section mt-3">
            {{adminform.form.message_text}}
         </div>
         <div class="child-section my-3 d-none">
            {{adminform.form.message_text_color}}
         </div>
      </div>

      <div class="row">
         <div class="clsbuttontype d-none">
            <input type="radio" value="True" id="layout_group1" name="{{adminform.form.isdescription.name}}" {% if adminform.form.isdescription.value == 'True' %} checked {% endif %}  onchange="onHandleButtonActionChange(event)">
            Show Description           
            <input type="radio" value="False" id="layout_group1" name="{{adminform.form.isdescription.name}}" {% if adminform.form.isdescription.value == 'False' %} checked {% endif %} onchange="onHandleButtonActionChange(event)">
            Hide Description 
         </div>
         
      
         <div class="box-theme-form-devider">
         </div>

      </div>
   </div>
   <div class="tab">
      <div class="banner-edit-section button-layout btnshow" id  = "button-section" style = "{% if adminform.form.layout.value == 'LAYOUT6' and adminform.form.media_type.value == "Image" %} display : none; {% else %} display: block; {% endif %}" >
         <div class="box-theme-title button-layout d-none">
            Button
        </div>
         <div id="btnaction" class = "">
        <div class="banner-edit-section button-layout" >
            <div id="main-section-btn" class = "d-flex flex-column flex-gap-30 inp-placehoder ">
                
            </div>
            <div class = "d-none">
                <div class="banner-layout-wrap no-hover">
                    <div class="banner-layout-wrap-inner">
                        <img src="{% static 'images/widget_image/bannerplugin/banner-view2.png' %}" alt="">
                    </div>
                </div>
            </div>
        </div>

        <div id = "id_add_btn" class = "box-theme-sub-title">
        <a  href="javascript:void(0);" onclick="AddButtons(mydata = false)" > + Add Button</a>
        </div>
      </div> 
      </div>
      <div id = "collection_form" style = "{% if adminform.form.layout.value == 'LAYOUT6' and adminform.form.media_type.value == "Image" %} display : block; {% else %} display: none;{% endif %}">
         <div class="box-theme-title button-layout">
            Collection Form
        </div>

        <div class = "box-theme-form-item">
         {{adminform.form.collection_form_title}}
        </div>

        <div class = 'box-theme-form-item' style = "display : none">
         {{adminform.form.collection_form_title_color}}
        </div>

        <div class = "box-theme-form-item">
         {{adminform.form.collection_form_subtitle}}
        </div>
        <div class = 'box-theme-form-item' style = "display : none">
         {{adminform.form.collection_form_subtitle_color}}
        </div>

         <div class="box-theme-sub-title">
           Button
         </div>
         
        <div class = "box-theme-form-item">
         <div class="sec-label">
               Style
         </div>
        </div>

        <div class="btn">
         <div class="box-theme-form-item theme-tab-content style-tab" id="btn_style_1">
            <ul class="theme-button-tab ">
               <input type="hidden" value="{{adminform.form.collection_form_btn.value}}" name="{{adminform.form.collection_form_btn.name}}" id="{{adminform.form.collection_form_btn.name}}">
               <li class="setFirstBtnStyle {% if adminform.form.collection_form_btn.value == 'fill' %}active{% endif %}" data-name = "fill" onchange = "setButtonStyle(this)">
                  <button class="F2 rectangle">Submit</button>
               </li>
               <li class="setFirstBtnStyle {% if adminform.form.collection_form_btn.value == 'outline' %}active{% endif %}" data-name = "outline" onchange = "setButtonStyle(this)">
                  <button class="O2 rectangle">Submit</button>
               </li>
            </ul>
         </div>
      </div>
      </div>
      <div class="box-theme-form-devider">
      </div>
   </div>
  

   <div class="box-theme-title ">
      Preview
   </div>
   <div>
      <div class = "d-flex" style = "justify-content : space-between;">

        <div class="col-6">
         <ul class = "theme-tab-layout">
            <li class="active btn_style_1_layout" data-target="btn_style_1_layout"><img src="{% static 'images/widget_image/bannerplugin/ph_monitor_enable.svg'%}" alt="">
               <li class="btn_color_1_layout" data-target="btn_color_1_layout"><img src="{% static 'images/widget_image/bannerplugin/icons8_iphone.svg'%}" alt=""></li>
         </ul>
        </div> 
        <div class="col-6 d-flex" style = "justify-content : end;gap: 12px;">
         <button class="submit_btn" type="button" id="prevBtn" onclick="nextPrev(-1)">Cancel</button>
         <button class="submit_btn" type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
         </div>
      </div>
   </div>
   <div class="info-preview-section infofirst-preview" id = "btn_style_1_layout">
      <div class="info-layout-wrap no-hover">
         <div class="info-layout-wrap-inner">
            <div class="info-layout-box">
               <div class="row" style =  "{% if adminform.form.background.value == 'yes' and adminform.form.bg_type.value == 'image' %} background-image : url('{{adminform.form.image.value}}'); background-position : center; {% elif adminform.form.background.value == 'yes' and adminform.form.bg_type.value == 'color'%} background-color : {{adminform.form.bg_color.value}}; {% endif %}">
                  <!-- Focus on order -->
                  <div class="col-12 col-sm-4 d-flex align-items-center {% if adminform.form.layout.value == 'LAYOUT1' or adminform.form.layout.value == 'LAYOUT3' or adminform.form.layout.value == 'LAYOUT7' %}order-1{%endif%} first-col">
                     <div class="info-layout-content-img">
                        {% comment %} {% if adminform.form.layout.value == 'LAYOUT1' or adminform.form.layout.value == 'LAYOUT2' or adminform.form.layout.value == 'LAYOUT3' or adminform.form.layout.value == 'LAYOUT4' or adminform.form.layout2.value == 'LAYOUT12' %} {% endcomment %}
                        
                        {% comment %} {% endif %} {% endcomment %}
                        <img src="{% if adminform.form.image.value %}{{adminform.form.instance.image.url}}{% endif %}" alt="info-img" class="info_placeholder img-fluid infofirst-img">
                     </div>
                     <div class="card formcard d-none" style="padding: 25px; border-radius : 40px">
                        <div class = "h3-info-title pb-2"> 
                           {{instance.glossary.collection_form_title|default:"Start Engaging with Us Today"|safe}}
                       </div>
                       <div class = "h3-info-subtitle py-1"> 
                           {{instance.glossary.collection_form_subtitle|safe}}
                       </div>
                           <div class="row my-2">
                              <div class="col-12 col-lg-6">
                                  <input type="text" name="first_name" placeholder="First Name" class="form-control" maxlength="55" id="id_first_name">
                                  
                              </div>
                              <div class="col-12 col-lg-6">
                                  <input type="text" name="last_name" placeholder="Last Name" class="form-control" maxlength="55" id="id_last_name">
                                  
                              </div>
                          </div>
                           <div class="row my-2">
                              <div class="col-12 col-lg-6">
                                 <input type="email" name="email" placeholder="Email" class="form-control" id="id_email">
                                 
                              </div>
                              <div class="col-12 col-lg-6">
                                 <input type="text" name="phone" placeholder="Phone number" class="form-control" maxlength="12"  id="id_phone">
                                 
                              </div>
                           </div>    

                           <div class="row my-2">
                              <div class="col-12 col-lg-6">
                                 <input type="text" name="zip" placeholder="Zip" class="form-control" maxlength="12" id="id_zip">
                                 
                              </div>
                           </div>
                           <div class="row my-2">
                              <div class="col-12">
                                  <textarea name="message" cols="40" rows="5" placeholder="Enter message here" class="form-control focus-color" id="id_message"></textarea>
                                  
                              </div>
                          </div>
                           <div class="row my-2">
                               <div class="col-12">
                                  
                                   <div class="form-check mt-3"style="display: flex; opacity : 0.4">
                                       <input class="form-check-input" type="checkbox" name="{{ form.sms_okay.name }}" disabled>
                                       &nbsp; <label class="pt-0">I acknowledge the initial investment terms.</label>
                                   </div>
                               </div>
                           </div>

                           <div class="row">
                               <div class="col-12">
                                 
                                   <button type="button"   
                                   id="submit-btn"
                                   class="mt-4" style="float:right">
                                       Submit
                                   </button>
                               </div>
                           </div>
                     </div>
                  </div>
                  <!-- Focus on order -->
                  <div class=" col-12 col-sm-8 d-flex align-items-center {% if adminform.form.layout.value == 'LAYOUT1' or adminform.form.layout.value == 'LAYOUT3' or adminform.form.layout.value == 'LAYOUT7' %}order-2{%endif%}  second-col">
                     <div class="info-layout-content">
                        <div class="info-layout-content-inner">
                           <div class="info-layout-title {{adminform.form.title_text.name}}">
                              {% if adminform.form.title_text.value %}{{adminform.form.title_text.value|safe}}{% else %}Header text{% endif %}
                           </div>
                           <div class="info-layout-sub-title {{adminform.form.message_text.name}}">
                              {% if adminform.form.message_text.value %}{{adminform.form.message_text.value|safe}}{% else %}Message text...{% endif %}
                           </div>
                           <div class="info-layout-action {% if adminform.form.isbutton.value == 'False' %} btnhide {% endif %}{% if adminform.form.isbutton.value == 'True' %} btnshow {% endif %} d-flex" id="btnpreviewdesk" style = "gap: 12px;flex-wrap : wrap;">
                              {% comment %} {% for index, value in adminform.form.button_data.value.items %}
                                 {% if value.button_text and value.id_button_internallink or value.button_link or value.button_phone_link %}
                                    <a style = "white-space:nowrap" class="mt-1 {% if  value.button_color_pattern == '' and button_style == 'fill' %} button_style_fill1 {% elif value.button_color_pattern == '' and value.button_style == 'outline' %} button_style_outline1 {% else %} {{ value.button_color_pattern }}  {% endif %} sw-100" >
                                       {{value.button_text}}
                                    </a>
                                 {% endif %}
                              {% endfor %} {% endcomment %}
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <div class = "mobile-view d-none" id = "btn_color_1_layout">
      <div class = "devidor d-flex">
         <div class = "text-title mx-3 my-1">
            <div class="info-layout-title {{adminform.form.title_text.name}}">
               {% if adminform.form.title_text.value %}{{adminform.form.title_text.value|safe}}{% else %}Header text{% endif %}
            </div>
         </div>
         <div class = "img-row">
            <img src="{% if adminform.form.image.value %}{{adminform.form.instance.image.url}}{% endif %}" alt="info-img" class="mobile-img-prev">
         </div>
         <div class = "form-row1 m-3 d-none">
            <div class="card formcard" style="padding: 20px; border-radius : 40px;">
            
               <div id="general_collection_form_outer">
                   
                   <div class="h3-info-title pb-2"> 
                       this is my title
                   </div>
                   <div class="h3-info-subtitle py-1"> 
                       this is my subheading......
                   </div>


                       <div class="row">
                           <div class="col-12 my-2">
                               <input type="text" name="first_name" placeholder="First Name" class="form-control" maxlength="55" id="id_first_name">
                               
                           </div>
                           <div class="col-12 my-2">
                               <input type="text" name="last_name" placeholder="Last Name" class="form-control" maxlength="55" id="id_last_name">
                               
                           </div>
                       </div>
                       <div class="row">
                           <div class="col-12 my-2">
                               <input type="email" name="email" placeholder="Email" class="form-control" id="id_email">
                               
                           </div>
                           <div class="col-12 my-2">
                               <input type="text" name="phone" placeholder="Phone number" class="form-control" maxlength="12" id="id_phone">
                               
                           </div>
                           <div class="col-12 my-2">
                               <input type="text" name="zip" placeholder="Zip" class="form-control" maxlength="12" id="id_zip">
                               
                           </div>
                       </div>
                       <div class="row my-2">
                           <div class="col-12">
                               <textarea name="message" cols="40" rows="5" placeholder="Enter message here" class="form-control focus-color" id="id_message"></textarea>
                               
                           </div>
                       </div>
               
               
                       <div class="row">
                           <div class="col-12">
                              
                               <div class="form-check mt-3" style="display: flex; opacity : 0.4">
                                   <input class="form-check-input" type="checkbox" name="sms_okay" checked="">
                                   &nbsp; <label class="pt-0">I acknowledge the initial investment terms.</label>
                               </div>
                           </div>
                       </div>
               
                       <div class="row d-none">
                           <div class="col-12">
                               <p class="label mt-3 mb-0">
                                   I agree to receive pet &amp; promotional information via the options selected below.
                               </p>
                               <div class="form-check mt-3">
                                   <input class="form-check-input" type="checkbox" name="sms_okay" checked="">
                                   <label class="pt-0">
                                       It's okay to text me.
                                   </label>
                                   
                               </div>
                               <div class="form-check mt-3">
                                   <input class="form-check-input" type="checkbox" name="email_me_more" checked="">
                                   <label class="pt-0">
                                       It's okay to email me.
                                   </label>
                                   
                               </div>
                           </div>
                       </div>
                       
                       <div class="row">
                           <div class="col-12">
                             
                               <button type="button" id="submit" class=" theme-secondary-btn   mt-4" style="float:right">
                                   Submit
                               </button>
                           </div>
                       </div>
               </div>          
            </div>
         </div>
         <div class = "second-row">
            <div class = "msg-btn-cont mx-3 my-3">
               <div class="info-layout-sub-title {{adminform.form.message_text.name}}">
                  {% if adminform.form.message_text.value %}{{adminform.form.message_text.value|safe}}{% else %}Message text...{% endif %}
               </div>
               <div class="info-layout-action {% if adminform.form.isbutton.value == 'False' %} btnhide {% endif %}{% if adminform.form.isbutton.value == 'True' %} btnshow {% endif %} d-flex py-3" id="btnpreview" style = "gap: 12px; flex-direction : column;">
                  {% for index, value in adminform.form.button_data.value.items %}
                     {% if value.button_text and value.id_button_internallink or value.button_link or value.button_phone_link %}
                        <a style = "white-space:nowrap" class="mt-1 {% if  value.button_color_pattern == '' and button_style == 'fill' %} button_style_fill1 {% elif value.button_color_pattern == '' and value.button_style == 'outline' %} button_style_outline1 {% else %} {{ value.button_color_pattern }}  {% endif %} sw-100" >
                           {{value.button_text}}
                        </a>
                     {% endif %}
                  {% endfor %}
               </div>
            </div>
         </div>
      </div>
   </div>
</div>


{% comment %} add three checkbox for media text and button {% endcomment %}


{% block submit_buttons_bottom %} {% submit_row %} {% endblock %}
</form>
{% addtoblock 'js' %}
<script type="text/javascript">
   // function to set perticular button color and pattern
   function selectBtnColorPreview(id){
       let child = document.getElementById(id).firstChild;
       let css_obj = getComputedStyle(child);
   
       let btn_outline_color  = css_obj.borderColor;
       let btn_bg_color = css_obj.backgroundColor;
       let btn_font_color = css_obj.color;
   
       $("#button_outline_color").val(btn_outline_color)
       $("#button_fill_color").val(btn_bg_color)
       $("#button_font_color").val(btn_font_color)        
       setInfoBlockFirstPreview()
   }
   
   function setTitleColor(color){
       $('.title-color-display').css({"background":color});
       $("#{{adminform.form.title_text_color.name}}").val(color);
       setInfoBlockFirstPreview()
   }
   function setMsgFontColor(color){
       $('.subtitle-color-display').css({"background":color});
       $("#{{adminform.form.message_text_color.name}}").val(color);
       setInfoBlockFirstPreview()
   }
   function setFirstBtnStyle(style){
       $("#{{adminform.form.button_style.name}}").val(style);
       setInfoBlockFirstPreview()
   }
   function btnColorPreview(color,preview){
       $('.'+preview).css({"background":color});
       setInfoBlockFirstPreview()
   }
   
   // ==========================================================================
   {% comment %} Coloris({
       el: '.coloris'
   });
   Coloris.setInstance('.instance1', {
       theme: '',
       format: '',
       forceAlpha: true,
       clearButton: true,
   }) {% endcomment %}
   
   // ==========================================================================
   
   $(document).ready(function () {
      
       $(".theme-tab li").on("click", function () {
           var target_box = $(this).data("target");
           $(this).siblings().removeClass("active");
           $(this).addClass("active");
           $(this).parents(".box-theme-tab-wrap").find(".box-theme-form-item").hide();
           $("#" + target_box).show();
       })
       $(".theme-button-tab li").on("click", function () {
           $(this).siblings().removeClass("active");
           $(this).addClass("active");
         
           let change_style = $(this).data('name')
            if(change_style == "fill"){
               $('#submit-btn').removeClass('O2').addClass("F2")
               $('#submit').removeClass('O2').addClass("F2")
            }
            else{
               $('#submit-btn').removeClass('F2').addClass("O2")
               $('#submit').removeClass('F2').addClass("O2")
            }
       })
       $(".theme-color-tab li").on("click", function () {
           $(this).siblings().removeClass("active");
           $(this).addClass("active");
       })
   })
   
   // ==========================================================================
   
   var image = document.getElementById('{{adminform.form.image.name}}');
   
   if (image) {
       image.addEventListener('dragenter', function (e) {
           image.parentNode.className = 'area dragging';
       }, false);
   
       image.addEventListener('dragleave', function (e) {
           image.parentNode.className = 'area';
       }, false);
   
       image.addEventListener('dragdrop', function (e) {
           imageFileUpload(image);
       }, false);
   
       image.addEventListener('change', function (e) {
           imageFileUpload(image);
       }, false);
   }
   
   //background image 
   var bg_image = document.getElementById('{{adminform.form.bg_image.name}}');
   
   if (bg_image) {
       bg_image.addEventListener('dragenter', function (e) {
           bg_image.parentNode.className = 'area dragging';
       }, false);
   
       bg_image.addEventListener('dragleave', function (e) {
           bg_image.parentNode.className = 'area';
       }, false);
   
       bg_image.addEventListener('dragdrop', function (e) {
         imageFileUpload(bg_image);
       }, false);
   
       bg_image.addEventListener('change', function (e) {
         imageFileUpload(bg_image);
       }, false);
   }
   
   //background mobile image 
   var bg_mobile_image = document.getElementById('{{adminform.form.mobimage.name}}');
   
   if (bg_mobile_image) {
       bg_mobile_image.addEventListener('dragenter', function (e) {
           bg_mobile_image.parentNode.className = 'area dragging';
       }, false);
   
       bg_mobile_image.addEventListener('dragleave', function (e) {
           bg_mobile_image.parentNode.className = 'area';
       }, false);
   
       bg_mobile_image.addEventListener('dragdrop', function (e) {
         imageFileUpload(bg_mobile_image);
       }, false);
   
       bg_mobile_image.addEventListener('change', function (e) {
         imageFileUpload(bg_mobile_image);
       }, false);
   }
   //Image left
   var image_left = document.getElementById('{{adminform.form.image_left.name}}');
   
   if (image_left) {
      image_left.addEventListener('dragenter', function (e) {
           image_left.parentNode.className = 'area dragging';
       }, false);
   
       image_left.addEventListener('dragleave', function (e) {
           image_left.parentNode.className = 'area';
       }, false);
   
       image_left.addEventListener('dragdrop', function (e) {
         imageFileUpload(image_left);
       }, false);
   
       image_left.addEventListener('change', function (e) {
         imageFileUpload(image_left);
       }, false);
   }
   //Image right
   var image_right = document.getElementById('{{adminform.form.image_right.name}}');
   
   if (image_right) {
      image_right.addEventListener('dragenter', function (e) {
           image_right.parentNode.className = 'area dragging';
       }, false);
   
       image_right.addEventListener('dragleave', function (e) {
           image_left.parentNode.className = 'area';
       }, false);
   
       image_right.addEventListener('dragdrop', function (e) {
         imageFileUpload(image_right);
       }, false);
   
       image_right.addEventListener('change', function (e) {
         imageFileUpload(image_right);
       }, false);
   }
   //Image right
   var video_src = document.getElementById('{{adminform.form.video.name}}');
   
   if (video_src) {
      video_src.addEventListener('dragenter', function (e) {
         video_src.parentNode.className = 'area dragging';
       }, false);
   
       video_src.addEventListener('dragleave', function (e) {
         video_src.parentNode.className = 'area';
       }, false);
   
       video_src.addEventListener('dragdrop', function (e) {
         imageVideoUpload(video_src);
       }, false);
   
       video_src.addEventListener('change', function (e) {
         e.preventDefault()
         imageVideoUpload(video_src);
       }, false);
   }

   function imageVideoUpload(uploadFile) {
      // check the type of video (upload/video) then attach the iframe for upload and video source for video

      const MAX_FILE_SIZE = 30 * 1024 * 1024; // max file size 

      let video_type = $("input[name = 'video_type']:checked").val()
      let video_path_type = '' 
      var me = this,
          files = uploadFile.files;
          let names = uploadFile.name
          var preview = $('.'+uploadFile.getAttribute('id'))
          preview.empty()
          $.each(files, function (i, file) {

            // check the file size of the video 
            if(file.size > MAX_FILE_SIZE){
               
               // Hide the div after 3 seconds
               $("#video_size_error").removeClass("d-none");
               setTimeout(function () {
                  $("#video_size_error").addClass("d-none");
               }, 5000);
               
               return false
            }
            var img_src = URL.createObjectURL(file);

            if(video_type == 'link'){
               video_path_type = `
                        <li class="banner-image-preview-list"><iframe src="${img_src}" ></iframe>
                          
                          </li>`
            }
            else{
               let file_type = file.type 
               if(file.type == 'video/quicktime'){
                  file_type = 'video/mp4'
               }
                video_path_type = `<li class="banner-image-preview-list"><video id="preview_video" controls="" autoplay="" muted="" style="width:100%;" preload="metadata" class="prev_video50">
                        <source src="${img_src}" type="${file_type}">
                        Your browser does not support the video tag.
                        </video></li>`
            }
              preview.parents(".d-none").addClass("d-none-display").removeClass("d-none");
              preview.append(video_path_type)
              setInfoBlockFirstPreview();
          });
  }
   function imageFileUpload(uploadFile) {
       var me = this,
           files = uploadFile.files;
           let names = uploadFile.name
           var preview = $('.'+uploadFile.getAttribute('id'))
           preview.empty()
           $.each(files, function (i, file) {
            
               var img_src = URL.createObjectURL(file);
               preview.parents(".d-none").addClass("d-none-display").removeClass("d-none");
               preview.append(`
                   <li class="banner-image-preview-list"><img src="${img_src}" alt="">
                     <button onClick="deleteImage('${names}','{{adminform.form.instance.id}}', this)" type="button">
                        <img src="{% static 'images/ic-delete.svg' %}" alt="">
                    </button>
                     </li>
               `)
               setInfoBlockFirstPreview();
           });
   }
   setInfoBlockFirstPreview()
   
   $(document).ready(function() {
       // Initial state
       if ($('#id_bg_type_0').is(':checked')) {
           $('.colordiv').show();
           $('.imagediv').hide();
       } else if ($('#id_bg_type_1').is(':checked')) {
           $('.colordiv').hide();
           $('.imagediv').show();
       }
   
       // Click events
       $('#id_bg_type_0').on('click', function() {
           $('.colordiv').show();
           $('.imagediv').hide();
       });
   
       $('#id_bg_type_1').on('click', function() {
           $('.colordiv').hide();
           $('.imagediv').show();
       });
   });
   
   
   //==========================================================================
   function setInfoBlockFirstPreview(){

      // FOR MOBILE VIEW CHANGES
      $('.text-title').removeClass('order-2').addClass('order-1')
      $('.img-row').removeClass('order-1').addClass('order-2')
      $('.second-row').addClass('order-3')

      $('.form-row1').addClass('d-none')
      $('.img-row').removeClass('d-none')
      $('.second-row').removeClass('d-none')
      $('.devidor').find('.img-row2').remove();
      $('.img-row img').removeClass('d-none')
      $('.img-row iframe').remove() 
      $('.info-layout-action a').css('z-index' , '0')

      // REMOVE THE THIRD COLUMN FOR TWO IMAGES
      $('.infofirst-preview .third-col').remove()
      // REMOVE D-NONE FOR HALF VIDEO
      $('info-layout-content-vid').removeClass('d-none')
      // MAKE THE COLLECETION FORM HIDDEN 
      $('.infofirst-preview .first-col .card.formcard').addClass('d-none')
      // REMOVE THE VIDEO FROM THE PREVIEW
      $('.infofirst-preview .first-col .info-layout-content-img video').remove()
      
      $('.infofirst-preview .first-col .info-layout-content-img iframe').remove()
      $('.infofirst-preview .row iframe').remove()
      // CHANGE THE CLASS FOR THE HALF VIDEO AND TEXT
      $('.infofirst-preview .first-col .info-layout-content-vid').addClass('info-layout-content-img').removeClass('info-layout-content-vid');

      // FULL WITH VIDEO INITIALIZED WITH CSS 
      $('.infofirst-preview .row video').remove()
      // GET THE MEDIA TYPE SELECTED
      let m_type = $('input[name = "media_type"]:checked').val();
      $('.infofirst-preview .first-col').removeClass('col-md-6 my-3')
      // enable the second half div to show the rest 
      $('.infofirst-preview .first-col').removeClass('d-none')
      $('.infofirst-preview .second-col').removeClass('d-none')
      // THIS BLOCK OF CODE IF MEDIA TYPE IS IMAGE

      // IMAGE FILE 
      let prev_img = $(".banner-image-preview-list img").attr('src')
      // PREVIEW OF BACKGROUND IMAGE OR COLOR ACCORDING TO THE SELECTON 
      
      // hide the buttons when the it is a collection form
      $('.btnshow a').show()

      if ($('input[name="background"]:checked').val() == "yes" && $('input[name="bg_type"]:checked').val() == "image" && $('.bg_image img').attr('src')){
         let bg_image_src = $('.bg_image img').attr('src')
         //$('.infofirst-preview .row:first').removeClass('prev_bg_color').addClass('prev_bg_image')
         $('.infofirst-preview .row:first').css({'background-image' : `url(${bg_image_src})`, 'background-color' : 'none'})
         $('.mobile-view').css({'background-image' : `url(${bg_image_src})`, 'background-color' : 'none'})
      }
      else if ($('input[name="background"]:checked').val() == "yes" && $('input[name="bg_type"]:checked').val() == "color"){
         //$('.infofirst-preview .row:first').removeClass('prev_bg_image').addClass('prev_bg_color')
         $('.infofirst-preview .row:first').css({'background-color': $('#id_bg_color').val(), 'background-image' : 'none'})
         $('.mobile-view').css({'background-color': $('#id_bg_color').val(), 'background-image' : 'none'})
      }
      else{
         //$('.infofirst-preview .row:first').removeClass('prev_bg_image prev_bg_color')
         $('.infofirst-preview .row:first').attr('style','')
         $('.mobile-view').attr('style','')
         
      }


      if (m_type == 'Image'){

         // get the layout for the 2 image and text 
         let layout_group2 = document.querySelector('input[id="layout_group2"]:checked').value

         $('.infofirst-preview .first-col .info-layout-content-img iframe').remove()

         layout = document.querySelector('input[id="layout_group"]:checked').value
       // Set Layout
       if(layout == 'LAYOUT1' || layout == 'LAYOUT3' || layout == 'LAYOUT7'){
           $('.infofirst-preview .first-col').removeClass('order-2').addClass('order-1')
           $('.infofirst-preview .second-col').removeClass('order-1').addClass('order-2')
           $('.img-row').addClass('mx-3 mt-3')
       }
       else{
           $('.infofirst-preview .second-col').removeClass('order-2').addClass('order-1')
           $('.infofirst-preview .first-col').removeClass('order-1').addClass('order-2')
           $('.img-row').addClass('mx-3 mt-3')
       }
   

       if(layout == 'LAYOUT5' || layout == 'LAYOUT7'){
         $('.infofirst-preview .first-col').addClass('col-md-6 my50img')
         $('.infofirst-preview .second-col').addClass('col-md-6')
         $('.img-row').removeClass('mx-3 mt-3')
         $('.img-row').removeClass('order-2').addClass('order-1')
         $('.text-title').removeClass('order-1').addClass('order-2')
         $('.infofirst-preview .first-col .info-layout-content-img img').addClass('d-none')
       }
       else{
         //$('.infofirst-preview .first-col').removeClass('col-md-6 my50img')
         $('.infofirst-preview .second-col').removeClass('col-md-6')
         $('.infofirst-preview .first-col .info-layout-content-img img').removeClass('d-none')
         //$('.infofirst-preview .first-col .info-layout-content-img').append(``)
       }

       if (layout == "LAYOUT6"){
         $('.infofirst-preview .first-col').removeClass('order-1').addClass('order-2')
         $('.infofirst-preview .first-col').removeClass('col-sm-4').addClass('col-md-6 my-3')
         $('.infofirst-preview .first-col .info-layout-content-img').addClass('d-none')
         $('.infofirst-preview .first-col .card.formcard').removeClass('d-none')
         $('.infofirst-preview .second-col').removeClass('col-sm-8').addClass('col-md-6')
         // FOR MOBILE VIEW
         $('.img-row').addClass('d-none')
         $('.second-row').addClass('d-none')
         $('.form-row1').removeClass('d-none').addClass('order-2')
         // hide the buttons when the it is a collection form
         $('.btnshow a').hide()
       }
       else{
         $('.infofirst-preview .first-col .info-layout-content-img').removeClass('d-none')
         $('.infofirst-preview .first-col .card.formcard').addClass('d-none')
         if (layout == "LAYOUT5" || layout == "LAYOUT7"){
            console.log('')
         }
         else{
            $('.infofirst-preview .second-col').removeClass('col-md-6').addClass('col-sm-8')
            $('.infofirst-preview .first-col').removeClass('col-md-6 my-3').addClass('col-sm-4')
         }
        
       }
       if(layout == 'LAYOUT3' || layout == 'LAYOUT4'){
         $('.infofirst-preview .infofirst-img,.img-row img').css({"border-radius":"50%"});
         }else{
               $('.infofirst-preview .infofirst-img,.img-row img').css({"border-radius":"0"});
         }
      if (layout_group2 == 'LAYOUT12' && $('input[name  = "quantity_of_image"]:checked').val() == 'QTY2'){
         // CHANGE THE ORDER OF THE IMAGE AND TEXT 
         $('.infofirst-preview .first-col').removeClass('order-2').addClass('order-1 col-sm-4')
         $('.infofirst-preview .second-col').removeClass('order-1').addClass('order-2 col-sm-4')

         // remove the col-md-6 col-sm-8
         $('.infofirst-preview .first-col').removeClass('col-md-6')
         $('.infofirst-preview .first-col').removeClass('col-sm-8')
         $('.infofirst-preview .second-col').removeClass('col-md-6')
         $('.infofirst-preview .second-col').removeClass('col-sm-8')
         // ADD THE THIRD IMAGE 
         $('.infofirst-preview .row').first().append(`<div class="col-12 col-sm-4 d-flex align-items-center third-col order-3">
            <div class="info-layout-content-img">
             <img src="" alt="info-img" class="info_placeholder img-fluid"> 
            </div>
         </div>`)
         // add the first and second image
         $('.infofirst-preview .first-col .info-layout-content-img img').attr('src',$('.image_left img').attr('src'))
         $('.infofirst-preview .third-col .info-layout-content-img img').attr('src',$('.image_right img').attr('src'))

         // FOR MOBILE PREVIEW
         $('.form-row1').addClass('d-none')
         $('.img-row').removeClass('d-none').addClass('order-1')
         $('.second-row').removeClass('d-none').addClass('order-3')

         $('.img-row').removeClass('order-2').addClass('order-1')
         $('.img-row img').removeAttr('style')
         $('.second-row').addClass('order-3')
         $('.text-title').removeClass('order-1').addClass('order-2')
         
         let first_img = $('.image_left img').attr('src')
         $('.img-row img').attr('src',first_img)
         let second_img = $('.image_right img').attr('src')
         $('.devidor').append(`<div class="img-row2 mx-3 mb-3 order-4">
         <img src="${second_img}" alt="info-img" class="mobile-img-prev" style="border-radius: 0px;">
         </div>`)

         $('.infofirst-preview .card.formcard').addClass('d-none')
         $('.infofirst-preview .first-col .info-layout-content-img').removeClass('d-none')
         }
      }
      else if (m_type == 'Video'){

         // CLEAN UP THE IMAGES THAT IS FIRST HALF DIV
         $('.infofirst-preview .first-col .info-layout-content-img img').addClass('d-none')
         $('.infofirst-preview .first-col .info-layout-content-img').removeClass('d-none')
         // GET THE VIDEO LAYOUT 
         layout = document.querySelector('input[name="layout_video"]:checked').value
         //SET VIDEO
         let prev_video = $('#preview_video source').attr('src')
         let prev_link = $('#id_video_link').val()
         $('.my50img').css('background-image','');
         
         if (layout == "LAYOUT13"){
            $('.infofirst-preview .first-col').removeClass('order-2').addClass('order-1')
            $('.infofirst-preview .second-col').removeClass('order-1').addClass('order-2')

            $('.infofirst-preview .first-col').removeClass('col-sm-4').addClass('col-md-6 my-3')
            $('.infofirst-preview .first-col .info-layout-content-img iframe').remove()
            if ($('input[name = "video_type"]:checked').val() == 'upload'){
               $('.infofirst-preview .first-col .info-layout-content-img').append( `<video controls="" autoplay="" muted="" style="width:100%;" preload="metadata" class="prev_video50">
                  <source src="" type="video/mp4">
                  </video>`)
               $('.prev_video50 source').attr('src', prev_video)

               // MOBILE PREVIEW
              
               $('.img-row').removeClass('order-2').addClass('order-1')
               $('.text-title').removeClass('order-1').addClass('order-2')
               $('.img-row').addClass('mx-3 mt-3')
               $('.img-row img').addClass('d-none')
               $('.img-row').append(`
               <iframe
               src="${prev_video}" style = "width:100%">
               </iframe>
               `) 

            }
            else{
               $('.infofirst-preview .first-col .info-layout-content-img').addClass('info-layout-content-vid').removeClass('info-layout-content-img');
               $('.infofirst-preview .first-col .info-layout-content-vid').append( `<iframe src="" class="iframecss50">
               </iframe>`)
               $('.iframecss50').attr('src', prev_link)

               // MOBILE PREVIEW
               $('.img-row').removeClass('order-2').addClass('order-1')
               $('.text-title').removeClass('order-1').addClass('order-2')
               $('.img-row').addClass('mx-3 mt-3')
               $('.img-row img').addClass('d-none')
               $('.img-row').append(`
               <iframe
               src="${prev_link}" style = "width : 100%">
               </iframe>
               `)
            }
            
            $('.infofirst-preview .second-col').removeClass('col-sm-8').addClass('col-md-6')
         }
         else if (layout == "LAYOUT14"){
            $('.infofirst-preview .second-col').removeClass('order-2').addClass('order-1')
            $('.infofirst-preview .first-col').removeClass('order-1').addClass('order-2')
            $('.infofirst-preview .first-col').removeClass('col-sm-4').addClass('col-md-6 my-3')
            if ($('input[name = "video_type"]:checked').val() == 'upload'){
               $('.infofirst-preview .first-col .info-layout-content-img').append( `<video controls="" autoplay="" muted="" style="width:100%;" preload="metadata" class="prev_video50">
                  <source src="" type="video/mp4">
                  </video>`)
               $('.prev_video50 source').attr('src', prev_video)

               // MOBILE PREVIEW

               $('.img-row').removeClass('order-2').addClass('order-1')
               $('.text-title').removeClass('order-1').addClass('order-2')
               $('.img-row').addClass('mx-3 mt-3')
               $('.img-row img').addClass('d-none')
               $('.img-row').append(`
               <iframe style = "width : 100%"
               src="${prev_video}">
               </iframe>
               `) 
               
            }
            else{
               $('.infofirst-preview .first-col .info-layout-content-img').addClass('info-layout-content-vid').removeClass('info-layout-content-img');
               $('.infofirst-preview .first-col .info-layout-content-vid').append( `<iframe src="" class="iframecss50">
               </iframe>`)
               $('.iframecss50').attr('src', prev_link)

               // MOBILE PREVIEW
               $('.img-row').removeClass('order-2').addClass('order-1')
               $('.text-title').removeClass('order-1').addClass('order-2')
               $('.img-row').addClass('mx-3 mt-3')
               $('.img-row img').addClass('d-none')
               $('.img-row').append(`
               <iframe
               src="${prev_link}" style = "width:100%">
               </iframe>
               `) 
            }
            $('.infofirst-preview .second-col').removeClass('col-sm-8').addClass('col-md-6')
         }
         else if (layout == "LAYOUT15"){
            $('.infofirst-preview .second-col').removeClass('col-sm-8 col-md-6')
            $('.infofirst-preview .first-col').addClass('d-none')
            $('.infofirst-preview .row').css('background-image','')
            $('.infofirst-preview .row').css('background-color','')
            if ($('input[name = "video_type"]:checked').val() == 'upload'){
               $('.infofirst-preview .row').append( `<video src="" class="prev_video">
               </video>`)
               $('.prev_video').attr('src', prev_video)
               $('.infofirst-preview .second-col').css({'justify-content':'center', 'z-index' : '1'})

                // for mobile view
               $('.img-row').removeClass('order-2').addClass('order-1')
               $('.text-title').removeClass('order-1').addClass('order-2')

               $('.img-row').removeClass('mx-3 mt-3')
               $('.mobile-view').removeAttr('style')
               $('.img-row img').addClass('d-none')
               $('.img-row').append(`
               <iframe
               src="${prev_video}" style = "width:100%; position: absolute;
               height: 100%;
               z-index: -1;">
               </iframe>
               `) 
            }
            else{

               $('.infofirst-preview .row').append( `<iframe src="" class="iframecss">
               </iframe>`)
               $('.iframecss').attr('src', prev_link)
               $('.infofirst-preview .second-col').css({'justify-content':'center', 'z-index' : '1'})

               // for mobile view
               $('.img-row').removeClass('order-2').addClass('order-1')
               $('.text-title').removeClass('order-1').addClass('order-2')

               $('.img-row').removeClass('mx-3 mt-3')
               $('.mobile-view').removeAttr('style')
               $('.img-row img').addClass('d-none')
               $('.img-row').append(`
               <iframe
               src="${prev_link}" style = "width:100%; position: absolute;
               height: 100%;
               z-index: -1;">
               </iframe>
               `) 

            }
         }
         else if (layout == "LAYOUT16"){
            //$('.infofirst-preview .second-col').removeClass('col-sm-8 col-md-6')
            //$('.infofirst-preview .second-col').css({'justify-content':'center', 'z-index' : '1'})
            $('.infofirst-preview .second-col').addClass('d-none')
            $('.infofirst-preview .first-col').addClass('d-none')
            
            if ($('input[name = "video_type"]:checked').val() == 'upload'){
               $('.infofirst-preview .row').append( `<video src="" class="prev_video">
               </video>`)
               $('.prev_video').attr('src', prev_video)

               // for mobile view
               $('.img-row').removeClass('order-2').addClass('order-1')
               $('.text-title').removeClass('order-1').addClass('order-2')

               $('.img-row').removeClass('mx-3 mt-3')
               $('.mobile-view').removeAttr('style')
               $('.img-row img').addClass('d-none')
               $('.info-layout-action a').css('z-index' , '-1')

               $('.img-row').append(`
               <iframe
               src="${prev_video}" style = "width:100%; position: absolute;
               height: 100%;">
               </iframe>
               `) 

            }
            else{
               $('.infofirst-preview .row').append( `<iframe src="" class="iframecss">
               </iframe>`)
               $('.iframecss').attr('src', prev_link)
               
               // for mobile view
               $('.img-row').removeClass('order-2').addClass('order-1')
               $('.text-title').removeClass('order-1').addClass('order-2')

               $('.img-row').removeClass('mx-3 mt-3')
               $('.mobile-view').removeAttr('style')
               $('.img-row img').addClass('d-none')
               $('.info-layout-action a').css('z-index' , '-1')

               $('.img-row').append(`
               <iframe
               src="${prev_link}" style = "width:100%; position: absolute;
               height: 100%;">
               </iframe>
               `) 

            }
            $('.infofirst-preview .second-col').removeAttr('style')
          }
      }


      else if (m_type == 'None'){
         $('.infofirst-preview .second-col').removeClass('col-sm-8 col-md-6')
         $('.infofirst-preview .second-col').css('justify-content','center')
            $('.infofirst-preview .first-col').addClass('d-none')

         // for mobile view
         $('.img-row').addClass('d-none')
      }


       // GET THE COLLECTION FORM DATA
       //-PREVIEW FOR TITLE AND SUBTITLE
         let title_data = $('#id_collection_form_title').val()
         $('.h3-info-title.pb-2').text(title_data)

         let sub_title_data = $('#id_collection_form_subtitle').val()
         $('.h3-info-subtitle').text(sub_title_data)

       //- button style and color
         let btn_class = $('#collection_form_btn').siblings('.setFirstBtnStyle.active').children().attr('class')
         $('#submit-btn').addClass(btn_class)
         $('#submit').addClass(btn_class)

       //- CHANGE THE TITLE AND SUBTITLE COLOR OF COLLECETION FORM
       $('.card.formcard .h3-info-title').css('color',$('#id_collection_form_title_color').val())
       $('.card.formcard .h3-info-subtitle').css('color',$('#id_collection_form_subtitle_color').val())

       if ($('input[name  = "quantity_of_image"]:checked').val() != 'QTY2' && layout != "LAYOUT7" && layout != "LAYOUT5" && m_type == 'Image'){
         // Set image
         $('.my50img').css('background-image','');
        $(".infofirst-img").attr("src",prev_img);
       }
       else if ($('input[name  = "quantity_of_image"]:checked').val() == 'QTY2' && m_type == 'Image' ){
         //$(".infofirst-img").attr("src",prev_img);
         $(".infofirst-img").removeClass('d-none');
         $('.my50img').css('background-image','');
         $('.img-row').addClass('mx-3 mt-3')
       }
       else if (m_type == 'Image'){
         $(".infofirst-img").attr("src",'');
         $('.img-row').removeClass('mx-3 mt-3')
         $('.my50img').css('background-image','url('+prev_img+')');
       }
        
       
        
        
       // Text preview
       var title_text = $("#{{adminform.form.title_text.name}}").val()
       var title_color = $("#{{adminform.form.title_text_color.name}}").val()
       var message_text = $("#{{adminform.form.message_text.name}}").val()
       var message_color = $("#{{adminform.form.message_text_color.name}}").val()
   
       if(title_text != ''){
           $('.{{adminform.form.title_text.name}}').text(title_text);
           $('.{{adminform.form.title_text.name}}').css('color', title_color);
       }
       if(message_text != ''){
           $('.infofirst-sub-title').text(message_text);
           $('.infofirst-sub-title').css('color', message_color);
       }

       // Button preview
       // FIND THE BUTTON 
       let no_of_btn = $('#main-section-btn').children()
       var btn_text = $("#{{adminform.form.button_text.name}}").val();
       if(btn_text != ''){
           $('.infofirst-preview .infofirst-btn').text(btn_text)
   
           var btn_border_color = $("#{{adminform.form.button_outline_color.name}}").val()
           var btn_bg_color = $("#{{adminform.form.button_fill_color.name}}").val()
           var btn_text_color = $("#{{adminform.form.button_font_color.name}}").val()
   
           var btn_style = $("#{{adminform.form.button_style.name}}").val();
           if(btn_style == 'fill'){
               $('.infofirst-preview .infofirst-btn').css({'color':btn_text_color,'border-color':btn_border_color,'background':btn_bg_color,});
           }else{
               $('.infofirst-preview .infofirst-btn').css({'color':btn_text_color,'border-color':btn_border_color,'background':'#fff',});
           }
       }
       if (layout == 'LAYOUT6' && $('input[name = "media_type"]:checked').val() == 'Image'){
         // THIS WILL CHANGE THE TITLE OF THE BUTTON TO COLLECETION FORM 
         $('#button_id').find('span').text('Collection Form')

         // THIS WILL HIDE THE CONTENT OF BUTTON TAB
         $('.tab').eq(2).children().eq(1).show()
         $('.tab').eq(2).children().eq(0).hide()

      }
      else{
         // THIS WILL SHOW THE CONTENT OF BUTTON TAB
         $('.tab').eq(2).children().eq(1).hide()
         $('.tab').eq(2).children().eq(0).show()
         $('#button_id').find('span').text('Button')
      }
   
   }
   
   // ============================ title - message - button =================================
   $("#id_collection_form_title, #id_collection_form_subtitle, #id_video_link").on('keyup',function(){
      setInfoBlockFirstPreview()
   });
   
   
   // ========================= Buttons =======================================
   var style1ButtonColors = {
       "F1" : ["btn-color-1"],
       "F2" : ["btn-color-2"],
       "F3" : ["btn-color-3"],
       "F4" : ["btn-color-4"],
   }
   
   var style2ButtonColors = {
       "O1" : ["btn-style-2", "btn-color-1"],
       "O2" : ["btn-style-2", "btn-color-2"],
       "O3" : ["btn-style-2", "btn-color-3"],
       "O4" : ["btn-style-2", "btn-color-4"],
   }
   
   // select the layout when click on layout image
   function SelectInfoBlockFirstLayout(layoutId,data){
       $("#"+layoutId).click()
       let me = data
       $(me).parents(".media_type").find(".activelayout").removeClass('activelayout')
       $(me).addClass('activelayout')

   }
   
   $("input[id='layout_group']").change(function() {
       setInfoBlockFirstPreview()
   });
   
   function InitView(){
       var primary_button_color_pattern = "{{global_theme_config.primary_button_color_pattern}}";
       var secondary_button_color_pattern = "{{global_theme_config.secondary_button_color_pattern}}";
   
       if(jQuery.inArray(primary_button_color_pattern, ['F1', 'F2', 'F3', 'F4']) > -1){
           var arrayLength = style1ButtonColors[primary_button_color_pattern].length;
           for (var i = 0; i < arrayLength; i++) {
               $("#first-btn-section .style-tab .btn-style-1").addClass(style1ButtonColors[primary_button_color_pattern][i]);
           }
       } else if (jQuery.inArray(primary_button_color_pattern, ['O1', 'O2', 'O3', 'O4']) > -1){
           var arrayLength = style2ButtonColors[primary_button_color_pattern].length;
           for (var i = 0; i < arrayLength; i++) {
               $("#first-btn-section .style-tab .btn-style-2").addClass(style2ButtonColors[primary_button_color_pattern][i]);
           }
       }
   
       $("#first-btn-section button").addClass('{{global_theme_config.primary_button_shape}}');
   
       var selectedLayout = '{{adminform.form.layout.value}}';
       $("input[name='layout'][value='" + selectedLayout + "']").prop('checked', true);
       // check media type
       let checked_layout = $('input[name = "media_type"]:checked').val()
       if(checked_layout == "Image" && $('input[name = "quantity_of_image"]:checked').val() == 'QTY1'){
         $('input[name = "layout"]:checked').parents('.banner-layout-box-control').siblings('.banner-layout-wrap-inner').addClass('activelayout')
       }
       else if(checked_layout == "Image" && $('input[name = "quantity_of_image"]:checked').val() == 'QTY2'){
         $('input[name = "layout2"]:checked').parents('.banner-layout-box-control').siblings('.banner-layout-wrap-inner').addClass('activelayout')
       }
       else if(checked_layout == "Video"){
         $('input[name = "layout_video"]:checked').parents('.banner-layout-box-control').siblings('.banner-layout-wrap-inner').addClass('activelayout')
       }
   }
   
   InitView()
   
   function onHandleButtonActionChange(event){
       var element = document.getElementById("btnaction");
       var elementPreview=document.getElementById("btnpreview");
       if(event && event.target.value=="False"){
           element.classList.remove('btnshow');
           element.classList.add("btnhide");
   
           elementPreview.classList.remove('btnshow');
           elementPreview.classList.add("btnhide");
       }else{
           element.classList.remove('btnhide');
           element.classList.add("btnshow");
           
           elementPreview.classList.remove('btnhide');
           elementPreview.classList.add('btnshow');
   };
   }
</script>

<script>
    var currentTab = 0; // Current tab is set to be the first tab (0)
    $(window.parent.document).ready(function(){
      showTab(currentTab); 
    })
    // Display the current tab
function showTab(n) {
  // This function will display the specified tab of the form ...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";
  // ... and fix the Previous/Next buttons:
//   window.parent.document.querySelector('.cms-btn.cms-btn-action.default').style.display = 'none'
   if(typeof({{adminform.form.instance.id}}) != 'number'){
      $(window.parent.document).find('.cms-modal-item-buttons').css('display','none')
      
   }
   

  else if (typeof({{adminform.form.instance.id}}) != 'number'){
    document.getElementById("prevBtn").style.display = "inline";
  }
  if (n == (x.length - 1)) {
    document.getElementById("nextBtn").innerHTML = "Save";
    window.parent.document.querySelector('.cms-btn.cms-btn-action.default').style.display = 'block'
  } else {
    document.getElementById("nextBtn").innerHTML = "Next";
  }
}

function nextPrev(n) {
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab");
  if(n == -1){
   window.parent.document.querySelector('.cms-modal-close.cms-icon.cms-icon-close').click()
  }
  // Exit the function if any field in the current tab is invalid:
   if (n == 1 && !validateForm()) return false;
  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  currentTab = currentTab + n;
  // if you have reached the end of the form... :

  if (currentTab >= x.length) {
   window.parent.document.querySelector('.cms-btn.cms-btn-action.default').click()
    return false;
  }
  else if (currentTab == 1){
   
   $('#text_id').removeClass('not-top-indicator').addClass('active1')
   $(".main_tab").children().eq(0).find('img').attr('src','/static/images/widget_image/infoblockfirst/media2.svg')
   $(".main_tab").children().eq(1).find('img').attr('src','/static/images/widget_image/infoblockfirst/media1.svg')
   $('#media_id').removeClass('active1').addClass('not-top-indicator')
}
  else if (currentTab == 2){
   
   $('#button_id').removeClass('not-top-indicator').addClass('active1')
   $(".main_tab").children().eq(1).find('img').attr('src','/static/images/widget_image/infoblockfirst/media2.svg')
   $(".main_tab").children().eq(2).find('img').attr('src','/static/images/widget_image/infoblockfirst/media1.svg')
   $('#text_id').removeClass('active1').addClass('not-top-indicator')
}
  // Otherwise, display the correct tab:
  showTab(currentTab);
  scrollToTop()
}



function validateForm() {
   let radio = $('input[name = "media_type"]:checked').val()
   if ($("input[ name = 'background']:checked").val() == 'yes'){
      if($("input[name = 'bg_type']:checked").val() == "image" && $(".bg_image").children().length == 0){
         $(".err-img-bg").removeClass('d-none');
         $("#bg_image").focus()
         return false
      }
      else{
         $(".err-img-bg").addClass('d-none');
      }
   }

   if (radio == "Image"){
      let qty_img = $('#'+radio).find('input[name = "quantity_of_image"]:checked').val()
      if (qty_img == "QTY1" && $(".image").children().length == 0 ){
         $(".err-img").removeClass('d-none');
         $("#image").focus()
         return false
      }
      else if (qty_img == "QTY2" && $(".image_left").children().length == 0 ){
         $(".err-img-left").removeClass('d-none');
         $("#image_left").focus()
         return false
      }
      else if (qty_img == "QTY2" && $(".image_right").children().length == 0){
         $(".err-img-right").removeClass('d-none');
         $("#image_right").focus()
         return false
      }
      else{
         $(".err-img").addClass('d-none');
         $(".err-img-left").addClass('d-none');
         $(".err-img-right").addClass('d-none');
         return true
      }
   }
   else if(radio == "Video"){
      let type_video = $('#'+radio).find('input[name = "video_type"]:checked').val()
      if (type_video == "link" && $("#id_video_link").val() == ""){
         $(".err-img-link").removeClass('d-none');
         $("#id_video_link").focus()
         return false
      }
      else if (type_video == "upload" && $("#id_video").val() == "" && !$("#upload").find("a").attr("href")){
         $(".err-img-upload").removeClass('d-none');
         $("#id_video").focus()
         return false
      }
      else{
         $(".err-img-upload").addClass('d-none');
         $(".err-img-link").addClass('d-none');
         return true
      }
   }
   else if(radio == "None"){
      if ($("input[ name = 'background']:checked").val() == 'yes'){
         if($("input[name = 'bg_type']:checked").val() == "image" && $(".bg_image").children().length == 0 && $(".mobimage").children().length == 0){
            $(".err-img-bg").removeClass('d-none');
            $(".err-img-bgmob").removeClass('d-none');
            $("#bg_image").focus()
            return false
         }
         //else if($("input[name = 'bg_type']:checked").val() == "image" && $(".bg_image").children().length != 0 && $(".mobimage").children().length == 0){
         //   $(".err-img-bgmob").removeClass('d-none');
         //   $(".err-img-bg").addClass('d-none');
         //   $("#mobimage").focus()
         //   return false
         //}
         else if($("input[name = 'bg_type']:checked").val() == "image" && $(".mobimage").children().length != 0 && $(".bg_image").children().length == 0 ){
            $(".err-img-bg").removeClass('d-none');
            $(".err-img-bgmob").addClass('d-none');
            $("#bg_image").focus()
            return false
         }
         else{
            $(".err-img-bg").addClass('d-none');
            //$(".err-img-bgmob").addClass('d-none');
            return true
         }
      }
      else{
         return true
      }
   }
   
 }

// to enable or disable the radio option 
$('input[type = "radio"]').on("click",function(){
   let x = $(this).val();
   let div_name = $(this).attr('name')
   $('.'+div_name).children().addClass('d-none')
   $('#'+x).removeClass('d-none')
   setInfoBlockFirstPreview()
});


function scrollToTop() {
    $('html, body').animate({ scrollTop: 0 }, {duration : 800});
}

// code for add and delete button 
function selectRadioOption(data){
   let id = data.id
   let index = id.split('-')[1]
   if (id == 'link_choice_field_1-'+index){
       $('#cont_internal_link_btn_'+index).show()
       $("#cont_external_link_btn_"+index).hide()
       $("#cont_phone_link_btn_"+index).hide()
       $(`#id_button_target-${index}`).val('_self')
   }
   else if (id == 'link_choice_field_2-'+index){
       $('#cont_internal_link_btn_'+index).hide()
       $("#cont_external_link_btn_"+index).show()
       $("#cont_phone_link_btn_"+index).hide()
       $(`#id_button_target-${index}`).val('_blank')
   }
   else if (id == 'link_choice_field_3-'+index){
       $('#cont_internal_link_btn_'+index).hide()
       $("#cont_external_link_btn_"+index).hide()
       $("#cont_phone_link_btn_"+index).show()
       $(`#id_button_target-${index}`).val('_self')
   }
}

function setPrimaryBtnStyle(shape,name){
   let ids = name.getAttribute('class').split(' ')[0]
   $("#"+ids).val(shape);
   let no = ids.split('-')[1]
   if(shape == 'fill'){
       // below code to toggle the color patterns 
       $("#primary-btn-set1-"+no).removeClass("d-none")
       $("#primary-btn-set2-"+no).addClass("d-none")
       $("#primary-btn-set2-"+no).children('li.active').removeClass('active')
       if ($("#primary-btn-set1-"+no).children('li.active').length <= 0){
           let firstcolor = $("#primary-btn-set1-"+no).children().first()
           firstcolor.addClass('active')
           $('#button_color_pattern-'+no).val('F2')
           $(name).children().removeClass('F1 F2 F3 F4')
           $(name).children().addClass($('#primary-btn-set1-'+no+' .button_color_pattern-'+no+'.active').data('value'))
       }
       else{
         $('#button_color_pattern-'+no).val($('#primary-btn-set1-'+no+' .button_color_pattern-'+no+'.active').data('value'))
         $(name).children().removeClass('F1 F2 F3 F4')
         $(name).children().addClass($('#primary-btn-set1-'+no+' .button_color_pattern-'+no+'.active').data('value'))
       }

   } else if(shape == 'outline'){
       // below code to toggle the color patterns 
       $("#primary-btn-set1-"+no).addClass("d-none")
       $("#primary-btn-set2-"+no).removeClass("d-none")
       $("#primary-btn-set1-"+no).children('li.active').removeClass('active')
       if ($("#primary-btn-set2-"+no).children('li.active').length <= 0){
           let firstcolor =  $("#primary-btn-set2-"+no).children().eq(1)
           firstcolor.addClass('active')
           $('#button_color_pattern-'+no).val('O2')
           $(name).children().removeClass('O1 O2 O3 O4')
           $(name).children().addClass($('#primary-btn-set2-'+no+' .button_color_pattern-'+no+'.active').data('value'))
       }
       else{
         $('#button_color_pattern-'+no).val($('#primary-btn-set2-'+no+' .button_color_pattern-'+no+'.active').data('value'))
         $(name).children().removeClass('O1 O2 O3 O4')
         $(name).children().addClass($('#primary-btn-set2-'+no+' .button_color_pattern-'+no+'.active').data('value'))
       }

   }
   display_buttons()
   
}

function selectButtonColor(btn, colorPattern){
   $("#" + btn.getAttribute('class')).val(colorPattern);
   let no = $(btn).attr('class').split('-')[1]
   let myclasses = $('.button_style-'+no+'.active button')
   let myclass= $('.button_style-'+no+'.active button').attr('class').split(' ');
   update_btn_color(no,myclass,myclasses,colorPattern)
   display_buttons()
}
function update_btn_color(num,class_names,my_class_names,color_pattern){
   class_names.forEach(function(number){

      if(['F1','F2','F3','F4'].includes(number)){
         my_class_names.removeClass(number)
         $('.button_style-'+num+'.active button').addClass(`btn-theme `+color_pattern)
      }
      else{
         my_class_names.removeClass(number)
         $('.button_style-'+num+'.active button').addClass(`btn-theme `+color_pattern)
      }
   }) 
}
const btn_list = {1:'First Button',2:'Second Button',3:"Third Button",4:"Fourth Button"};
function AddButtons(mydata){

   let no_of_btns = $("#main-section-btn").children().length;
   // check if no of buttons not less than 1
   if(no_of_btns == 0){
      $('#id_add_btn.box-theme-sub-title').css('margin-top', '40px') // if length of button greater than 0 then add button magin-top should be 40px
      addFirstBtn();
      return false
   }
   let x = $("#main-section-btn").children().last().clone()

   // ADD THE DELETE BUTTON 
   x.find(`#delAnchor-`+no_of_btns).attr('id','delAnchor-'+(no_of_btns + 1))

   // change the id of the section
   x.attr('id','section-'+(no_of_btns+1))

   // change the title and delete btn class
   x.find('.box-theme-sub-title.d-flex').children().eq(0).text(btn_list[no_of_btns+1])
   //x.find('.box-theme-sub-title.d-flex').children().eq(1).removeClass().addClass('section-'+(no_of_btns+1))
   
   // change the text of the button (also change the name and id)
   x.find('#button_text-'+no_of_btns).attr('name','button_text-'+(no_of_btns+1))
   x.find('#button_text-'+no_of_btns).attr('id','button_text-'+(no_of_btns+1))
   x.find('.l_button_text-'+no_of_btns).removeClass('l_button_text-'+no_of_btns).addClass('l_button_text-'+(no_of_btns+1))

   // change the name and id of the buttons link 
   x.find('#link_choice_field_1-'+no_of_btns).attr({'id':'link_choice_field_1-'+(no_of_btns+1),'name' : 'link_choice_field-'+(no_of_btns+1)})
   x.find('#link_choice_field_2-'+no_of_btns).attr({'id':'link_choice_field_2-'+(no_of_btns+1),'name' : 'link_choice_field-'+(no_of_btns+1)})
   x.find('#link_choice_field_3-'+no_of_btns).attr({'id':'link_choice_field_3-'+(no_of_btns+1),'name' : 'link_choice_field-'+(no_of_btns+1)})

   // hide and show the link field using the below code 
   x.find('#cont_internal_link_btn_'+no_of_btns).attr('id','cont_internal_link_btn_'+(no_of_btns+1))
   x.find('#cont_external_link_btn_'+no_of_btns).attr('id','cont_external_link_btn_'+(no_of_btns+1))
   x.find('#cont_phone_link_btn_'+no_of_btns).attr('id','cont_phone_link_btn_'+(no_of_btns+1))

   // change the name id tag of the dropdown for internal link
   x.find('#id_button_internallink_'+no_of_btns).attr({'id':'id_button_internallink_'+(no_of_btns+1),'name' : 'button_internallink_'+(no_of_btns+1)})

   // change the id and name of the external link 
   x.find('#button_link-'+no_of_btns).attr({'id':'button_link-'+(no_of_btns+1),'name' : 'button_link-'+(no_of_btns+1)})
   
   // change the id and name of the phone link 
   x.find('#button_phone_link-'+no_of_btns).attr({'id':'button_phone_link-'+(no_of_btns+1),'name' : 'button_phone_link-'+(no_of_btns+1)})
   
   // change the id and name of the Window selection
   x.find('#id_button_target-'+no_of_btns).attr({'id':'id_button_target-'+(no_of_btns+1),'name' : 'button_target-'+(no_of_btns+1)})

   // change the class of the tab for style and color
   x.find(".btn_style_"+no_of_btns).attr({'class':'btn_style_'+(no_of_btns+1),'data-target':'btn_style_'+(no_of_btns+1)})
   x.find(".btn_color_"+no_of_btns).attr({'class':'btn_color_'+(no_of_btns+1),'data-target':'btn_color_'+(no_of_btns+1)})
   x.find("#btn_style_"+no_of_btns).attr('id','btn_style_'+(no_of_btns+1))
   x.find("#btn_color_"+no_of_btns).attr('id','btn_color_'+(no_of_btns+1))
   //x.find(".btn_style_"+no_of_btns).attr('class','btn_style_'+(no_of_btns+1))
   //x.find(".btn_color_"+no_of_btns).attr('class','btn_color_'+(no_of_btns+1))

   // below code to change the id of the hidden field of the style of the button
   x.find("#button_style-"+no_of_btns).attr({'id':'button_style-'+(no_of_btns+1),'name':'button_style-'+(no_of_btns+1)})
   x.find(".button_style-"+no_of_btns).attr('class','button_style-'+(no_of_btns+1))

   // hide and show the custom color set options
   x.find('#primary-btn-set1-'+no_of_btns).attr("id","primary-btn-set1-"+(no_of_btns+1))
   x.find('#primary-btn-set2-'+no_of_btns).attr("id","primary-btn-set2-"+(no_of_btns+1))

   //change the id and name of the input field for color patterns
   x.find("#button_color_pattern-"+no_of_btns).attr({'id':'button_color_pattern-'+(no_of_btns+1),'name':'button_color_pattern-'+(no_of_btns+1)})
   x.find(".button_color_pattern-"+no_of_btns).attr('class','button_color_pattern-'+(no_of_btns+1))

   // add each button at the end of the last button 
   $("#main-section-btn").append(x);
   
   // empty the value of each field of the button
   $('#button_text-'+(no_of_btns+1)).val('')
   $('input[name = "link_choice_field-'+(no_of_btns+1)+'"][value = "Internal link"]').prop('checked',true)
   $('#cont_internal_link_btn_'+(no_of_btns+1)).css('display','block')
   $('#cont_external_link_btn_'+(no_of_btns+1)).css('display','none')
   $('#cont_phone_link_btn_'+(no_of_btns+1)).css('display','none')
   $('#id_button_internallink_'+(no_of_btns+1)).val('')
   $('#button_link-'+(no_of_btns+1)).val('')
   $('#button_phone_link-'+(no_of_btns+1)).val('')
   $('#id_button_target-'+(no_of_btns+1)).val('_self')
   $('.l_button_text-'+(no_of_btns+1)).text("0/25")

   // make style tab active and color tab inactive

   x.find('.btn_style_'+(no_of_btns+1)).addClass('active')
   x.find('.btn_color_'+(no_of_btns+1)).removeClass('active')
   x.find('#btn_style_'+(no_of_btns+1)).show()
   x.find('#btn_color_'+(no_of_btns+1)).hide()
   if (mydata == false){
      x.find('.button_style-'+(no_of_btns+1)).first().addClass("active")
      x.find('.button_style-'+(no_of_btns+1)).first().children().removeClass()
      x.find('.button_style-'+(no_of_btns+1)).first().children().addClass("btn-theme F2")
      x.find('.button_style-'+(no_of_btns+1)).last().removeClass("active")
      x.find('.button_style-'+(no_of_btns+1)).last().children().removeClass()
      x.find('.button_style-'+(no_of_btns+1)).last().children().addClass("btn-theme O2")
      x.find('#primary-btn-set1-'+(no_of_btns+1)).removeClass("d-none")
      x.find('#primary-btn-set2-'+(no_of_btns+1)).addClass("d-none")
      x.find('#button_style-'+(no_of_btns+1)).val('fill')

      let colors = x.find('#button_color_pattern-'+(no_of_btns+1)).siblings('ul').children()
      colors.removeClass('active')
      colors.first().addClass('active')
      x.find('#button_color_pattern-'+(no_of_btns+1)).val('F2')
   }

   

   if (no_of_btns == 2) {
       $('#id_add_btn').hide()
       return false
   }
   
}

function addFirstBtn(){
   $("#main-section-btn").append(
      `<div id = "section-1">
         <div class="box-theme-sub-title d-flex" id="headline_color">
             <div>First Button</div>
             <a id = "delAnchor-1" class = "del-anchor" href = "javascript:void(0);" onclick = "DeleteButton(this)"> <svg width="24" height="24" viewBox="2 2 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 6H14C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4C11.4696 4 10.9609 4.21071 10.5858 4.58579C10.2107 4.96086 10 5.46957 10 6ZM8 6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6H21C21.2652 6 21.5196 6.10536 21.7071 6.29289C21.8946 6.48043 22 6.73478 22 7C22 7.26522 21.8946 7.51957 21.7071 7.70711C21.5196 7.89464 21.2652 8 21 8H20.118L19.232 18.34C19.1468 19.3385 18.69 20.2686 17.9519 20.9463C17.2137 21.6241 16.2481 22.0001 15.246 22H8.754C7.75191 22.0001 6.78628 21.6241 6.04815 20.9463C5.31002 20.2686 4.85318 19.3385 4.768 18.34L3.882 8H3C2.73478 8 2.48043 7.89464 2.29289 7.70711C2.10536 7.51957 2 7.26522 2 7C2 6.73478 2.10536 6.48043 2.29289 6.29289C2.48043 6.10536 2.73478 6 3 6H8ZM15 12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17C14.2652 17 14.5196 16.8946 14.7071 16.7071C14.8946 16.5196 15 16.2652 15 16V12ZM10 11C10.2652 11 10.5196 11.1054 10.7071 11.2929C10.8946 11.4804 11 11.7348 11 12V16C11 16.2652 10.8946 16.5196 10.7071 16.7071C10.5196 16.8946 10.2652 17 10 17C9.73478 17 9.48043 16.8946 9.29289 16.7071C9.10536 16.5196 9 16.2652 9 16V12C9 11.7348 9.10536 11.4804 9.29289 11.2929C9.48043 11.1054 9.73478 11 10 11ZM6.76 18.17C6.8026 18.6694 7.03117 19.1346 7.40044 19.4735C7.76972 19.8124 8.25278 20.0003 8.754 20H15.246C15.7469 19.9998 16.2294 19.8117 16.5983 19.4728C16.9671 19.134 17.1954 18.6691 17.238 18.17L18.11 8H5.89L6.762 18.17H6.76Z" fill="#12BBD2"/>
                </svg>Delete</a>

         </div>
         <div class="box-theme-form-item background">
             <div class="box-theme-form-item-inline Btn_textbox">
                 <div class="box-theme-form-item-inline-input">

                     <!-- input the button1 name -->
                     <div class = "btn_text_main">
                         <input name="button_text-1" id="button_text-1" type="text" value="{% if adminform.form.button_text_1.value %}{{adminform.form.first_button_text.value}}{% endif %}" placeholder="Button name" class="form-input btn-text" onblur = "textChange(this)">
                         <div class = 'l_button_text-1 word_count'>0/25</div>  
                     </div>    
                     <div class = "double20">   
                     <div class="admin-form  horizontal-checkbox ">

                         <div class="form-check radio-outer d-flex align-items-center p-0">
                             <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field-1" onclick = "selectRadioOption(this)" id="link_choice_field_1-1" value="Internal link" checked="">
                             <label class="form-check-label custom-radio-label ml-2" for="link_choice_field_1-1">
                                 Internal link
                             </label>
                             <div class="box-theme-form-label">
                              <span style="position:relative; margin-right: 20px;">
                                 <img src="/static/images/ic-info.svg" class="abs_meg_icon">
                                 <div class="form-tooltip">
                                    An internal link is a link to an existing page on your website. When an internal link button is clicked, the page will open in the same tab.
                                 </div>
                              </span>
                           </div>
                         </div>
                     
                         <div class="form-check radio-outer d-flex align-items-center p-0">
                             <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field-1" onclick = "selectRadioOption(this)" id="link_choice_field_2-1" value="External link">
                             <label class="form-check-label custom-radio-label ml-2" for="link_choice_field_2-1">
                                 External link
                             </label>
                             <div class="box-theme-form-label">
                              <span style="position:relative; margin-right: 20px;">
                                 <img src="/static/images/ic-info.svg" class = "abs_meg_icon">
                                 <div class="form-tooltip">
                                    An external link is a link that directs users away from your website. When an external link button is clicked, the page will open in a new window or tab.
                                 </div>
                              </span>
                           </div>
                         </div>
                     
                         <div class="form-check radio-outer d-flex align-items-center p-0">
                             <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field-1" onclick = "selectRadioOption(this)" id="link_choice_field_3-1" value="Phone link">
                             <label class="form-check-label custom-radio-label ml-2" for="link_choice_field_3-1">
                                 Phone link
                             </label>
                             <div class="box-theme-form-label">
                              <span style="position:relative; margin-right: 20px;">
                                 <img src="/static/images/ic-info.svg" class = "abs_meg_icon">
                                 <div class="form-tooltip">
                                    On iOS or Android mobile devices, a phone link is a clickable button that users can click to call a phone number. On other devices, a phone number will appear in the button's place, but will not be clickable.
                                 </div>
                              </span>
                           </div>
                         </div>
                     
                     </div>
                     </div>
                     
                     <!-- input fields for internal link, external link, phone link  -->
                     <div class="row">    
                         <div class="col-8">                    
                             <div id="cont_internal_link_btn_1">
                                 {{adminform.form.button_internallink_1}}
                             </div>
                             <div id="cont_external_link_btn_1" style="display: {% if adminform.form.link_choice_field_btn1.value == 'External link' %}block{% else %}none{%endif%} ">
                                 <input name="button_link-1" id = "button_link-1" type="text" value="{% if adminform.form.first_button_link.value %}{{adminform.form.first_button_link.value}}{% endif %}" placeholder="http://" class="form-input">
                             </div>
                             <div id="cont_phone_link_btn_1" style="display: {% if adminform.form.link_choice_field_btn1.value == 'Phone link' %}block{% else %}none{%endif%} ">
                                 <input name="button_phone_link-1" id = "button_phone_link-1" type="text" value="{% if adminform.form.button_phone_link.value %}{{adminform.form.first_button_phone_link.value}}{% endif %}" placeholder="(XXX) XXXXXXX" class="form-input phone-validation" onkeypress="return /[0123456789+-]/i.test(event.key)" oninput = "phonelinnkinput(this)">
                               </div>
                             
                         </div>
                         <div class="col-4">
                             <select name="button_target-1" id="id_button_target-1" class = "form-select">
                                 <option value="_self" selected="">Current Tab</option>
                                 
                                 <option value="_blank">New Tab</option>
                                 
                             </select>
                         </div>
                     </div>
                 
                 </div>
             </div>
             {% if adminform.form.first_button_text.errors %}
                 {% for error in adminform.form.first_button_text.errors  %}
                     <div class="alert alert-danger error-block" role="alert">
                         {{error}}
                     </div>
                 {% endfor %}
             {% endif %}
             {% if adminform.form.first_button_link.errors %}
                 {% for error in adminform.form.first_button_link.errors  %}
                     <div class="alert alert-danger error-block" role="alert">
                         {{error}}
                     </div>
                 {% endfor %}
             {% endif %}
             {% if adminform.form.button_internallink_1.errors %}
                 {% for error in adminform.form.button_internallink_1.errors  %}
                     <div class="alert alert-danger error-block" role="alert">
                         {{error}}
                     </div>
                 {% endfor %}
             {% endif %}
             {% if adminform.form.first_button_target.errors %}
             {% for error in adminform.form.first_button_target.errors  %}
                 <div class="alert alert-danger error-block" role="alert">
                     {{error}}
                 </div>
             {% endfor %}
             {% endif %}
         </div>
         <div class="box-theme-tab-wrap" id="first-btn-section">
             <div class="box-theme-tab">
                 <ul class="theme-tab">
                     <li class="active btn_style_1" data-target="btn_style_1">Style</li>
                     <li class="btn_color_1" data-target="btn_color_1">Color</li>
                 </ul>
             </div>
             <div>
             <div class="box-theme-form-item theme-tab-content style-tab" id="btn_style_1">
                 <div class="box-theme-tab-wrap admin-form admin-form ">
                     <ul class="theme-button-tab ">
                         <input type="hidden" name="button_style-1" id="button_style-1" value="{{adminform.form.first_button_style.value|default:'fill'}}"> 
                         <li class="button_style-1 {% if adminform.form.button_data.value|length > 0 %} {%else%}active {%endif%}" onclick="setPrimaryBtnStyle('fill',this)"><button class="btn-theme F2">Button </button></li>
                         <li class="button_style-1" onclick="setPrimaryBtnStyle('outline',this)"><button class="btn-theme O2">Button </button></li>
                     </ul>
                 </div>
             </div>
             <div class="box-theme-form-item theme-tab-content color-tab" id="btn_color_1" style="display: none;">
                 <div class="box-theme-tab-wrap admin-form admin-form ">

                         <input type="hidden" name="button_color_pattern-1" id="button_color_pattern-1" value="{{adminform.form.first_button_color_pattern.value|default:'F2'}}">
                         <ul class="theme-button-tab" id="primary-btn-set1-1">
                             <li class="button_color_pattern-1 active{% if adminform.form.first_button_color_pattern.value == 'F2' %}active{% endif %}" data-value = "F2" onclick="selectButtonColor(this, 'F2')"><button class="btn-theme F2">Button</button></li>
                             <li class="button_color_pattern-1{% if adminform.form.first_button_color_pattern.value == 'F1' %}active{% endif %}" data-value = "F1" onclick="selectButtonColor(this, 'F1')"><button class="btn-theme F1">Button</button></li>
                             <li class="button_color_pattern-1{% if adminform.form.first_button_color_pattern.value == 'F4' %}active{% endif %}" data-value = "F4" onclick="selectButtonColor(this, 'F4')"><button class="btn-theme F4">Button</button></li>
                             <li class="button_color_pattern-1{% if adminform.form.first_button_color_pattern.value == 'F3' %}active{% endif %}" data-value = "F3" onclick="selectButtonColor(this, 'F3')"><button class="btn-theme F3">Button</button></li>
                         </ul>
                         <ul class="theme-button-tab {% if adminform.form.first_button_style.value == 'outline' %} {% else %} d-none {% endif %} " id="primary-btn-set2-1">
                             <li class="button_color_pattern-1{% if adminform.form.first_button_color_pattern.value == 'O1' %}active{% endif %}" data-value = "O1" onclick="selectButtonColor(this, 'O1')"><button class="btn-theme O1">Button</button></li>
                             <li class="button_color_pattern-1{% if adminform.form.first_button_color_pattern.value == 'O2' %}active{% endif %}" data-value = "O2" onclick="selectButtonColor(this, 'O2')"><button class="btn-theme O2">Button</button></li>
                             <li class="button_color_pattern-1{% if adminform.form.first_button_color_pattern.value == 'O3' %}active{% endif %}" data-value = "O3" onclick="selectButtonColor(this, 'O3')"><button class="btn-theme O3">Button</button></li>
                             <li class="button_color_pattern-1{% if adminform.form.first_button_color_pattern.value == '04' %}active{% endif %}" data-value = "O4" onclick="selectButtonColor(this, 'O4')"><button class="btn-theme O4">Button</button></li>
                         </ul>
                 </div>
             </div>
             </div>
         </div>
         {% if adminform.form.first_button_style.errors %}
             {% for error in adminform.form.first_button_style.errors  %}
                 <div class="alert alert-danger error-block" role="alert">
                     {{error}}
                 </div>
             {% endfor %}
         {% endif %}
         {% if adminform.form.first_button_outline_color.errors %}
             {% for error in adminform.form.first_button_outline_color.errors  %}
                 <div class="alert alert-danger error-block" role="alert">
                     {{error}}
                 </div>
             {% endfor %}
         {% endif %}
         {% if adminform.form.first_button_fill_color.errors %}
             {% for error in adminform.form.first_button_fill_color.errors  %}
                 <div class="alert alert-danger error-block" role="alert">
                     {{error}}
                 </div>
             {% endfor %}
         {% endif %}
         {% if adminform.form.first_button_font_color.errors %}
             {% for error in adminform.form.first_button_font_color.errors  %}
                 <div class="alert alert-danger error-block" role="alert">
                     {{error}}
                 </div>
             {% endfor %}
         {% endif %}
     </div>
      `
   )
   // this code to make the drop down icon of the internal link as per the figma
   $('#id_button_internallink_1').addClass('form-select')
}
 // delete Buttons for now
 function DeleteButton(data){
   let ids = data.id.split('-')[1]

   // THIS WILL DELETE THE SECTION
      
   let remain_btn = $("#main-section-btn").children()

   // check the lenght of the buttons to remove the add button margin
   if (remain_btn.length == 1 ){
      $('#id_add_btn.box-theme-sub-title').css('margin-top', '0px') // if length of button greater than 0 then add button magin-top should be 40px
   }
   for (let no_of_btns = (parseInt(ids)); no_of_btns <= remain_btn.length; no_of_btns++){
      
         // ADD THE DELETE BUTTON 
         let btn_val = no_of_btns+1
         $(remain_btn[no_of_btns]).find(`#delAnchor-`+btn_val).attr('id','delAnchor-'+(no_of_btns))

         // change the id of the section
         $(remain_btn[no_of_btns]).attr('id','section-'+(no_of_btns))

         // change the title and delete btn class
         $(remain_btn[no_of_btns]).find('.box-theme-sub-title.d-flex').children().eq(0).text(btn_list[no_of_btns])
         //x.find('.box-theme-sub-title.d-flex').children().eq(1).removeClass().addClass('section-'+(no_of_btns+1))
         
         // change the text of the button (also change the name and id)
         $(remain_btn[no_of_btns]).find('#button_text-'+btn_val).attr('name','button_text-'+(no_of_btns))
         $(remain_btn[no_of_btns]).find('#button_text-'+btn_val).attr('id','button_text-'+(no_of_btns))

         $(remain_btn[no_of_btns]).find('.l_button_text-'+btn_val).removeClass('l_button_text-'+no_of_btns).addClass('l_button_text-'+(no_of_btns))
         // change the name and id of the buttons link 
         $(remain_btn[no_of_btns]).find('#link_choice_field_1-'+btn_val).attr({'id':'link_choice_field_1-'+(no_of_btns),'name' : 'link_choice_field-'+(no_of_btns)})
         $(remain_btn[no_of_btns]).find('#link_choice_field_2-'+btn_val).attr({'id':'link_choice_field_2-'+(no_of_btns),'name' : 'link_choice_field-'+(no_of_btns)})
         $(remain_btn[no_of_btns]).find('#link_choice_field_3-'+btn_val).attr({'id':'link_choice_field_3-'+(no_of_btns),'name' : 'link_choice_field-'+(no_of_btns)})

         // hide and show the link field using the below code 
         $(remain_btn[no_of_btns]).find('#cont_internal_link_btn_'+btn_val).attr('id','cont_internal_link_btn_'+(no_of_btns))
         $(remain_btn[no_of_btns]).find('#cont_external_link_btn_'+btn_val).attr('id','cont_external_link_btn_'+(no_of_btns))
         $(remain_btn[no_of_btns]).find('#cont_phone_link_btn_'+btn_val).attr('id','cont_phone_link_btn_'+(no_of_btns))

         // change the name id tag of the dropdown for internal link
         $(remain_btn[no_of_btns]).find('#id_button_internallink_'+btn_val).attr({'id':'id_button_internallink_'+(no_of_btns),'name' : 'button_internallink_'+(no_of_btns)})

         // change the id and name of the external link 
         $(remain_btn[no_of_btns]).find('#button_link-'+btn_val).attr({'id':'button_link-'+(no_of_btns),'name' : 'button_link-'+(no_of_btns)})
         
         // change the id and name of the phone link 
         $(remain_btn[no_of_btns]).find('#button_phone_link-'+btn_val).attr({'id':'button_phone_link-'+(no_of_btns),'name' : 'button_phone_link-'+(no_of_btns)})
         
         // change the id and name of the Window selection
         $(remain_btn[no_of_btns]).find('#id_button_target-'+btn_val).attr({'id':'id_button_target-'+(no_of_btns),'name' : 'button_target-'+(no_of_btns)})

         // change the class of the tab for style and color
         
         let btn_style = $(remain_btn[no_of_btns]).find(".btn_style_"+btn_val)
         btn_style.attr({'data-target':'btn_style_'+(no_of_btns)})
         btn_style.addClass('btn_style_'+(no_of_btns)).removeClass("btn_style_"+btn_val)
         let btn_color = $(remain_btn[no_of_btns]).find(".btn_color_"+btn_val)
         btn_color.attr({'data-target':'btn_color_'+(no_of_btns)})
         btn_color.addClass('btn_color_'+(no_of_btns)).removeClass("btn_color_"+btn_val)

         $(remain_btn[no_of_btns]).find("#btn_style_"+btn_val).attr('id','btn_style_'+(no_of_btns))
         $(remain_btn[no_of_btns]).find("#btn_color_"+btn_val).attr('id','btn_color_'+(no_of_btns))

         // below code to change the id of the hidden field of the style of the button
         $(remain_btn[no_of_btns]).find("#button_style-"+btn_val).attr({'id':'button_style-'+(no_of_btns),'name':'button_style-'+(no_of_btns)})
         let button_style = $(remain_btn[no_of_btns]).find(".button_style-"+btn_val)
         button_style.addClass('button_style-'+(no_of_btns)).removeClass('button_style-'+(btn_val))

         // hide and show the custom color set options
         $(remain_btn[no_of_btns]).find('#primary-btn-set1-'+btn_val).attr("id","primary-btn-set1-"+(no_of_btns))
         $(remain_btn[no_of_btns]).find('#primary-btn-set2-'+btn_val).attr("id","primary-btn-set2-"+(no_of_btns))

         //change the id and name of the input field for color patterns
         $(remain_btn[no_of_btns]).find("#button_color_pattern-"+btn_val).attr({'id':'button_color_pattern-'+(no_of_btns),'name':'button_color_pattern-'+(no_of_btns)})
         let button_color_pattern = $(remain_btn[no_of_btns]).find(".button_color_pattern-"+btn_val)
         button_color_pattern.addClass('button_color_pattern-'+(no_of_btns)).removeClass('button_color_pattern-'+(btn_val))
         

   }
   $('#section-'+ids).remove()
   $('#id_add_btn').show()

   display_buttons()
}

function save_changes(){
   let no_of_btns = $("#main-section-btn").children().length;
   let custom_btn_data = {};
   $("#main-section-btn").children().each(function(index, element) {
      if($('#button_text-'+(index+1)).val() != ''){
       custom_btn_data['btn'+(index+1)] = {}
       custom_btn_data['btn'+(index+1)]['button_text'] = $('#button_text-'+(index+1)).val()
       custom_btn_data['btn'+(index+1)]['link_choice_field'] = $('[name = "link_choice_field-'+(index+1)+'"]:checked').val()
       custom_btn_data['btn'+(index+1)]['id_button_internallink'] = $('[name = "button_internallink_'+(index+1)+'"').val()
       custom_btn_data['btn'+(index+1)]['button_link'] = $('[name = "button_link-'+(index+1)+'"').val()
       custom_btn_data['btn'+(index+1)]['button_phone_link'] = $('[name = "button_phone_link-'+(index+1)+'"').val()
       custom_btn_data['btn'+(index+1)]['id_button_target'] = $('[name = "button_target-'+(index+1)+'"').val()
       custom_btn_data['btn'+(index+1)]['button_style'] = $('[name = "button_style-'+(index+1)+'"').val()
       custom_btn_data['btn'+(index+1)]['button_color_pattern'] = $('[name = "button_color_pattern-'+(index+1)+'"').val()
      }
   });
   let string_data = JSON.stringify(custom_btn_data)
   $('#{{adminform.form.button_data.name}}').val(string_data)
}

 // onready load all the buttons that is saved
 $(document).ready(function(){
   let btn_data = {{adminform.form.button_data.value|safe}}
   let n = Object.keys(btn_data)
   
   for(let i = 1;i<=n.length;i++){
           AddButtons(mydata = true)
           $('#button_text-'+i).val(btn_data['btn'+i]['button_text'])
           $('[name = "link_choice_field-'+i+'"][value = "'+btn_data['btn'+i]['link_choice_field']+'"]').prop('checked',true)

           // check which button is saved like internal link, external link, or phone link
           if (btn_data['btn'+i]['link_choice_field'] == 'Internal link'){
               $('#cont_internal_link_btn_'+i).show()
               $('#cont_external_link_btn_'+i).hide()
               $('#cont_phone_link_btn_'+i).hide()
           }
           else if(btn_data['btn'+i]['link_choice_field'] == 'External link'){
               $('#cont_internal_link_btn_'+i).hide()
               $('#cont_external_link_btn_'+i).show()
               $('#cont_phone_link_btn_'+i).hide()
           }
           else if(btn_data['btn'+i]['link_choice_field'] == 'Phone link'){
               $('#cont_internal_link_btn_'+i).hide()
               $('#cont_external_link_btn_'+i).hide()
               $('#cont_phone_link_btn_'+i).show()
           }
           $('[name = "button_internallink_'+i+'"]').val(btn_data['btn'+i]['internallink_id'])
           $('[name = "button_link-'+i+'"]').val(btn_data['btn'+i]['button_link'])
           $('[name = "button_phone_link-'+i+'"]').val(btn_data['btn'+i]['button_phone_link'])
           $('[name = "button_target-'+i+'"]').val(btn_data['btn'+i]['id_button_target'])
           $('[name = "button_style-'+i+'"]').val(btn_data['btn'+i]['button_style'])
           $('[name = "button_color_pattern-'+i+'"]').val(btn_data['btn'+i]['button_color_pattern'])

           if (btn_data['btn'+i]['button_style'] == 'fill'){
               $('[name = "button_style-'+i+'"]').siblings('li.button_style-'+i+':first').addClass('active')
               $('#primary-btn-set1-'+i).removeClass('d-none')
               $('#primary-btn-set2-'+i).addClass('d-none')
               $('#primary-btn-set1-'+i+' li').each(function(){
                   if(btn_data['btn'+i]['button_color_pattern'] == $(this).data('value')){
                       $(this).addClass('active')
                   } 
               });
           }
           else if (btn_data['btn'+i]['button_style'] == 'outline'){
               $('[name = "button_style-'+i+'"]').siblings('li.button_style-'+i+':last').addClass('active')
               //$('[name = "button_style-'+i+'"]').siblings('li.button_style-'+i+':last').children().removeClass('button-style-outline').addClass(btn_data['btn'+i]['button_color_pattern'])
               $('#primary-btn-set2-'+i).removeClass('d-none')
               $('#primary-btn-set1-'+i).addClass('d-none')
               $('#primary-btn-set2-'+i+' li').each(function(){
                   if(btn_data['btn'+i]['button_color_pattern'] == $(this).data('value')){
                       $(this).addClass('active')
                   } 
               });
           }

   }
   for(let i = 1;i<=n.length;i++){
      $('.button_style-'+i+'.active button').removeClass().addClass(`btn-theme `+btn_data['btn'+i]['button_color_pattern'])
   }
   // default button style and pattern

   if(n.length == 0){
      $('#id_add_btn.box-theme-sub-title').css('margin-top', '0') // code to remove the margin of add button 
      $('.button_style-1').eq(0).addClass('active')
      $('#primary-btn-set1-1').removeClass('d-none')
      $('#primary-btn-set1-1').children().first().addClass('active')
   }
});

// to change the tab list like style to colors
$(document).on("click",".theme-tab li", function () {
   let target_box = $(this).attr('class');
   $(this).siblings().removeClass("active");
   $(this).addClass("active");
   $("#" + target_box).show();
   $("#" + target_box).siblings().hide();
});
// this click function is on style two buttons to active and inactive the buttons
$(document).on("click",".theme-button-tab li", function () {
   $(this).siblings().removeClass("active");
   $(this).addClass("active");
});
</script>

<script>


$("input[name={{adminform.form.video_link.name}}]").on('blur',function(){

   let regex = /^https:\/\/.+$/;
        let url = $(this).val();
        let embeddedUrl = convertToEmbedded(url);
        if (!regex.test(url)) {
            $(".err-img-link").removeClass("d-none")
            $(".err-img-link").text("Invalid video url")
            $("input[name={{adminform.form.video_link.name}}]").val('')
        } 
        else if (!embeddedUrl) {
            $("#embeddedUrl").text(embeddedUrl);
            $(".err-img-link").removeClass("d-none")
            $(".err-img-link").text("Invalid video url")
            $("input[name={{adminform.form.video_link.name}}]").focus()
        } 
        else{
         $("input[name={{adminform.form.video_link.name}}]").val(embeddedUrl)
         $(".err-img-link").addClass("d-none")
         $(".err-img-link").text("This field is required.")
        }
        setInfoBlockFirstPreview()
});
// code to convert the video url to embedded video url
function convertToEmbedded(url) {

   const youtubePattern = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
   const vimeoPattern = /(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/(?:\w+\/)?videos\/|album\/(?:\d+\/)?video\/|video\/|)(\d+)(?:$|\/|\?)/;

   let videoId;

   if ((videoId = url.match(youtubePattern))) {
         return `https://www.youtube.com/embed/${videoId[1]}`;
   } else if ((videoId = url.match(vimeoPattern))) {
         return `https://player.vimeo.com/video/${videoId[1]}`;
   }

   return null;
}
function deleteImage(name,id,me){
   $(me).parents('.preview-'+name).addClass('d-none')
   $(me).parents('li').remove()
   $(`input[name = "${name}"]`).val('')
   setInfoBlockFirstPreview()
}

$(document).ready(function(){
   if(typeof({{adminform.form.instance.id}}) == 'number'){
      $('#media_id').attr("onclick","mytabs(0,this)").children().first().attr("src","{% static 'images/widget_image/infoblockfirst/media1.svg' %}")
      $('#text_id').attr({"onclick":"mytabs(1,this)","class":"not-top-indicator"}).children().first().attr("src","{% static 'images/widget_image/infoblockfirst/media2.svg' %}")
      $('#button_id').attr({"onclick":"mytabs(2,this)","class":"not-top-indicator"}).children().first().attr("src","{% static 'images/widget_image/infoblockfirst/media2.svg' %}")
      $("#prevBtn").hide()
      $("#nextBtn").hide()
   }
   else{

   }
   $('.title-color-display:first').css({"background":'{{adminform.form.collection_form_title_color.value}}' });
   $('.title-color-display:last').css({"background":'{{adminform.form.collection_form_subtitle_color.value}}' });
});
function mytabs(v,data){
   if ((v == 1 || v==2) && !validateForm()) return false;
   tabs = $(".tab").css('display','none');
   currentTab = v
   showTab(v)
   $(data).siblings().attr("class","not-top-indicator").children().attr("src","{% static 'images/widget_image/infoblockfirst/media2.svg' %}")
   $(data).attr("class" ,'active1').children().first().attr({"src" : "{% static 'images/widget_image/infoblockfirst/media1.svg' %}"})
   
}
{% comment %} CREATE COLLECETION FORM  {% endcomment %}

// SET THE COLLECETION BUTTON STYLE
$(".setFirstBtnStyle").on("click",function(){
   $(this).siblings("input").val($(this).data('name'))
   $(this).siblings("li").removeClass('active')
   $(this).addClass('active')

});
   // CHANGE THE COLOR AND SHOW THE SELECTED COLOR ON CUSTOM AND TO PREVIEW
   $(".theme-color-tab li").on("click", function () {
      $(this).siblings().removeClass("active");
      $(this).addClass("active");
      let x = $(this).attr("data-value");
      $('#instance1').val(x)
      $(this).siblings().last().find('.clr-field').css({'color':x});
      
      if ($(this).parent().attr('data-id') == 'id_collection_form_title_color'){
         $('.title-color-display:first').css({"background":x});
      }
      else if (($(this).parent().attr('data-id') == 'id_collection_form_subtitle_color')){
         $('.title-color-display:last').css({"background":x});
      }
      
   });

   $('#id_collection_form_title_color').nextAll().find('.color-selector').on('blur',function(){
      $('.title-color-display:first').css({"background":$(this).val()});
   });
   $('#id_collection_form_subtitle_color').nextAll().find('.color-selector').on('blur',function(){
      $('.title-color-display:last').css({"background":$(this).val()});
   });


   // preview switching tabs function
   $(".theme-tab-layout li").on("click", function () {
      let target_box = $(this).data("target");
      $(this).siblings().removeClass("active");
      $(this).addClass("active");
      if (target_box == 'btn_style_1_layout'){
          $(this).children().prop('src','/static/images/widget_image/bannerplugin/ph_monitor_enable.svg')
          $('.btn_color_1_layout').children().prop('src','/static/images/widget_image/bannerplugin/icons8_iphone.svg')
          $('#btn_style_1_layout').removeClass('d-none')
          $('#btn_color_1_layout').addClass('d-none')
      }
      else if (target_box == 'btn_color_1_layout'){
          $(this).children().prop('src','/static/images/widget_image/bannerplugin/icons8_iphone_enable.svg')
          $('.btn_style_1_layout').children().prop('src','/static/images/widget_image/bannerplugin/ph_monitor.svg')
          $('#btn_color_1_layout').removeClass('d-none')
          $('#btn_style_1_layout').addClass('d-none')
      }
  })

  // functionality to hide and show the font color tab
  $('.title-color-display:first').on('click',function(){
      $('#collection_form').children('.box-theme-form-item').eq(1).toggle();
  })
  $('.title-color-display:last').on('click',function(){
      $('#collection_form').children('.box-theme-form-item').eq(3).toggle();
  })

  // on change of buttons of collection form
  function setButtonStyle(style){

   let change_style = $(style).data('name')
   if(change_style == "fill"){
      $('#submit-btn').removeClass('O2').addClass("F2")
      $('#submit').removeClass('O2').addClass("F2")
   }
   else{
      $('#submit-btn').removeClass('F2').addClass("O2")
      $('#submit').removeClass('F2').addClass("O2")
   }
  }
   
  // functionality to linit the charecter in button text
  $('#main-section-btn').on('keyup','.btn-text',function(){
   if($(this).val().length > 25){
      $(this).val($(this).val().substring(0,25));
   }
   else{
      $(this).siblings().text($(this).val().length+'/25')
   }
  })
  $(document).ready(function(){
   $('#main-section-btn .btn-text').each(function(index,element){
    $(element).siblings().text($(element).val().length+"/25")
   })
  })
var display_buttons;
$(document).ready(function(){
   display_buttons = function() {
      $('#btnpreviewdesk').empty();
      $('#btnpreview').empty();
      
     // dynamic button preview
       $("#main-section-btn").children().each(function(index, element) {
          let btn_text = $('#button_text-'+(index+1)).val()
          let btn_color_parrern = $('[name = "button_color_pattern-'+(index+1)+'"]').val()
          let button_internallink = $('[name = "button_internallink_'+(index+1)+'"]').val()
          let button_link = $('[name = "button_link-'+(index+1)+'"]').val()
          let button_phone_link = $('[name = "button_phone_link-'+(index+1)+'"]').val()
          let link_choice_field = $('[name = "link_choice_field-'+(index+1)+'"]:checked').val()
          if(btn_text != ''){
            if ((link_choice_field == 'Internal link' && button_internallink == '') || (link_choice_field == 'External link' && button_link == '') || (link_choice_field == 'Phone link' && button_phone_link == '')){
               //do nothing
            }
            else{
               $('#btnpreviewdesk').append(`<a class = '${btn_color_parrern}' >${btn_text}</a>`)
               $('#btnpreview').append(`<a class = '${btn_color_parrern}' >${btn_text}</a>`)
            }
            
          }
          $('[name = "button_internallink_'+(index+1)+'"').on('change',function(){
            display_buttons();
          })
          $('[name = "button_link-'+(index+1)+'"').on('blur',function(){
            display_buttons();
          })
          $('[name = "button_phone_link-'+(index+1)+'"').on('blur',function(){
            display_buttons();
          })
          $('[name = "link_choice_field-'+(index+1)+'"').on('change',function(){
            display_buttons();
          })
       });
   }
   display_buttons();
 });
 function textChange(data){
   display_buttons()
 }

   function phonelinnkinput(data){

       var input = $(data).val();
       input = input.replace(/\D/g, ''); // Remove all non-digit characters
       input = input.substring(0, 10); // Limit to 10 digits

       var areaCode = input.substring(0, 3);
       var centralOfficeCode = input.substring(3, 6);
       var lineNumber = input.substring(6, 10);

       if (input.length > 6) {
           $(data).val('(' + areaCode + ') ' + centralOfficeCode + '-' + lineNumber);
       } else if (input.length > 3) {
           $(data).val('(' + areaCode + ') ' + centralOfficeCode);
       } else if (input.length > 0) {
           $(data).val('(' + areaCode);
       }
      }
</script>   
{% endaddtoblock %}
{% endblock content %}