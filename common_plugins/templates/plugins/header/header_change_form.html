{% extends 'admin/base_change_form.html' %}

{% load cms_tags menu_tags sekizai_tags static admin_modify %}
{% load global_theme_config_tags %}

{% block content %}
    {% global_theme_object as global_theme_config %}

    {% addtoblock 'css' %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/custom-header.css' %}">
    <style>
        {% if global_theme_config.primary_color and global_theme_config.secondary_color %}
                :root {
                    --primary-element: {{global_theme_config.primary_color}};
                    --secondary-element: {{global_theme_config.secondary_color}};
                }
            {% endif %}

            .dev_colorpicker_preview .clr-field {
                opacity: 0;
                cursor: pointer;
            }

            .banner-layout-wrap-inner img{
                {% comment %} width: 300px;
                height: 120px; {% endcomment %}
            }
            #first-btn-section .rectangle,
            #second-btn-section .rectangle {
                border-radius: 0px;
            }

            #first-btn-section .rounded,
            #second-btn-section .rounded {
                border-radius: 12px;
            }

            #first-btn-section .pill,
            #second-btn-section .pill {
                border-radius: 100px;
            }

            .image-preview-list {
                height: 65px !important;
                max-height: 65px !important;
                width: 141px !important;
                max-width: 141px !important;
                overflow: hidden !important;
            }
            .logo-img {
                max-width: 196px;
                max-height: 80px;
            }
            .mobile .logo-img {
                max-width: 163px!important;
                max-height: 80px;
            }
            .mobile span.cart-count{
                top : 0;
            }
            .store-number{
                color: #003F5A;
            }

            /* Django admin style override */
            ul > li {
                list-style-type: none;
            }
            .activelayout{
                padding: 10px;
                border-radius: 12px;
                border: 2px dashed  #12BBD2 !important;
                background: rgba(18, 187, 210, 0.05);
            }
            .nav-tabs .nav-item.show .nav-links, .nav-tabs .nav-links{
                border:none !important;
                padding : 12px 12px 12px 12px;
                text-decoration : none;
             }

             .nav-tabs .nav-item.clsinfo a{
                padding : 12px 12px 12px 0;
             }
             .nav-tabs .nav-item.clsinfo1 a{
                padding : 0 12px 12px 12px;
             }
             .nav-tabs{
                border-bottom:none !important;
             }
             .clsinfo{
                border-right:1px solid rgba(0, 63, 90, 0.40);
             }
             .nav-tabs .nav-links{
                color :#668C9C;
             }
             .nav-tabs .nav-links.active{
                color :#003F5A;
             }
             .nav-tabs .nav-item a:hover{
                color:#003F5A;
             }
             .img-fluid{
                box-shadow: 1px 2px 16px 0px rgba(2,27,37,0.13);
             }
             .banner-text-layout.cm-20{
                margin-bottom : 20px;
             }
             .logo-preview-section .image-preview-list:hover{
                border: 2px dashed  #12BBD2 !important;
                background: rgba(18, 187, 210, 0.05);
             }
             span.cart-count{
                position: absolute;
                top: -10px;
                right: -10px;
                width: 25px;
                height: 20px;
                display: flex;
                font-size: 18px;
                background: {{adminform.form.productbar_bg_color.value}};
                border-radius: 10px;
                justify-content: center;
                align-items: center;
             }
             .container.menu-container{
                margin-bottom : 0;
             }
             .prod-mt{
                margin-top : 40px;
             }
             .page-header-contact div{
                font-size : 18px;
             }
             .page-header-contact div{
                font-size : 18px;
             }
             #headerpluginmodel_form .box-theme-form-devider{
                margin-bottom : 40px;
             }
             #btn_style_1_layout .mobile{
                display : none;
             }
             #btn_style_1_layout .desktop{
                display : block;
             }
             #btn_style_1_layout{
                margin-bottom : 40px;
             }
             #btn_color_1_layout{
                margin-bottom : 40px;
             }
             #btn_color_1_layout .mobile{
                display : block;
                max-width : 375px;
             }
             #btn_color_1_layout .mobile .menu-container{
                padding-left : 12px;
             }
             #btn_color_1_layout .desktop{
                display : none;
             }
        </style>
        <style>
            .page-header-bottom.style-1 .container,.page-header-bottom.style-2 .container{
                padding-left : 12px;
                {% comment %} background-color : {{adminform.form.productbar_bg_color.value}}; {% endcomment %}
            }
            .mobile .page-header-bottom-search{
                position : static;
            }

            .mobile .menu-container{
                position : relative;
            }
            .mobile .menu-container .page-header-bottom-right .call-icon{
                position : absolute;
                right : 5px;
            }
            .add_links.row {
                align-items: center;
            }
            .add_links.row a{
                text-decoration : none;
            }
            .add_links.row input{
                padding : 9px;
                width : 100%;
            }
            .external{
                display : grid;
                gap : 8px;
                grid-template-columns: 3% 45% 45% 3%;
            }
            .external .del-btn{
                position : absolute;
                right : 64px;

            }
            .external .upt-btn{
                position : absolute;
                right : 139px;

            }
            .external img{
                height : 24px;
            }
            #id_add_btn{
                text-decoration : none;
                color : #003f5a;
            }
            .id_update_btn{
                color : #003f5a;
            }
            .ext_link_name{
                font-size : 18px;
                padding : 7px;
                width : 100%;
            }
            .ext_link_url{
                font-size : 18px;
                padding : 7px;
                width : 100%;
            }
            .select-class > *{
                padding : 9px;
                width : 100%;
                font-size : 18px;
            }
            .del-anchor svg{
                margin-top : -25px;
            }
            .add_btn span{
                margin-left: 4px;
                font-size: 30px;
                font-weight: 400;
            }
            .add_btn a{
                margin-left : 10px;
            }
            .form-select:focus{
                box-shadow : none;
                border : 2px solid #0042C9;
            }
             .pos-wc{
                position : relative;
             }
             .mt-40{
                margin-top : 40px
             }
             .mobile ul.page-header-bottom-menu{
                gap : 5px;
             }
        </style>
        <style>
            .dropdown-menu {
                list-style: none;
                padding: 0;
                margin: 0;
            }
            .dropdown-menu > li {
                position: relative;
            }
            .dropdown-menu > li > a {
                display: block;
                padding: 5px 10px;
                text-decoration: none;
            }
            .dropdown-menu > li > ul {
                display: none;
                position: absolute;
                left: 100%;
                top: 0;
                margin-top: -5px;
            }
            .dropdown-menu > li:hover > ul {
                display: block;
            }
            .ck-pad{
                padding-left : 32px;
            }
            .checkbox_quick_links .ck-pad{
                display : none;
            }

            {% comment %} hide the hanmburger in mobile view {% endcomment %}
            #btn_color_1_layout #myLinks {
                display : none;
            }
            .checkbox_quick_links input::placeholder{
                opacity : 0.6;
                color: #003F5A !important;
            }
            .page-header-top.container{
                margin : 0;
            }
        </style>
        
    {% endaddtoblock %}

    <form {% if has_file_field %}enctype="multipart/form-data" {% endif %}{% if form_url %}action="{{ form_url }}" {% endif %}method="post" id="{{ opts.model_name }}_form" novalidate>
        {% csrf_token %}

        <input type="hidden" value="[]" id = "external_del_childs" name = "external_del_childs">
        <div class="container mt-40">
            <div class="box-theme-title">
                Layout
            </div>
            <div class="box-theme-form-item">
                <div class="header-layout-types">
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-1-btn-left clslayout_1 {% if adminform.form.layout.value == 'LAYOUT1' %} activelayout {% endif %}" onclick="SelectHeaderLayout('layout_1')">
                            <img class="img-fluid" src="{% static 'images/widget_image/headerplugin/layout1.jpg' %}">
                           
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" id="layout_1">Classic header (logo, menu, telephone number, social networks)
                                <input type="radio" value="LAYOUT1" id="layout_group" onclick="SelectHeaderLayout('layout_1')" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT1' %} checked {% endif %} >
                                <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-1-btn-right clslayout_2 {% if adminform.form.layout.value == 'LAYOUT2' %} activelayout {% endif %}" onclick="SelectHeaderLayout('layout_2')">
                            <img class="img-fluid" src="{% static 'images/widget_image/headerplugin/layout2.jpg' %}">
                          
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" id="layout_2">Classic header with multiple locations and social networks
                                <input type="radio" value="LAYOUT2" id="layout_group" onclick="SelectHeaderLayout('layout_2')" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT2' %} checked {% endif %} >
                                <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
                    <div class="banner-layout-wrap">
                        <div class="banner-layout-wrap-inner txt-2-btn-left clslayout_3 {% if adminform.form.layout.value == 'LAYOUT3' %} activelayout {% endif %}" onclick="SelectHeaderLayout('layout_3')">
                            <img class="img-fluid" src="{% static 'images/widget_image/headerplugin/layout3.jpg' %}">
                           
                        </div>
                        <div class="banner-layout-box-control">
                            <label class="checkcontainer" id="layout_3">Classic header with products bar (consumer location, store name, search bar, consumer account, cart)
                                <input type="radio" value="LAYOUT3" id="layout_group" onclick="SelectHeaderLayout('layout_3')" name="{{adminform.form.layout.name}}" {% if adminform.form.layout.value == 'LAYOUT3' %} checked {% endif %} >
                                <span class="radiobtn"></span>
                            </label>
                        </div>
                    </div>
                </div>
                {% if adminform.form.layout.errors %}
                    {% for error in adminform.form.layout.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="box-theme-form-devider">
            </div>
            <div class="box-theme-title banner-text-layout cm-20">
                Color
            </div>
 <div class="box-theme-sub-title mb-3">
                            Header
                        </div>
            <ul class="nav nav-tabs mb-3" id="ex1" role="tablist">
                <li class="nav-item clsinfo" role="presentation">
                   <a
                      class="nav-links active"
                      id="ex1-tab-1"
                      data-bs-toggle="tab"
                      href="#ex1-tabs-1"
                      role="tab"
                      aria-controls="ex1-tabs-1"
                      aria-selected="true"
                      >Background</a>
                </li>
                <li class="nav-item clsinfo1" role="presentation">
                   <a
                      class="nav-links"
                      id="ex1-tab-2"
                      data-bs-toggle="tab"
                      href="#ex1-tabs-2"
                      role="tab"
                      aria-controls="ex1-tabs-2"
                      aria-selected="false"
                      >Elements (menu, telephone number, icons)</a
                      >
                </li>
             </ul>
             
             <div class="tab-content" id="ex1-content">
                <div
                   class="tab-pane fade show active"
                   id="ex1-tabs-1"
                   role="tabpanel"
                   aria-labelledby="ex1-tab-1"
                   >
                 
                   {{adminform.form.background_color}}
                </div>
                <div class="tab-pane fade" id="ex1-tabs-2" role="tabpanel" aria-labelledby="ex1-tab-2">
                    {{adminform.form.element_color}}
                </div>
                  
                </div>

            <div class="prod-mt">
                <div class="productbar-color-section box-theme-sub-title mb-3">

                    Products Bar

                </div>

                <div class="locationbar-color-section box-theme-sub-title mb-3">
                    Location Bar
                </div>

                <ul class="nav nav-tabs mb-3" id="ex" role="tablist">
                    <li class="nav-item clsinfo" role="presentation">
                       <a
                          class="nav-links active"
                          id="ex1-tab-one"
                          data-bs-toggle="tab"
                          href="#ex1-tabs-one"
                          role="tab"
                          aria-controls="ex1-tabs-one"
                          aria-selected="true"
                          >Background</a>
                    </li>
                    <li class="nav-item clsinfo1" role="presentation">
                       <a
                          class="nav-links"
                          id="ex1-tab-two"
                          data-bs-toggle="tab"
                          href="#ex1-tabs-two"
                          role="tab"
                          aria-controls="ex1-tabs-two"
                          aria-selected="false"
                          >Details (text, icons)</a
                          >
                    </li>
                 </ul>
                 
                <div class="tab-content" id="ex1-content">
                    <div
                       class="tab-pane fade show active"
                       id="ex1-tabs-one"
                       role="tabpanel"
                       aria-labelledby="ex1-tab-one"
                       >
                       {{adminform.form.productbar_bg_color}}
                    </div>
                    <div class="tab-pane fade" id="ex1-tabs-two" role="tabpanel" aria-labelledby="ex1-tab-two">
                        {{adminform.form.productbar_element_color}}
                    </div>
                </div>
            </div>
            <div class="prod-mt d-none">
                <div class="box-theme-sub-title mb-3">
                    Location Bar
                </div>
                <ul class="nav nav-tabs mb-3" id="ex3" role="tablist">
                    <li class="nav-item clsinfo" role="location">
                       <a
                          class="nav-links active"
                          id="ex1-tab-one"
                          data-bs-toggle="tab"
                          href="#ex3-tabs-one"
                          role="tab"
                          aria-controls="ex3-tabs-one"
                          aria-selected="true"
                          >Background</a>
                    </li>
                    <li class="nav-item" role="presentation">
                       <a
                          class="nav-links"
                          id="ex3-tab-two"
                          data-bs-toggle="tab"
                          href="#ex3-tabs-two"
                          role="tab"
                          aria-controls="ex3-tabs-two"
                          aria-selected="false"
                          >Details (text, icons)</a
                          >
                    </li>
                 </ul>
                 
                
                <div class="tab-content" id="ex3-content">
                    <div
                       class="tab-pane fade show active"
                       id="ex3-tabs-one"
                       role="tabpanel"
                       aria-labelledby="ex3-tab-one"
                       >
                       {{adminform.form.locationbar_bg_color}}
                    </div>
                    <div class="tab-pane fade" id="ex3-tabs-two" role="tabpanel" aria-labelledby="ex3-tab-two">
                        {{adminform.form.locationbar_element_color}}
                    </div>
                </div>
            </div>
        <br/>
            <div class="box-theme-form-devider button-layout">
            </div>
            <div class="box-theme-title">
                Logo
            </div>
            <div class="box-theme-help-text">
                Select a logo to display on the header or upload an additional one.
            </div>
            <div class="box-theme-form-item">
                <div class="form-upload">
                    <p>Drop files or click to upload</p>
                    <button class="btn-theme btn-shape-1 btn-style-1 btn-color-1" style="background:#12BBD2;">Upload Image</button>
                    <div class="area">
                        <input type="file" name="logo-upload" id="logo-upload" />
                    </div>
                </div>
            </div>

            <input type="hidden" value="{{adminform.form.logo.value}}" name="{{adminform.form.logo.name}}" id="{{adminform.form.logo.name}}">
            {% if adminform.form.logo.errors %}
                {% for error in adminform.form.logo.errors  %}
                    <div class="alert alert-danger error-block" role="alert">
                        {{error}}
                    </div>
                {% endfor %}
            {% endif %}
            <div class="box-theme-preview-list">
                <ul class="logo-preview-section">
                    {% for logo in logos %}
                        <li onclick="setLogoValue({{logo.id}})" class="image-preview-list {% if logo == adminform.form.instance.logo %}activelayout{% endif %}"><img src="{{logo.image.url}}" alt="">
                        <button onclick="deleteHeaderImage(this,{{logo.id}})" type="button">
                            <img src="{% static 'images/ic-delete.svg' %}" alt="">
                        </button></li>
                    {% endfor %}
                </ul>
            </div>
            <div class="box-theme-form-devider button-layout">
            </div>

            <div class = "admin-form checkbox_quick_links inp-placehoder">
                {% include "plugins/header/page_dropdown.html" with pages=page_tree avl_link=available_links counter=0 draft_pages=draft_pages external_links=external_links %}
                {% for data in external_links %}
                {% if data.childId == None %}

                <div class="form-check checkbox-outer align-items-center p-0 external {{data.parentId}}">
                    <input class="form-check-input custom-checkbox m-0" name="external_links" type="checkbox" value="{{data.parentId}}" id="id_quick_links_{{data.parentId}}" {% if data.parentId in available_links %}checked {% endif %} >
                    <div class="box-theme-form-item-inline pos-wc">
                        <input class="form-input ext_link_name" type="text" id="ext_link_name_{{data.parentId}}" name="ext_link_name_{{data.parentId}}" value="{{data.exernal_link_name}}" placeholder="Link name" required=""> 
                        <div class="l_ext_link_name_{{data.parentId}} word_count">0/20</div> 
                    </div>
                    <div class="box-theme-form-item-inline select-class">
                        <select class="form-select" name="button_target_{{data.parentId}}" value="_self" id="id_button_target_{{data.parentId}}" >
                            <option value="_self"  {% if data.exernal_target == '_self'%}selected{% endif %}>Current Tab</option>
                            <option value="_blank" {% if data.exernal_target == '_blank'%}selected {% endif %}>New Tab</option>
                        </select>
                    </div> 
                    
                    <div class="quick_links_{{data.parentId}}" data-value="id_quick_links_{{data.parentId}}" onclick="deleteQlink(this)">
                        <a id="delAnchor-1" class="del-anchor" href="javascript:void(0);"> <svg width="24" height="24" viewBox="2 2 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 6H14C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4C11.4696 4 10.9609 4.21071 10.5858 4.58579C10.2107 4.96086 10 5.46957 10 6ZM8 6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6H21C21.2652 6 21.5196 6.10536 21.7071 6.29289C21.8946 6.48043 22 6.73478 22 7C22 7.26522 21.8946 7.51957 21.7071 7.70711C21.5196 7.89464 21.2652 8 21 8H20.118L19.232 18.34C19.1468 19.3385 18.69 20.2686 17.9519 20.9463C17.2137 21.6241 16.2481 22.0001 15.246 22H8.754C7.75191 22.0001 6.78628 21.6241 6.04815 20.9463C5.31002 20.2686 4.85318 19.3385 4.768 18.34L3.882 8H3C2.73478 8 2.48043 7.89464 2.29289 7.70711C2.10536 7.51957 2 7.26522 2 7C2 6.73478 2.10536 6.48043 2.29289 6.29289C2.48043 6.10536 2.73478 6 3 6H8ZM15 12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17C14.2652 17 14.5196 16.8946 14.7071 16.7071C14.8946 16.5196 15 16.2652 15 16V12ZM10 11C10.2652 11 10.5196 11.1054 10.7071 11.2929C10.8946 11.4804 11 11.7348 11 12V16C11 16.2652 10.8946 16.5196 10.7071 16.7071C10.5196 16.8946 10.2652 17 10 17C9.73478 17 9.48043 16.8946 9.29289 16.7071C9.10536 16.5196 9 16.2652 9 16V12C9 11.7348 9.10536 11.4804 9.29289 11.2929C9.48043 11.1054 9.73478 11 10 11ZM6.76 18.17C6.8026 18.6694 7.03117 19.1346 7.40044 19.4735C7.76972 19.8124 8.25278 20.0003 8.754 20H15.246C15.7469 19.9998 16.2294 19.8117 16.5983 19.4728C16.9671 19.134 17.1954 18.6691 17.238 18.17L18.11 8H5.89L6.762 18.17H6.76Z" fill="#12BBD2"></path>
                            </svg>
                        </a>
                    </div>
                    <div class=""></div>
                    <div class = "opt_link_outer">
                        <div class="admin-form  horizontal-checkbox ">

                            <div class="form-check radio-outer d-flex align-items-center p-0 gap-2">
                                <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field_{{data.parentId}}" onclick = "selectRadioOption(this)" id="internal_link_choice_field_{{data.parentId}}" value="internal" "{% if data.exernal_type == 'internal' %} checked {% endif%}">
                                <label class="form-check-label custom-radio-label ml-2" for="internal_link_choice_field_{{data.parentId}}">
                                    Internal link
                                </label>
                                <div class="box-theme-form-label">
                                <span style="position:relative;">
                                    <img src="/static/images/ic-info.svg" class="abs_meg_icon">
                                    <div class="form-tooltip">
                                        An internal link is a link to an existing page on your website. When an internal link button is clicked, the page will open in the same tab.
                                    </div>
                                </span>
                            </div>
                            </div>
                        
                            <div class="form-check radio-outer d-flex align-items-center p-0 gap-2">
                                <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field_{{data.parentId}}" onclick = "selectRadioOption(this)" id="external_link_choice_field_{{data.parentId}}" value="external" "{% if data.exernal_type == 'external' %} checked {% endif%}">
                                <label class="form-check-label custom-radio-label ml-2" for="external_link_choice_field_{{data.parentId}}">
                                    External link
                                </label>
                                <div class="box-theme-form-label">
                                <span style="position:relative;">
                                    <img src="/static/images/ic-info.svg" class = "abs_meg_icon">
                                    <div class="form-tooltip">
                                        An external link is a link that directs users away from your website. When an external link button is clicked, the page will open in a new window or tab.
                                    </div>
                                </span>
                            </div>
                            </div>
                        
                        </div>
                    </div>
                    <div class="box-theme-form-item-inline select-class " id = "internal" style = "display : {% if data.exernal_type == "internal" %}block{%else%}none{%endif%}">
                        
                        <select class="form-select" name="button_internallink_{{data.parentId}}" id="button_internallink_{{data.parentId}}">
                            <option value = "">------</option>
                            {% for draft_data in draft_pages%}
                                <option value="{{draft_data.2}}" {% if draft_data.2|slugify == data.internal_link_id%} selected {%endif%}>{{draft_data.0}}</option>
                            {%endfor%}
                        </select>
                    </div>
                    <div class="box-theme-form-item-inline " id = "external" style = "display : {% if data.exernal_type == "external" %}block{%else%}none{%endif%}">
                        <input class="form-input ext_link_url" type="text" id="ext_link_url_{{data.parentId}}" name="ext_link_url_{{data.parentId}}" value="{{data.exernal_link_url|default:''}}" placeholder="http://" required=""> 
                    </div>
                    
                </div>

                {% endif %}
                {% endfor %}
            </div>
            <div class="col-2 box-theme-sub-title">
                <div class = 'd-flex add_btn'>
                    <span>+</span>
                    <a id="id_add_btn" href="javascript:void(0);" onclick="AddExternalLink(this, endata = '', eldata = '', checked = '',link_target = '_self', save_flag = true, last = true)">Add Link</a>
                </div>
            </div>
            <div class="box-theme-form-devider button-layout mt-40">
            </div>
            <div class="box-theme-form-item">
                {{adminform.form.phonenumber_layout}}
                {% if adminform.form.phonenumber_layout.errors %}
                    {% for error in adminform.form.phonenumber_layout.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="box-theme-form-devider button-layout">
            </div>
            <div class="box-theme-form-item">
                {{adminform.form.socialicon_display}}
                {% if adminform.form.socialicon_display.errors %}
                    {% for error in adminform.form.socialicon_display.errors  %}
                        <div class="alert alert-danger error-block" role="alert">
                            {{error}}
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="box-theme-form-devider button-layout">
            </div>
            <div class="box-theme-form-item">
               {{adminform.form.is_contactus_menu}}
            </div>
            <div class="box-theme-form-devider button-layout">
            </div>

            <div>
                <div class="box-theme-title puthere">
                    Preview
                </div>
                <div class="d-flex" style="justify-content : space-between;">
                   
                  <div class="col-6">
                   <ul class="theme-tab-layout">
                        <li class="active btn_style_1_layout" data-target="btn_style_1_layout"><img src="{% static 'images/widget_image/bannerplugin/ph_monitor_enable.svg'%}" alt="">
                        <li class="btn_color_1_layout" data-target="btn_color_1_layout"><img src="{% static 'images/widget_image/bannerplugin/icons8_iphone.svg'%}" alt=""></li>
                   </ul>
                  </div> 
                  <div class="col-6 d-flex" style="justify-content : end;gap: 12px;">
                  </div>
                </div>
            </div>
            <br>

            <div id = "btn_style_1_layout">
            {% include 'plugins/header/header_plugin.html' %}
            </div>
            <div id = "btn_color_1_layout" class="d-none">
                {% include 'plugins/header/header_plugin.html' %}
            </div>
            
        {% block submit_buttons_bottom %}{% submit_row %}{% endblock %}
    </form>

    {% addtoblock 'js' %}

    <script type="text/javascript">

        function setLogoValue(id){
            $('#{{adminform.form.logo.name}}').val(id)
            setHeaderPreview()
        }

        // ==========================================================================

        Coloris({
            el: '.coloris'
        });
        Coloris.setInstance('.instance1', {
            theme: 'default',
            format: 'hex',
        })

        // ==========================================================================

        function initHeaderLogoclick(){
            $(".logo-preview-section li").on("click", function() {
                $(this).siblings().removeClass("activelayout");
                $(this).addClass("activelayout");
                setHeaderPreview()
            })
        }

        $(document).ready(function () {
            $(".theme-tab li").on("click", function() {
                var target_box = $(this).data("target");
                $(this).siblings().removeClass("active");
                $(this).addClass("active");
                $(this).parents(".box-theme-tab-wrap").find(".box-theme-form-item").hide();
                $("#" + target_box).show();
            })
            $(".theme-color-tab li").on("click", function () {
                $(this).siblings().removeClass("active");
                $(this).addClass("active");
                let x = $(this).attr("data-value");
                if (x){
                    $('#instance1').val(x)
                    $(this).parent().siblings().val(x);
                }
                setHeaderPreview();
            })
            initHeaderLogoclick();
            $('ul.page-header-menu li ul').hide()
            $('#btn_color_1_layout #myLinks li.has-sub-menu ul').hide()
            setHeaderPreview();
        })

        // ==========================================================================

        var upload2 = document.getElementById('logo-upload');

        {% comment %} function bannerImageSet(uploadFile) {
            var me = this,
                file = uploadFile.files[0];
        } {% endcomment %}

        if (upload2) {
            upload2.addEventListener('dragenter', function (e) {
                upload2.parentNode.className = 'area dragging';
            }, false);

            upload2.addEventListener('dragleave', function (e) {
                upload2.parentNode.className = 'area';
            }, false);

            upload2.addEventListener('dragdrop', function (e) {
                logoUpload(upload2);
            }, false);

            upload2.addEventListener('change', function (e) {
                logoUpload(upload2);
            }, false);
        }

        function logoUpload(uploadFile) {
            var me = this,
                file = uploadFile.files[0];

            var url = "{% url 'themeimage-url' %}"

            const formData = new FormData();
            formData.append('logoimage', file);
            formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');

            $.ajax({
                url: "{% url 'themeimage-url' %}",
                type: 'post',
                data: formData,
                cache: false,
                processData: false,
                contentType: false,
                success: function(data){
                    var data = JSON.parse(data);
                    var preview = $('.logo-preview-section')
                    preview.append(`
                        <li onclick="setLogoValue(${data['id']})" class="image-preview-list"><img src="${data['url']}" alt=""></li>
                    `)
                    initHeaderLogoclick();
                }
            });
        }
        //==========================================================================

        function setHeaderPreview(){

            // change the logo
            $('.page-header-left img').attr('src',$('.image-preview-list.activelayout img').attr('src'));

            let layout = document.querySelector('input[id="layout_group"]:checked').value

            // change the layout color upper part
            $('.page-header .header-style-1').css({"background":$("#id_background_color").val()});
            $('.page-header.mobile').css({"background":$("#id_background_color").val()});

            $('.menu-container .child a,.menu-container .child button').css({"color":$("#id_element_color").val()});
            let element_color = $("#id_element_color").val();
            if (layout == 'LAYOUT1') { 
            $('.page-header-top .page-header-right').empty()
            $('.container.menu-container').siblings().remove()
            // add the social media 
            $('.page-header-top .page-header-right').append(`
                    <div class="page-header-contact px-3">
                                
                                <svg class="phone-icon-color" width="24" height="24" style="display : none; fill : ${element_color}!important;">
                                    <use xlink:href="#ic-phone"></use>
                                </svg>
                                
                                <div class = "store-number1" style = "color : ${element_color}">Your Store's Number</div>
                    </div>
                    <div class="page-header-social" style = "display : none;">
                                
                        <div class="dropdown header-drop-menu">
                            <button class="btn dropdown-toggle dropmenubtn " id="drop-btn" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="social-links-dropdown" style = " content: ' (after)'; color: ${element_color};">
                                
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="${element_color}" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6.99984 15.1667C3.77835 15.1667 1.1665 17.7943 1.1665 21.0352C1.1665 23.9639 3.29938 26.3914 6.08858 26.8334V22.732H4.60676V21.0352H6.08858V19.7423C6.08858 18.2703 6.95958 17.4586 8.29147 17.4586C8.9297 17.4586 9.59826 17.573 9.59826 17.573V19.0163H8.86086C8.13745 19.0163 7.91109 19.4693 7.91109 19.9336V21.0341H9.52767L9.26923 22.7308H7.91109V26.8322C10.7003 26.3926 12.8332 23.9645 12.8332 21.0352C12.8332 17.7943 10.2213 15.1667 6.99984 15.1667V15.1667Z" fill="element_color"></path>
                                    <path d="M11.6346 4.65934C11.6423 4.76166 11.6423 4.86341 11.6423 4.96515C11.6423 8.07879 9.23617 11.6666 4.8389 11.6666C3.48416 11.6666 2.2256 11.2801 1.1665 10.6089C1.35885 10.6305 1.54407 10.6381 1.74414 10.6381C2.82044 10.6407 3.86627 10.2862 4.71305 9.63181C4.21403 9.62292 3.73028 9.46076 3.32936 9.16797C2.92844 8.87519 2.63035 8.4664 2.47672 7.99869C2.62454 8.02032 2.77296 8.03494 2.9285 8.03494C3.14281 8.03494 3.35831 8.0057 3.55837 7.95483C3.01681 7.84713 2.52984 7.55801 2.18025 7.13662C1.83067 6.71523 1.64006 6.18759 1.64084 5.64342V5.61419C1.95964 5.78902 2.32949 5.89836 2.72131 5.91298C2.39306 5.69815 2.12392 5.40663 1.93787 5.06443C1.75183 4.72223 1.65468 4.33999 1.65509 3.95182C1.65509 3.51445 1.77323 3.11333 1.98042 2.76367C2.58129 3.49166 3.3307 4.08722 4.18014 4.51179C5.02957 4.93635 5.96007 5.18045 6.91138 5.22827C6.87457 5.05286 6.85201 4.87101 6.85201 4.68857C6.85186 4.37923 6.9136 4.0729 7.03372 3.78707C7.15384 3.50125 7.32997 3.24155 7.55205 3.02281C7.77414 2.80407 8.03781 2.63059 8.328 2.51228C8.6182 2.39398 8.92922 2.33316 9.24329 2.33331C9.93194 2.33331 10.5535 2.61749 10.9904 3.07708C11.5258 2.97511 12.0392 2.78263 12.5078 2.50815C12.3294 3.05241 11.9556 3.51393 11.4565 3.80623C11.9313 3.75289 12.3953 3.62991 12.8332 3.44136C12.5061 3.91095 12.1009 4.32274 11.6346 4.65934V4.65934Z" fill="${element_color}"></path>
                                    <g clip-path="url(#clip0_3850_19313)">
                                    <path d="M26.7956 18.6102C26.7891 18.1203 26.6972 17.6353 26.5241 17.1769C26.3741 16.7902 26.1448 16.439 25.8511 16.1458C25.5574 15.8526 25.2056 15.6237 24.8183 15.4739C24.365 15.304 23.8862 15.2122 23.4021 15.2023C22.7789 15.1744 22.5813 15.1667 20.9992 15.1667C19.4171 15.1667 19.2143 15.1667 18.5956 15.2023C18.1118 15.2123 17.6331 15.3041 17.1801 15.4739C16.7927 15.6236 16.4409 15.8524 16.1471 16.1457C15.8534 16.4389 15.6242 16.7901 15.4742 17.1769C15.3037 17.6291 15.2119 18.107 15.2028 18.5901C15.1749 19.213 15.1665 19.4102 15.1665 20.9897C15.1665 22.5691 15.1665 22.7709 15.2028 23.3892C15.2125 23.873 15.3039 24.3504 15.4742 24.8038C15.6245 25.1904 15.8538 25.5415 16.1476 25.8346C16.4415 26.1277 16.7933 26.3564 17.1807 26.5061C17.6325 26.6828 18.1113 26.7812 18.5963 26.7971C19.2202 26.8249 19.4178 26.8334 20.9998 26.8334C22.5819 26.8334 22.7847 26.8334 23.4034 26.7971C23.8874 26.7876 24.3664 26.696 24.8196 26.5261C25.2068 26.3761 25.5585 26.1472 25.8522 25.854C26.1459 25.5608 26.3752 25.2097 26.5254 24.8232C26.6958 24.3704 26.7872 23.8931 26.7969 23.4086C26.8247 22.7864 26.8332 22.5892 26.8332 21.0091C26.8319 19.4296 26.8319 19.2291 26.7956 18.6102V18.6102ZM20.9953 23.9765C19.3407 23.9765 18.0002 22.6383 18.0002 20.9864C18.0002 19.3346 19.3407 17.9964 20.9953 17.9964C21.7896 17.9964 22.5514 18.3114 23.1131 18.8721C23.6748 19.4329 23.9904 20.1934 23.9904 20.9864C23.9904 21.7795 23.6748 22.54 23.1131 23.1007C22.5514 23.6615 21.7896 23.9765 20.9953 23.9765V23.9765ZM24.1096 18.583C24.0178 18.5831 23.927 18.5651 23.8422 18.5301C23.7574 18.4951 23.6804 18.4437 23.6155 18.379C23.5507 18.3142 23.4992 18.2373 23.4642 18.1527C23.4291 18.0681 23.4111 17.9773 23.4112 17.8858C23.4112 17.7942 23.4292 17.7036 23.4643 17.6191C23.4994 17.5345 23.5508 17.4577 23.6156 17.393C23.6805 17.3283 23.7574 17.2769 23.8421 17.2419C23.9268 17.2069 24.0176 17.1889 24.1092 17.1889C24.2009 17.1889 24.2917 17.2069 24.3764 17.2419C24.4611 17.2769 24.538 17.3283 24.6029 17.393C24.6677 17.4577 24.7191 17.5345 24.7542 17.6191C24.7893 17.7036 24.8073 17.7942 24.8073 17.8858C24.8073 18.2712 24.495 18.583 24.1096 18.583Z" fill="${element_color}"></path>
                                    <path d="M21 22.75C21.9665 22.75 22.75 21.9665 22.75 21C22.75 20.0335 21.9665 19.25 21 19.25C20.0335 19.25 19.25 20.0335 19.25 21C19.25 21.9665 20.0335 22.75 21 22.75Z" fill="${element_color}"></path>
                                    </g>
                                    <path d="M16.8006 10.7706H18.5557V5.49781H16.8006V10.7706ZM18.6697 3.87191C18.6646 3.60853 18.5734 3.39073 18.3962 3.21852C18.2189 3.0463 17.9833 2.9602 17.6896 2.9602C17.3958 2.9602 17.1565 3.0463 16.9716 3.21852C16.7867 3.39073 16.6943 3.60853 16.6943 3.87191C16.6943 4.13023 16.7842 4.34677 16.964 4.52151C17.1438 4.69626 17.3781 4.78363 17.6668 4.78363H17.6744C17.9732 4.78363 18.2138 4.69626 18.3962 4.52151C18.5785 4.34677 18.6697 4.13023 18.6697 3.87191ZM23.1143 10.7706H24.8694V7.74672C24.8694 6.96669 24.6845 6.37661 24.3147 5.97646C23.945 5.57632 23.4562 5.37625 22.8484 5.37625C22.1595 5.37625 21.6302 5.67256 21.2605 6.26518H21.2757V5.49781H19.5206C19.5358 5.83211 19.5358 7.5897 19.5206 10.7706H21.2757V7.8227C21.2757 7.63022 21.2934 7.4884 21.3288 7.39723C21.4048 7.21995 21.5188 7.06926 21.6707 6.94517C21.8227 6.82107 22.0101 6.75902 22.233 6.75902C22.8205 6.75902 23.1143 7.15663 23.1143 7.95186V10.7706ZM26.67 3.18813V10.4819C26.67 11.0846 26.456 11.6 26.028 12.028C25.6 12.456 25.0846 12.67 24.4819 12.67H17.1881C16.5854 12.67 16.07 12.456 15.642 12.028C15.214 11.6 15 11.0846 15 10.4819V3.18813C15 2.58538 15.214 2.07 15.642 1.642C16.07 1.214 16.5854 1 17.1881 1H24.4819C25.0846 1 25.6 1.214 26.028 1.642C26.456 2.07 26.67 2.58538 26.67 3.18813Z" fill="${element_color}"></path>
                                    <defs>
                                    <clipPath id="clip0_3850_19313">
                                    <rect width="14" height="14" fill="${element_color}" transform="translate(14 14)"></rect>
                                    </clipPath>
                                    </defs>
                                </svg>
                            </button>
                        </div>
                    </div>
                    `)
                    }
                else if ( layout == 'LAYOUT3'){
                    $('.page-header-top .page-header-right').empty()

                    // add the social media
                    $('.page-header-top .page-header-right').append(`
                            <div class="page-header-contact px-3">
                                        
                                <svg class="phone-icon-color" width="24" height="24" style="fill : ${element_color}!important;">
                                    <use xlink:href="#ic-phone"></use>
                                </svg>
                                
                                <div class = "store-number1" style = "color : ${element_color}">Your Store's Number</div>
                            </div>

                            <div class="page-header-social" style = "display : none;">
                                        
                                <div class="dropdown header-drop-menu">
                                    <button class="btn dropdown-toggle dropmenubtn " id="drop-btn" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="social-links-dropdown" style = " content: ' (after)'; color: ${element_color};">
                                        
                                        <svg width="28" height="28" viewBox="0 0 28 28" fill="#ffffffff" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M6.99984 15.1667C3.77835 15.1667 1.1665 17.7943 1.1665 21.0352C1.1665 23.9639 3.29938 26.3914 6.08858 26.8334V22.732H4.60676V21.0352H6.08858V19.7423C6.08858 18.2703 6.95958 17.4586 8.29147 17.4586C8.9297 17.4586 9.59826 17.573 9.59826 17.573V19.0163H8.86086C8.13745 19.0163 7.91109 19.4693 7.91109 19.9336V21.0341H9.52767L9.26923 22.7308H7.91109V26.8322C10.7003 26.3926 12.8332 23.9645 12.8332 21.0352C12.8332 17.7943 10.2213 15.1667 6.99984 15.1667V15.1667Z" fill="${element_color}"></path>
                                            <path d="M11.6346 4.65934C11.6423 4.76166 11.6423 4.86341 11.6423 4.96515C11.6423 8.07879 9.23617 11.6666 4.8389 11.6666C3.48416 11.6666 2.2256 11.2801 1.1665 10.6089C1.35885 10.6305 1.54407 10.6381 1.74414 10.6381C2.82044 10.6407 3.86627 10.2862 4.71305 9.63181C4.21403 9.62292 3.73028 9.46076 3.32936 9.16797C2.92844 8.87519 2.63035 8.4664 2.47672 7.99869C2.62454 8.02032 2.77296 8.03494 2.9285 8.03494C3.14281 8.03494 3.35831 8.0057 3.55837 7.95483C3.01681 7.84713 2.52984 7.55801 2.18025 7.13662C1.83067 6.71523 1.64006 6.18759 1.64084 5.64342V5.61419C1.95964 5.78902 2.32949 5.89836 2.72131 5.91298C2.39306 5.69815 2.12392 5.40663 1.93787 5.06443C1.75183 4.72223 1.65468 4.33999 1.65509 3.95182C1.65509 3.51445 1.77323 3.11333 1.98042 2.76367C2.58129 3.49166 3.3307 4.08722 4.18014 4.51179C5.02957 4.93635 5.96007 5.18045 6.91138 5.22827C6.87457 5.05286 6.85201 4.87101 6.85201 4.68857C6.85186 4.37923 6.9136 4.0729 7.03372 3.78707C7.15384 3.50125 7.32997 3.24155 7.55205 3.02281C7.77414 2.80407 8.03781 2.63059 8.328 2.51228C8.6182 2.39398 8.92922 2.33316 9.24329 2.33331C9.93194 2.33331 10.5535 2.61749 10.9904 3.07708C11.5258 2.97511 12.0392 2.78263 12.5078 2.50815C12.3294 3.05241 11.9556 3.51393 11.4565 3.80623C11.9313 3.75289 12.3953 3.62991 12.8332 3.44136C12.5061 3.91095 12.1009 4.32274 11.6346 4.65934V4.65934Z" fill="${element_color}"></path>
                                            <g clip-path="url(#clip0_3850_19313)">
                                            <path d="M26.7956 18.6102C26.7891 18.1203 26.6972 17.6353 26.5241 17.1769C26.3741 16.7902 26.1448 16.439 25.8511 16.1458C25.5574 15.8526 25.2056 15.6237 24.8183 15.4739C24.365 15.304 23.8862 15.2122 23.4021 15.2023C22.7789 15.1744 22.5813 15.1667 20.9992 15.1667C19.4171 15.1667 19.2143 15.1667 18.5956 15.2023C18.1118 15.2123 17.6331 15.3041 17.1801 15.4739C16.7927 15.6236 16.4409 15.8524 16.1471 16.1457C15.8534 16.4389 15.6242 16.7901 15.4742 17.1769C15.3037 17.6291 15.2119 18.107 15.2028 18.5901C15.1749 19.213 15.1665 19.4102 15.1665 20.9897C15.1665 22.5691 15.1665 22.7709 15.2028 23.3892C15.2125 23.873 15.3039 24.3504 15.4742 24.8038C15.6245 25.1904 15.8538 25.5415 16.1476 25.8346C16.4415 26.1277 16.7933 26.3564 17.1807 26.5061C17.6325 26.6828 18.1113 26.7812 18.5963 26.7971C19.2202 26.8249 19.4178 26.8334 20.9998 26.8334C22.5819 26.8334 22.7847 26.8334 23.4034 26.7971C23.8874 26.7876 24.3664 26.696 24.8196 26.5261C25.2068 26.3761 25.5585 26.1472 25.8522 25.854C26.1459 25.5608 26.3752 25.2097 26.5254 24.8232C26.6958 24.3704 26.7872 23.8931 26.7969 23.4086C26.8247 22.7864 26.8332 22.5892 26.8332 21.0091C26.8319 19.4296 26.8319 19.2291 26.7956 18.6102V18.6102ZM20.9953 23.9765C19.3407 23.9765 18.0002 22.6383 18.0002 20.9864C18.0002 19.3346 19.3407 17.9964 20.9953 17.9964C21.7896 17.9964 22.5514 18.3114 23.1131 18.8721C23.6748 19.4329 23.9904 20.1934 23.9904 20.9864C23.9904 21.7795 23.6748 22.54 23.1131 23.1007C22.5514 23.6615 21.7896 23.9765 20.9953 23.9765V23.9765ZM24.1096 18.583C24.0178 18.5831 23.927 18.5651 23.8422 18.5301C23.7574 18.4951 23.6804 18.4437 23.6155 18.379C23.5507 18.3142 23.4992 18.2373 23.4642 18.1527C23.4291 18.0681 23.4111 17.9773 23.4112 17.8858C23.4112 17.7942 23.4292 17.7036 23.4643 17.6191C23.4994 17.5345 23.5508 17.4577 23.6156 17.393C23.6805 17.3283 23.7574 17.2769 23.8421 17.2419C23.9268 17.2069 24.0176 17.1889 24.1092 17.1889C24.2009 17.1889 24.2917 17.2069 24.3764 17.2419C24.4611 17.2769 24.538 17.3283 24.6029 17.393C24.6677 17.4577 24.7191 17.5345 24.7542 17.6191C24.7893 17.7036 24.8073 17.7942 24.8073 17.8858C24.8073 18.2712 24.495 18.583 24.1096 18.583Z" fill="${element_color}"></path>
                                            <path d="M21 22.75C21.9665 22.75 22.75 21.9665 22.75 21C22.75 20.0335 21.9665 19.25 21 19.25C20.0335 19.25 19.25 20.0335 19.25 21C19.25 21.9665 20.0335 22.75 21 22.75Z" fill="${element_color}"></path>
                                            </g>
                                            <path d="M16.8006 10.7706H18.5557V5.49781H16.8006V10.7706ZM18.6697 3.87191C18.6646 3.60853 18.5734 3.39073 18.3962 3.21852C18.2189 3.0463 17.9833 2.9602 17.6896 2.9602C17.3958 2.9602 17.1565 3.0463 16.9716 3.21852C16.7867 3.39073 16.6943 3.60853 16.6943 3.87191C16.6943 4.13023 16.7842 4.34677 16.964 4.52151C17.1438 4.69626 17.3781 4.78363 17.6668 4.78363H17.6744C17.9732 4.78363 18.2138 4.69626 18.3962 4.52151C18.5785 4.34677 18.6697 4.13023 18.6697 3.87191ZM23.1143 10.7706H24.8694V7.74672C24.8694 6.96669 24.6845 6.37661 24.3147 5.97646C23.945 5.57632 23.4562 5.37625 22.8484 5.37625C22.1595 5.37625 21.6302 5.67256 21.2605 6.26518H21.2757V5.49781H19.5206C19.5358 5.83211 19.5358 7.5897 19.5206 10.7706H21.2757V7.8227C21.2757 7.63022 21.2934 7.4884 21.3288 7.39723C21.4048 7.21995 21.5188 7.06926 21.6707 6.94517C21.8227 6.82107 22.0101 6.75902 22.233 6.75902C22.8205 6.75902 23.1143 7.15663 23.1143 7.95186V10.7706ZM26.67 3.18813V10.4819C26.67 11.0846 26.456 11.6 26.028 12.028C25.6 12.456 25.0846 12.67 24.4819 12.67H17.1881C16.5854 12.67 16.07 12.456 15.642 12.028C15.214 11.6 15 11.0846 15 10.4819V3.18813C15 2.58538 15.214 2.07 15.642 1.642C16.07 1.214 16.5854 1 17.1881 1H24.4819C25.0846 1 25.6 1.214 26.028 1.642C26.456 2.07 26.67 2.58538 26.67 3.18813Z" fill="${element_color}"></path>
                                            <defs>
                                            <clipPath id="clip0_3850_19313">
                                            <rect width="14" height="14" fill="${element_color}" transform="translate(14 14)"></rect>
                                            </clipPath>
                                            </defs>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            `)
                            $('.page-header-bottom.style-2').remove()
                            $('.desktop.pageview').append(
                            `
                            <div class="page-header-bottom style-2">
                                <div class="container">
                                    <div class="page-header-bottom-inner px-3">
                                        <div class="page-header-bottom-left">
                                            <ul class="page-header-bottom-menu">
                                                <li class="d-none">
                                                    <a href="javascript:void(0);" aria-label="location">
                                                        <div>
                                                            <svg class="fill-stroke" width="28" height="28" style="fill:#003F5A;stroke:#ffffff">
                                                                <use xlink:href="#ic-loc-box"></use>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            How do you want your item ?
                                                        </div>
                                                    </a>
                                                </li>
                                                <li class="has-sub-menu">
                                                    <a href="javascript:;" aria-label="account-login" role = "button">
                                                        <div>
                                                        <svg class="only-fill" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                        <path d="M19.9923 5.01074L18.5648 0.510991C18.5152 0.355764 18.4185 0.221884 18.2896 0.129798C18.1607 0.0377128 18.0067 -0.00751614 17.8511 0.00101991H2.14892C1.99328 -0.00751614 1.83925 0.0377128 1.71037 0.129798C1.58149 0.221884 1.48484 0.355764 1.43518 0.510991L0.00771216 5.01074C-0.00257072 5.09037 -0.00257072 5.17109 0.00771216 5.25072V9.75047C0.00771216 9.94937 0.082909 10.1401 0.21676 10.2808C0.350611 10.4214 0.532153 10.5004 0.721447 10.5004H1.43518V17.2992C1.43518 17.6863 1.75473 18 2.14892 18C2.5431 18 2.86265 17.6863 2.86265 17.2992V10.5004H7.14506V17.0455C7.14506 17.5726 7.58034 18 8.11728 18H17.5926C18.1295 18 18.5648 17.5726 18.5648 17.0455V10.5004H19.2786C19.4678 10.5004 19.6494 10.4214 19.7832 10.2808C19.9171 10.1401 19.9923 9.94937 19.9923 9.75047V5.25072C20.0026 5.17109 20.0026 5.09037 19.9923 5.01074ZM17.1373 16.5001H8.57253V10.5004H17.1373V16.5001ZM18.5648 8.52324C18.5648 8.78683 18.3472 9.00051 18.0787 9.00051H16.196C15.9275 9.00051 15.7099 8.78683 15.7099 8.52324V6.70144C15.7099 6.31442 15.3903 6.00068 14.9961 6.00068C14.602 6.00068 14.2824 6.31442 14.2824 6.70144V8.52324C14.2824 8.78683 14.0648 9.00051 13.7963 9.00051H11.1998C10.9314 9.00051 10.7137 8.78683 10.7137 8.52324V6.70144C10.7137 6.31442 10.3942 6.00068 10 6.00068C9.60581 6.00068 9.28627 6.31442 9.28627 6.70144V8.52324C9.28627 8.78683 9.06863 9.00051 8.80015 9.00051H6.2037C5.93523 9.00051 5.71759 8.78683 5.71759 8.52324V6.70144C5.71759 6.31442 5.39804 6.00068 5.00386 6.00068C4.60967 6.00068 4.29012 6.31442 4.29012 6.70144V8.52324C4.29012 8.78683 4.07248 9.00051 3.80401 9.00051H1.92129C1.65282 9.00051 1.43518 8.78683 1.43518 8.52324V5.37072L2.66281 1.50093H17.3372L18.5648 5.37072V8.52324Z"></path>
                                                        </svg>
                                                        </div>
                                                        <div class="dropdown-icon">
                                                        <span class="header_store_name">Store name</span>
                                                        <svg class="only-fill" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M15.9449 10.2295L11.9991 14.9426L8.05512 10.2295C7.99545 10.1581 7.9194 10.1003 7.83268 10.0606C7.74596 10.0208 7.65081 10.0001 7.55438 10L6.15992 10C6.02626 10 5.95244 10.1449 6.03424 10.2427L11.4982 16.7714C11.7555 17.0762 12.2463 17.0762 12.5016 16.7714L17.9658 10.2427C18.0476 10.1449 17.9737 10 17.8401 10L16.4456 10C16.3492 10.0001 16.254 10.0208 16.1673 10.0606C16.0806 10.1003 16.0045 10.1581 15.9449 10.2295Z"></path>
                                                                        </svg>
                                                        </div>
                                                    </a>
                                                </li>
                                                
                                                    <li class="has-sub-menu">
                                                        <a href="javascript:void(0);">
                                                            <div>
                                                            
                                                                <svg class="only-fill" width="24" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.1419 21.3683C16.6126 19.1655 21 14.677 21 10.5713C21 9.44571 20.7801 8.33113 20.353 7.29121C19.9258 6.25129 19.2997 5.3064 18.5104 4.51048C17.7211 3.71456 16.7841 3.0832 15.7528 2.65245C14.7215 2.2217 13.6162 2 12.5 2C11.3838 2 10.2785 2.2217 9.24719 2.65245C8.21592 3.0832 7.27889 3.71456 6.48959 4.51048C5.70029 5.3064 5.07419 6.25129 4.64702 7.29121C4.21986 8.33113 4 9.44571 4 10.5713C4 14.677 8.38742 19.1655 10.8581 21.3683C11.3098 21.7751 11.8943 22 12.5 22C13.1057 22 13.6902 21.7751 14.1419 21.3683ZM17.5087 5.52062C18.8371 6.86015 19.5833 8.67694 19.5833 10.5713C19.5833 12.1542 18.7121 13.9927 17.3592 15.8327C16.0374 17.6312 14.4026 19.2283 13.2041 20.2983C13.0112 20.4746 12.7603 20.5722 12.5 20.5722C12.2397 20.5722 11.9888 20.4746 11.7959 20.2983C10.5974 19.2283 8.964 17.6298 7.64083 15.8327C6.28792 13.9927 5.41667 12.1542 5.41667 10.5713C5.41667 8.67694 6.16294 6.86015 7.49133 5.52062C8.81971 4.18109 10.6214 3.42855 12.5 3.42855C14.3786 3.42855 16.1803 4.18109 17.5087 5.52062Z" />
                                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M15 10.5C15 11.8807 13.8807 13 12.5 13C11.1193 13 10 11.8807 10 10.5C10 9.11929 11.1193 8 12.5 8C13.8807 8 15 9.11929 15 10.5ZM12.5 11.5C13.0523 11.5 13.5 11.0523 13.5 10.5C13.5 9.94772 13.0523 9.5 12.5 9.5C11.9477 9.5 11.5 9.94772 11.5 10.5C11.5 11.0523 11.9477 11.5 12.5 11.5Z"/>
                                                                </svg>
                                                            </div>
                                                            <div>
                                                                <span id="deliveringZipCode">City, zip</span>	
                                                            </div>
                                                        </a>
                                                    </li>          
                                            </ul>
                                        </div>
                                        <div class="page-header-bottom-right">
                                            <div class="page-header-bottom-search">
                                                <input class="shop-search" type="text" placeholder="Search Products" id="global_search" readonly>
                                                <button id="global_search_btn" role="button" aria-label="Search-Button" style = "top: 0;" disabled>
                                                    <svg width="28" height="28" style="fill:#ffffff;stroke:#003F5A">
                                                        <use xlink:href="#ic-search"></use>
                                                    </svg>
                                                </button>
                                            </div>
                                            
                                            <ul class="page-header-bottom-menu">
                                                <li class="has-sub-menu menu-right">
                                                    <a href="javascript:void(0);" aria-label="account-login" role = "button">
                                                        <div>
                                                            <svg class="fill-stroke" width="26" height="24" style="fill:#003F5A;stroke:#ffffff;">
                                                                <use xlink:href="#ic-user"></use>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <svg class="only-fill" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M15.9449 10.2295L11.9991 14.9426L8.05512 10.2295C7.99545 10.1581 7.9194 10.1003 7.83268 10.0606C7.74596 10.0208 7.65081 10.0001 7.55438 10L6.15992 10C6.02626 10 5.95244 10.1449 6.03424 10.2427L11.4982 16.7714C11.7555 17.0762 12.2463 17.0762 12.5016 16.7714L17.9658 10.2427C18.0476 10.1449 17.9737 10 17.8401 10L16.4456 10C16.3492 10.0001 16.254 10.0208 16.1673 10.0606C16.0806 10.1003 16.0045 10.1581 15.9449 10.2295Z"></path>
                                                             </svg>
                                                        </div>
                                                    </a>
                                                  
                                                </li>
                                                <li>
                                                    
                                                        <a href="javascript:void(0);" style="position: relative;">
                                                            <div>
                                                                <svg class="only-fill" width="28" height="28" style="fill:#ffffff;">
                                                                    <use xlink:href="#ic-cart"></use>
                                                                </svg>
                                                            </div>
                                                            <span class="cart-count shop-card-span" id="shop-card-span" style="color:black;font-weight:900;">0</span>
                                                        </a>
                                                </li>
                                            </ul>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                            `
                        )
                }
                else{

                    $('.page-header-top .page-header-right').empty()
                    $('.page-header-bottom.style-1').remove()
                    $('.page-header-top .page-header-right').append(`
                    <div class="page-header-contact px-3">
                                
                        <svg class="phone-icon-color" width="24" height="24" style="fill : ${element_color}!important;">
                            <use xlink:href="#ic-phone"></use>
                        </svg>
                        
                        <div class = "store-number1" style = "color : ${element_color}">Your Store's Number</div>
                    </div>
                    `)
                    $('.desktop.pageview').append(`
                    <div class="page-header-bottom style-1">
                        <div class="container">
                            <div class="page-header-bottom-inner px-3">
                                
                                    <ul class="page-header-bottom-menu">
                                                <li class="has-sub-menu">
                                                    <a href="javascript:;" aria-label="account-login" role = "button">
                                                        <div>
                                                        <svg class="only-fill" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" >
                                                        <path d="M19.9923 5.01074L18.5648 0.510991C18.5152 0.355764 18.4185 0.221884 18.2896 0.129798C18.1607 0.0377128 18.0067 -0.00751614 17.8511 0.00101991H2.14892C1.99328 -0.00751614 1.83925 0.0377128 1.71037 0.129798C1.58149 0.221884 1.48484 0.355764 1.43518 0.510991L0.00771216 5.01074C-0.00257072 5.09037 -0.00257072 5.17109 0.00771216 5.25072V9.75047C0.00771216 9.94937 0.082909 10.1401 0.21676 10.2808C0.350611 10.4214 0.532153 10.5004 0.721447 10.5004H1.43518V17.2992C1.43518 17.6863 1.75473 18 2.14892 18C2.5431 18 2.86265 17.6863 2.86265 17.2992V10.5004H7.14506V17.0455C7.14506 17.5726 7.58034 18 8.11728 18H17.5926C18.1295 18 18.5648 17.5726 18.5648 17.0455V10.5004H19.2786C19.4678 10.5004 19.6494 10.4214 19.7832 10.2808C19.9171 10.1401 19.9923 9.94937 19.9923 9.75047V5.25072C20.0026 5.17109 20.0026 5.09037 19.9923 5.01074ZM17.1373 16.5001H8.57253V10.5004H17.1373V16.5001ZM18.5648 8.52324C18.5648 8.78683 18.3472 9.00051 18.0787 9.00051H16.196C15.9275 9.00051 15.7099 8.78683 15.7099 8.52324V6.70144C15.7099 6.31442 15.3903 6.00068 14.9961 6.00068C14.602 6.00068 14.2824 6.31442 14.2824 6.70144V8.52324C14.2824 8.78683 14.0648 9.00051 13.7963 9.00051H11.1998C10.9314 9.00051 10.7137 8.78683 10.7137 8.52324V6.70144C10.7137 6.31442 10.3942 6.00068 10 6.00068C9.60581 6.00068 9.28627 6.31442 9.28627 6.70144V8.52324C9.28627 8.78683 9.06863 9.00051 8.80015 9.00051H6.2037C5.93523 9.00051 5.71759 8.78683 5.71759 8.52324V6.70144C5.71759 6.31442 5.39804 6.00068 5.00386 6.00068C4.60967 6.00068 4.29012 6.31442 4.29012 6.70144V8.52324C4.29012 8.78683 4.07248 9.00051 3.80401 9.00051H1.92129C1.65282 9.00051 1.43518 8.78683 1.43518 8.52324V5.37072L2.66281 1.50093H17.3372L18.5648 5.37072V8.52324Z"></path>
                                                        </svg>
                                                        </div>
                                                        <div class="dropdown-icon">
                                                        <span class="header_store_name">Store name</span>
                                                        <svg class="only-fill" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M15.9449 10.2295L11.9991 14.9426L8.05512 10.2295C7.99545 10.1581 7.9194 10.1003 7.83268 10.0606C7.74596 10.0208 7.65081 10.0001 7.55438 10L6.15992 10C6.02626 10 5.95244 10.1449 6.03424 10.2427L11.4982 16.7714C11.7555 17.0762 12.2463 17.0762 12.5016 16.7714L17.9658 10.2427C18.0476 10.1449 17.9737 10 17.8401 10L16.4456 10C16.3492 10.0001 16.254 10.0208 16.1673 10.0606C16.0806 10.1003 16.0045 10.1581 15.9449 10.2295Z"></path>
                                                                        </svg>
                                                        </div>
                                                    </a>
                                                </li>         
                                    </ul>
                                    <div class="page-header-bottom-right">
                                        <ul class="page-header-bottom-social">

                                            {% if social_links.Facebook %}
                                            <li><a href="javascript:void(0);" title="">
                                                <svg class="layout_bar_text" width="28" height="28">
                                                    <use xlink:href="#ic-fb"></use>
                                                </svg>
                                            </a></li>
                                            {% endif %}

                                            {% if social_links.Twitter %}
                                            <li><a href="javascript:void(0);" title="">
                                                <svg class="layout_bar_text" width="28" height="28">
                                                    <use xlink:href="#ic-tw" />
                                                </svg>
                                            </a></li>
                                            {% endif %}

                                            {% if social_links.Instagram %}
                                            <li><a href="javascript:void(0);" title="">
                                                <svg class="layout_bar_text" width="28" height="28">
                                                    <use xlink:href="#ic-insta" />
                                                </svg>
                                            </a></li>
                                            {% endif %}

                                            {% if social_links.Youtube %}
                                            <li><a href="javascript:void(0);" title="">
                                                <svg class="layout_bar_text" width="28" height="28">
                                                    <use xlink:href="#ic-you" />
                                                </svg>
                                            </a></li>
                                            {% endif %}

                                        </ul>
                                    </div>
                            </div>
                        </div>
                    </div>
                    `)
                }
            // Set Layout
            if(layout == 'LAYOUT1'){
                $(".style-1").hide()
                $(".style-2").hide()
            }else if (layout == 'LAYOUT2'){
                $(".style-1").show()
                $(".style-2").hide()
            }else{
                $(".style-1").hide()
                $(".style-2").show()
            }

            // Set color
            var productbar_bg_color = $("#id_productbar_bg_color").val()
            var productbar_element_color = $("#id_productbar_element_color").val()
            var dropdown_item_color = $("#id_dropdown_item_color").val()
            $('.social-drop-icons').css({"fill":dropdown_item_color});
            let header_top_element_color = $("#id_background_color").val();
            $('.store-number').css({"color":header_top_element_color});
            
            $('.page-header-top .only-fill').css({"fill":header_top_element_color});
            
            

            social_icons = document.querySelector('input[name="socialicon_display"]:checked').value
            $('.mobile .call-icon').remove();

            let phonenumber_layout = document.querySelector('input[name="phonenumber_layout"]:checked').value
            const storenumber = `{{store_number|safe}}`
            if(storenumber != "None"){
          
                if (phonenumber_layout == 'DON’T SHOW TELEPHONE NUMBER'){
                    $(".page-header-contact .phone-icon-color").hide()
                    $(".page-header-contact .store-number1").hide()
                    $('.mobile .page-header-bottom-right').remove('a.call-icon')
                }else if (phonenumber_layout == 'ICON AND TELEPHONE NUMBER'){
                    $(".page-header-contact .phone-icon-color").show()
                    $(".page-header-contact .store-number1").show()
                    // for mobile view
                    $('.mobile .page-header-bottom-right').append(`<a class ='call-icon' href="tel:{{selected_store.store_contact}}">
                        <svg class="phone-icon-color" width="24" height="24" >
                            <use xlink:href="#ic-phone" />
                        </svg>
                    </a>`)
                }else{
                    $(".page-header-contact .phone-icon-color").show()
                    $(".page-header-contact .store-number1").hide()
                    // for mobile view
                    $('.mobile .page-header-bottom-right').append(`<a class ='call-icon' href="tel:{{selected_store.store_contact}}">
                        <svg class="phone-icon-color" width="24" height="24" >
                            <use xlink:href="#ic-phone" />
                        </svg>
                    </a>`)
                }
            }
            // FOR MOBILE VIEW  //

            // make the screen size to 375px 
            $('.mobile').attr('max-width','375px');
            $('.logo-img').attr('src',$('.image-preview-list.activelayout img').attr('src'))

            // remove the cart div 
            $('.mobile .cart-div').remove();

            // check if the layout is layout_2
            if(layout == 'LAYOUT2'){
 
                $('.mobile').append(`
                    <div class = "page-header-bottom style-1">
                        <div class = "container">
                            <div class = "page-header-bottom-inner">

                                <div class = "page-header-bottom-left">
                                   <ul class="page-header-bottom-menu">
                                   
                                                <li class="has-sub-menu">
                                                    <a href="javascript:;" aria-label="account-login" role = "button">
                                                        <div>
                                                        <svg class="only-fill" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" >
                                                        <path d="M19.9923 5.01074L18.5648 0.510991C18.5152 0.355764 18.4185 0.221884 18.2896 0.129798C18.1607 0.0377128 18.0067 -0.00751614 17.8511 0.00101991H2.14892C1.99328 -0.00751614 1.83925 0.0377128 1.71037 0.129798C1.58149 0.221884 1.48484 0.355764 1.43518 0.510991L0.00771216 5.01074C-0.00257072 5.09037 -0.00257072 5.17109 0.00771216 5.25072V9.75047C0.00771216 9.94937 0.082909 10.1401 0.21676 10.2808C0.350611 10.4214 0.532153 10.5004 0.721447 10.5004H1.43518V17.2992C1.43518 17.6863 1.75473 18 2.14892 18C2.5431 18 2.86265 17.6863 2.86265 17.2992V10.5004H7.14506V17.0455C7.14506 17.5726 7.58034 18 8.11728 18H17.5926C18.1295 18 18.5648 17.5726 18.5648 17.0455V10.5004H19.2786C19.4678 10.5004 19.6494 10.4214 19.7832 10.2808C19.9171 10.1401 19.9923 9.94937 19.9923 9.75047V5.25072C20.0026 5.17109 20.0026 5.09037 19.9923 5.01074ZM17.1373 16.5001H8.57253V10.5004H17.1373V16.5001ZM18.5648 8.52324C18.5648 8.78683 18.3472 9.00051 18.0787 9.00051H16.196C15.9275 9.00051 15.7099 8.78683 15.7099 8.52324V6.70144C15.7099 6.31442 15.3903 6.00068 14.9961 6.00068C14.602 6.00068 14.2824 6.31442 14.2824 6.70144V8.52324C14.2824 8.78683 14.0648 9.00051 13.7963 9.00051H11.1998C10.9314 9.00051 10.7137 8.78683 10.7137 8.52324V6.70144C10.7137 6.31442 10.3942 6.00068 10 6.00068C9.60581 6.00068 9.28627 6.31442 9.28627 6.70144V8.52324C9.28627 8.78683 9.06863 9.00051 8.80015 9.00051H6.2037C5.93523 9.00051 5.71759 8.78683 5.71759 8.52324V6.70144C5.71759 6.31442 5.39804 6.00068 5.00386 6.00068C4.60967 6.00068 4.29012 6.31442 4.29012 6.70144V8.52324C4.29012 8.78683 4.07248 9.00051 3.80401 9.00051H1.92129C1.65282 9.00051 1.43518 8.78683 1.43518 8.52324V5.37072L2.66281 1.50093H17.3372L18.5648 5.37072V8.52324Z"></path>
                                                        </svg>
                                                        </div>
                                                        <div class="dropdown-icon">
                                                        <span class="header_store_name">Store name</span>
                                                        <svg class="only-fill" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" >
                                                                        <path d="M15.9449 10.2295L11.9991 14.9426L8.05512 10.2295C7.99545 10.1581 7.9194 10.1003 7.83268 10.0606C7.74596 10.0208 7.65081 10.0001 7.55438 10L6.15992 10C6.02626 10 5.95244 10.1449 6.03424 10.2427L11.4982 16.7714C11.7555 17.0762 12.2463 17.0762 12.5016 16.7714L17.9658 10.2427C18.0476 10.1449 17.9737 10 17.8401 10L16.4456 10C16.3492 10.0001 16.254 10.0208 16.1673 10.0606C16.0806 10.1003 16.0045 10.1581 15.9449 10.2295Z"></path>
                                                                        </svg>
                                                        </div>
                                                    </a>
                                                </li>
                                                         
                                            </ul>
                                </div>

                                <div class = "page-header-bottom-right" id = 'mob-follow'>
                                    <ul class="page-header-bottom-menu">
                                    {% if social_links %}
                                         <li class="has-sub-menu">
                                                    <a href="javascript:;" aria-label="account-login" role = "button" >
                                                       
                                                        <div class="dropdown-icon">
                                                        <span class="subheader_follo_us">Follow Us</span>
                                                        <svg class="only-fill" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" >
                                                                        <path d="M15.9449 10.2295L11.9991 14.9426L8.05512 10.2295C7.99545 10.1581 7.9194 10.1003 7.83268 10.0606C7.74596 10.0208 7.65081 10.0001 7.55438 10L6.15992 10C6.02626 10 5.95244 10.1449 6.03424 10.2427L11.4982 16.7714C11.7555 17.0762 12.2463 17.0762 12.5016 16.7714L17.9658 10.2427C18.0476 10.1449 17.9737 10 17.8401 10L16.4456 10C16.3492 10.0001 16.254 10.0208 16.1673 10.0606C16.0806 10.1003 16.0045 10.1581 15.9449 10.2295Z"></path>
                                                                        </svg>
                                                        </div>
                                                    </a>
                                                </li>
                                    {% endif %}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `)
            }
            else if (layout == 'LAYOUT3'){
                $('.call-icon').css('position','relative')

                $(".mobile .menu-container #myLinks").before(`
                <div class = 'col-4 d-flex mb-je p-0 cart-div'>
                    <div class="page-header-bottom-right">
                        <ul class="page-header-bottom-menu">
                            <li class="has-sub-menu menu-right" >
                                <a href="javascript:;" aria-label="account-login" role = "button">
                                    <div>
                                        <svg class="fill-stroke ic-user-class" width="26" height="24">
                                            <use xlink:href="#ic-user" />
                                        </svg>
                                    </div>
                                    <div>
                                        <svg class="only-fill" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M15.9449 10.2295L11.9991 14.9426L8.05512 10.2295C7.99545 10.1581 7.9194 10.1003 7.83268 10.0606C7.74596 10.0208 7.65081 10.0001 7.55438 10L6.15992 10C6.02626 10 5.95244 10.1449 6.03424 10.2427L11.4982 16.7714C11.7555 17.0762 12.2463 17.0762 12.5016 16.7714L17.9658 10.2427C18.0476 10.1449 17.9737 10 17.8401 10L16.4456 10C16.3492 10.0001 16.254 10.0208 16.1673 10.0606C16.0806 10.1003 16.0045 10.1581 15.9449 10.2295Z"></path>
                                                                        </svg>
                                    </div>
                                </a>
                                <ul class="menu_login login_li_color">
                                    
                                </ul>
                            </li>
                            <li>
                                {% if show_add_to_cart %}
                                    <a href="{{ shop_card_detail_page_url }}" style="position: relative;">
                                        <div class="">
                                            <svg class="only-fill" width="28" height="28" style="fill:{{instance.glossary.element_color}};">
                                                <use xlink:href="#ic-cart" />
                                            </svg>
                                        </div>
                                        <span class="cart-count shop-card-span" id="shop-card-span-mobile" style="font-weight:900;">0</span>
                                    </a>
                                {% else %}
                                    <span class="cart-count d-none shop-card-span" id="shop-card-span-mobile" style="font-weight:900;">0</span>
                                {% endif %}
                                
                            </li>
                        </ul>
                    </div>
                </div>
            `)
            
                $('.mobile').append(`
                <div class="page-header-bottom style-2">
                    <div class="container d-flex" style = "position : relative;">
                        <div class="page-header-bottom-inner">
                            <div class="page-header-bottom-left">
                                <ul class="page-header-bottom-menu">
                                               
                                                <li class="has-sub-menu">
                                                    <a href="javascript:;" aria-label="account-login" role = "button" >
                                                        <div>
                                                        <svg class="only-fill" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" >
                                                        <path d="M19.9923 5.01074L18.5648 0.510991C18.5152 0.355764 18.4185 0.221884 18.2896 0.129798C18.1607 0.0377128 18.0067 -0.00751614 17.8511 0.00101991H2.14892C1.99328 -0.00751614 1.83925 0.0377128 1.71037 0.129798C1.58149 0.221884 1.48484 0.355764 1.43518 0.510991L0.00771216 5.01074C-0.00257072 5.09037 -0.00257072 5.17109 0.00771216 5.25072V9.75047C0.00771216 9.94937 0.082909 10.1401 0.21676 10.2808C0.350611 10.4214 0.532153 10.5004 0.721447 10.5004H1.43518V17.2992C1.43518 17.6863 1.75473 18 2.14892 18C2.5431 18 2.86265 17.6863 2.86265 17.2992V10.5004H7.14506V17.0455C7.14506 17.5726 7.58034 18 8.11728 18H17.5926C18.1295 18 18.5648 17.5726 18.5648 17.0455V10.5004H19.2786C19.4678 10.5004 19.6494 10.4214 19.7832 10.2808C19.9171 10.1401 19.9923 9.94937 19.9923 9.75047V5.25072C20.0026 5.17109 20.0026 5.09037 19.9923 5.01074ZM17.1373 16.5001H8.57253V10.5004H17.1373V16.5001ZM18.5648 8.52324C18.5648 8.78683 18.3472 9.00051 18.0787 9.00051H16.196C15.9275 9.00051 15.7099 8.78683 15.7099 8.52324V6.70144C15.7099 6.31442 15.3903 6.00068 14.9961 6.00068C14.602 6.00068 14.2824 6.31442 14.2824 6.70144V8.52324C14.2824 8.78683 14.0648 9.00051 13.7963 9.00051H11.1998C10.9314 9.00051 10.7137 8.78683 10.7137 8.52324V6.70144C10.7137 6.31442 10.3942 6.00068 10 6.00068C9.60581 6.00068 9.28627 6.31442 9.28627 6.70144V8.52324C9.28627 8.78683 9.06863 9.00051 8.80015 9.00051H6.2037C5.93523 9.00051 5.71759 8.78683 5.71759 8.52324V6.70144C5.71759 6.31442 5.39804 6.00068 5.00386 6.00068C4.60967 6.00068 4.29012 6.31442 4.29012 6.70144V8.52324C4.29012 8.78683 4.07248 9.00051 3.80401 9.00051H1.92129C1.65282 9.00051 1.43518 8.78683 1.43518 8.52324V5.37072L2.66281 1.50093H17.3372L18.5648 5.37072V8.52324Z"></path>
                                                        </svg>
                                                        </div>
                                                        <div class="dropdown-icon">
                                                        <span class="header_store_name">Store name</span>
                                                        <svg class="only-fill" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" >
                                                                        <path d="M15.9449 10.2295L11.9991 14.9426L8.05512 10.2295C7.99545 10.1581 7.9194 10.1003 7.83268 10.0606C7.74596 10.0208 7.65081 10.0001 7.55438 10L6.15992 10C6.02626 10 5.95244 10.1449 6.03424 10.2427L11.4982 16.7714C11.7555 17.0762 12.2463 17.0762 12.5016 16.7714L17.9658 10.2427C18.0476 10.1449 17.9737 10 17.8401 10L16.4456 10C16.3492 10.0001 16.254 10.0208 16.1673 10.0606C16.0806 10.1003 16.0045 10.1581 15.9449 10.2295Z"></path>
                                                                        </svg>
                                                        </div>
                                                    </a>
                                                </li>
                                                
                                                    <li class="has-sub-menu">
                                                        <a href="javascript:void(0);" style="color: rgb(173, 23, 207);">
                                                            <div>
                                                            
                                                                <svg class="only-fill" width="24" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg" style="fill: rgb(173, 23, 207);">
                                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.1419 21.3683C16.6126 19.1655 21 14.677 21 10.5713C21 9.44571 20.7801 8.33113 20.353 7.29121C19.9258 6.25129 19.2997 5.3064 18.5104 4.51048C17.7211 3.71456 16.7841 3.0832 15.7528 2.65245C14.7215 2.2217 13.6162 2 12.5 2C11.3838 2 10.2785 2.2217 9.24719 2.65245C8.21592 3.0832 7.27889 3.71456 6.48959 4.51048C5.70029 5.3064 5.07419 6.25129 4.64702 7.29121C4.21986 8.33113 4 9.44571 4 10.5713C4 14.677 8.38742 19.1655 10.8581 21.3683C11.3098 21.7751 11.8943 22 12.5 22C13.1057 22 13.6902 21.7751 14.1419 21.3683ZM17.5087 5.52062C18.8371 6.86015 19.5833 8.67694 19.5833 10.5713C19.5833 12.1542 18.7121 13.9927 17.3592 15.8327C16.0374 17.6312 14.4026 19.2283 13.2041 20.2983C13.0112 20.4746 12.7603 20.5722 12.5 20.5722C12.2397 20.5722 11.9888 20.4746 11.7959 20.2983C10.5974 19.2283 8.964 17.6298 7.64083 15.8327C6.28792 13.9927 5.41667 12.1542 5.41667 10.5713C5.41667 8.67694 6.16294 6.86015 7.49133 5.52062C8.81971 4.18109 10.6214 3.42855 12.5 3.42855C14.3786 3.42855 16.1803 4.18109 17.5087 5.52062Z"></path>
                                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M15 10.5C15 11.8807 13.8807 13 12.5 13C11.1193 13 10 11.8807 10 10.5C10 9.11929 11.1193 8 12.5 8C13.8807 8 15 9.11929 15 10.5ZM12.5 11.5C13.0523 11.5 13.5 11.0523 13.5 10.5C13.5 9.94772 13.0523 9.5 12.5 9.5C11.9477 9.5 11.5 9.94772 11.5 10.5C11.5 11.0523 11.9477 11.5 12.5 11.5Z"></path>
                                                                </svg>
                                                            </div>
                                                            <div>
                                                                <span id="deliveringZipCode_mob">City, zip</span>	
                                                            </div>
                                                        </a>
                                                    </li>          
                                            </ul>
                            </div>
                        </div>
                        <div class="page-header-bottom-search">
                            <button id="opensearch" role="button" aria-label="Search-Button" disabled>
                                <svg width="28" height="28" style="fill:${productbar_bg_color};stroke:${productbar_element_color}">
                                    <use xlink:href="#ic-search"></use>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                `)
            }

            if (social_icons == 'DON’T SHOW'){
                $(".page-header-social").hide()
                $('.page-header-bottom-social').hide()
                $('#btn_color_1_layout .mobile .page-header-bottom.style-1 #mob-follow').hide()
            }else{
                if({{social_links|length}} > 0 ){
                    $(".page-header-social").show()
                    $('.page-header-bottom-social').show()
                    $('#btn_color_1_layout .mobile .page-header-bottom.style-1 #mob-follow').show()
                }
            }

            //change the top row background color
            $(".mobile .topnav svg").css({'fill': element_color })
            $(".mobile .topnav .ic-user-class").css({'stroke': element_color ,"fill" : header_top_element_color})

            // change the quantity and bubble color 
            $(".mobile #shop-card-span-mobile").css({'color': header_top_element_color,'background-color' : element_color})
            $(".desktop #shop-card-span").css({'color': productbar_bg_color,'background-color' : productbar_element_color})

            //change the bg color of product bar
            $('.page-header-bottom.style-2').css({"background":productbar_bg_color});
            $('.page-header-bottom.style-2 ul.page-header-bottom-menu li a').css({"color":productbar_element_color});
            $('.page-header-bottom.style-2 .fill-stroke').css({"fill":productbar_bg_color,"stroke":productbar_element_color});
            $('.page-header-bottom.style-2 .only-fill').css({"fill":productbar_element_color});
            $('.page-header-bottom.style-1 .only-fill').css({"fill":productbar_element_color});
            $('.page-header-bottom.style-1 .header_store_name').css({"color":productbar_element_color});
            $('.page-header-bottom.style-1 .subheader_follo_us').css({"color":productbar_element_color});
            $('.page-header-bottom.style-1').css({"background":productbar_bg_color});
            
            $('.page-header-bottom.style-1 .page-header-bottom-inner .layout_bar_text').css({"color":productbar_element_color});
            $('.page-header-bottom.style-1 .page-header-bottom-inner .layout_bar_text').css({"stroke":productbar_element_color});
            $('.page-header-bottom.style-1 .page-header-bottom-inner .layout_bar_text').css({"fill":productbar_element_color});

            // show the selected store number 
            $(".store-number1").text(`{{store_number|default:''|safe}}`)
            
            // show the store name
            $(".header_store_name").text(`{{receipt_name|default:''|safe}}`)

            // show the zip code
            $("#deliveringZipCode").text(`{{zipcode|default:''|safe}}`)
            $(".mobile #deliveringZipCode_mob").text(`{{zipcode|default:''|safe}}`)
            
        }

        $("input[name='socialicon_display']").change(function(){
            setHeaderPreview()
        })

        $("input[name='phonenumber_layout']").change(function(){
            setHeaderPreview()
        })

        // ==========================================================================

        // select the layout when click on layout image
        function SelectHeaderLayout(layoutId){
            $("#"+layoutId).click()
            let val=document.getElementsByClassName('cls'+'layout_1');
            let val2=document.getElementsByClassName('cls'+'layout_2');
            let val3=document.getElementsByClassName('cls'+'layout_3');
            let className=val[0].className
            if(layoutId=="layout_1"){
                val[0].className='banner-layout-wrap-inner txt-1-btn-left clslayout_1 activelayout'
                val2[0].className='banner-layout-wrap-inner txt-1-btn-left clslayout_2';
                val3[0].className='banner-layout-wrap-inner txt-1-btn-left clslayout_3';
            }else if(layoutId=="layout_2"){
                val[0].className='banner-layout-wrap-inner txt-1-btn-left clslayout_1 '
                val2[0].className='banner-layout-wrap-inner txt-1-btn-left clslayout_2 activelayout';
                val3[0].className='banner-layout-wrap-inner txt-1-btn-left clslayout_3';
            }
            else if(layoutId=="layout_3"){
                val[0].className='banner-layout-wrap-inner txt-1-btn-left clslayout_1'
                val2[0].className='banner-layout-wrap-inner txt-1-btn-left clslayout_2';
                val3[0].className='banner-layout-wrap-inner txt-1-btn-left clslayout_3 activelayout';
            }
        }

        $("input[id='layout_group']").change(function() {
            SetLayoutOptionView()
            setHeaderPreview()
        });

        function SetLayoutOptionView(){
            var selectedLayout = document.querySelector('input[id="layout_group"]:checked').value
            $(".prod-mt:first").removeClass('d-none')
            if (selectedLayout == 'LAYOUT3'){
                $(".productbar-color-section").show()
                $(".locationbar-color-section").hide()
            }else if (selectedLayout == 'LAYOUT2'){
                $(".productbar-color-section").hide()
                $(".locationbar-color-section").show()
            }
            else{
                $(".prod-mt:first").addClass('d-none')
            }
        }

        function InitView(){
            $('.page-header.header-style-1 a').removeAttr('href');
            var primary_button_color_pattern = "{{global_theme_config.primary_button_color_pattern}}";
            var secondary_button_color_pattern = "{{global_theme_config.secondary_button_color_pattern}}";

            $("#first-btn-section button").addClass('{{global_theme_config.primary_button_shape}}');
            $("#second-btn-section button").addClass('{{global_theme_config.primary_button_shape}}');

            var selectedLayout = '{{adminform.form.layout.value}}';
            $("input[name='layout'][value='" + selectedLayout + "']").prop('checked', true);
            SetLayoutOptionView()
        }
        InitView()

        {% comment %} $("input[id='layout_group']").change(function() {

        }); {% endcomment %}

        // ==========================================================================
    </script>
    <script>

        function deleteHeaderImage(element,id){
            if(!id){element.parentNode.remove()}else{
            var url = "{% url 'pinogy_common_ajax:header-delete-url' %}"
            const data = { image_id : id };
            fetch(url, {
                method: 'delete',
                credentials: 'same-origin',
                headers: {
                    'Accept': 'application/json',
                    "Content-Type": "application/json",
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                body: JSON.stringify(data),
            })
            .then((response) => response.json())
            .then((result) => {
                $(element).parent().remove()
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        }
        }
        $('.custom_color_change').on('blur',function(){
            let custom = $(this).parents('ul.theme-color-tab').siblings('input[type = "hidden"]').attr('id')
            $("#"+custom).val($(this).val())
            setHeaderPreview()
        }) 
           // preview switching tabs function
            $(".theme-tab-layout li").on("click", function () {
                let target_box = $(this).data("target");
                $(this).siblings().removeClass("active");
                $(this).addClass("active");
                if (target_box == 'btn_style_1_layout'){
                    $(this).children().prop('src','/static/images/widget_image/bannerplugin/ph_monitor_enable.svg')
                    $('.btn_color_1_layout').children().prop('src','/static/images/widget_image/bannerplugin/icons8_iphone.svg')
                    $('#btn_style_1_layout').removeClass('d-none')
                    $('#btn_color_1_layout').addClass('d-none')
                }
                else if (target_box == 'btn_color_1_layout'){
                    $(this).children().prop('src','/static/images/widget_image/bannerplugin/icons8_iphone_enable.svg')
                    $('.btn_style_1_layout').children().prop('src','/static/images/widget_image/bannerplugin/ph_monitor.svg')
                    $('#btn_color_1_layout').removeClass('d-none')
                    $('#btn_style_1_layout').addClass('d-none')
                }
                setHeaderPreview()
            })

    </script>
    <script>
        // for external links add delete and Updates
                {% comment %} Open the add link form {% endcomment %}
                function OpenExternalLink(){
                    $('.add_links').toggle()
                }
                {% comment %} on hover show the delete and update buttons {% endcomment %}
                {% comment %} $(document).ready(function(){
                    $('.external').hover(
                        function(){
                            // Mouse enter event
                            $(this).toggleClass('d-none');
                        },
                        function(){
                            // Mouse leave event
                            $(this).toggleClass('d-none');
                        }
                    );
                }); {% endcomment %}
                $(document).ready(function(){
                    function loadData(){
                        let quickLinkData = '{}';
                        quickLinkData = JSON.parse(quickLinkData)
                        UpdateIds(quickLinkData)
                        Object.keys(quickLinkData).forEach(function(key){
                            let name = quickLinkData[key]['name']
                            let url = quickLinkData[key]['url']
                            let check = quickLinkData[key]['check']
                            let link_target = quickLinkData[key]['link_target']
                            AddExternalLink(this,endata = name, eldata = url, checked = check, link_target = link_target, save_flag = false, last = false)
                        })
                    }
                    {% comment %} loadData(); {% endcomment %}
                    $(document).ready(function(){
                        $('input[name="external_links1"]').on('click', function() {
                            let checked_value = '{}';
                            checked_value = JSON.parse(checked_value);
                            let ids = $(this).prop('id').split('_')[3];
                            let check = $(this).prop('checked');
                            if (checked_value['btn'+ids]['check'] != 'checked') {
                                checked_value['btn'+ids]['check'] = '';
                            }
                            else{
                                checked_value['btn'+ids]['check'] = 'checked';
                            }
                            
                        });
                    });
        
        
                })
                function UpdateIds(data){
                    checked_value = data
                    let reorganizedObj = {};
                    let last_id = $('.checkbox_quick_links .form-check').last().children().attr('id')
                    let last_data = last_id.split('_')[3];
                    last_data = parseInt(last_data)
                    Object.keys(checked_value).sort().forEach((key, index) => {
        
                            reorganizedObj[`btn${last_data+1}`] = checked_value[key];
                            last_data+=1;
                        
                    });
                }
                function validate_fields(last_id){
                    let last_checkbox_id = last_id.find('input[name = "external_links"]').val() // get the last added external link id from its checkbox value

                        let ename = $(`input[name="ext_link_name_${last_checkbox_id}"]`)
                        let elink = $(`input[name="ext_link_url_${last_checkbox_id}"]`)
                        let link_choice_field = $(`input[name="link_choice_field_${last_checkbox_id}"]:checked`).val()
                        let button_internallink = $(`#button_internallink_${last_checkbox_id}`)
        
                        if(link_choice_field == 'internal' && (ename.val() == "" || button_internallink.val() == '')){
                            ename.attr('required','required')
                            button_internallink.attr('required','required')
                            return false
                        }
                        if(link_choice_field == 'external' && (ename.val() == "" || elink.val() == '')){
                            ename.attr('required','required')
                            elink.attr('required','required')
                            return false
                        } 
                    return true
                }

                var count = 0
                function AddExternalLink(data, endata = '', eldata = '', checked = '',link_target = '_self', save_flag = true, last = false ){
                    let parent_class = $(data).parents('.ck-pad').attr('class') || ''
                    
                    let parent_id = ''
                    if(parent_class){
                        parent_id = parent_class.split(' ').pop().split('-')[1] || ''
                    }


                    let last_id = $(data).parents('.box-theme-sub-title').prev('.form-check.external') // get the last added external link 
                    if(last_id.length > 0 ){
                        let lastId = $(last_id).find('input').val()
                        lastId = lastId.split('#')[1]
                        count = parseInt(lastId)
                        if (!validate_fields(last_id)){
                            return false
                        }
                    }

                    let last_data = 0
                    //last_data = parseInt(last_data)
                    last_data = parent_id+"#"+(count + 1)
                    
                   
                    // send the added link data to the fields to save the data
                    if(!save_flag){
                        ename = endata;
                        elink = eldata;
                        check = checked
                    }
                    else{
                        check = 'checked';
                        ename = '';
                        elink = '';
                    }

                    // working of last add button
                        if(last == true){
                            let last_id = $('.checkbox_quick_links').children('.form-check.external').last()
    
                            if(last_id.length > 0){
                                let lastId = $(last_id).find('input').val()
                                lastId = lastId.split('#')[1]
                                count = parseInt(lastId)
                                
                                if (!validate_fields(last_id)){
                                    return false
                                }
                            }
                            last_data = "a#"+(count + 1)
                            $(`
                                <div class="form-check checkbox-outer align-items-center p-0 external">
                                    <input class="form-check-input custom-checkbox m-0" name="external_links" type="checkbox" value="${last_data}" id="id_quick_links_${last_data}"  ${check}>
                                    <div class = "box-theme-form-item-inline pos-wc">
                                        <input class = "form-input ext_link_name" type = 'text' id = "ext_link_name_${last_data}" name = "ext_link_name_${last_data}" value = '${ename}' placeholder ="Link name" required/> 
                                        <div class = 'l_ext_link_name_${last_data} word_count'>0/20</div> 
                                    </div>
                                    <div class = "box-theme-form-item-inline select-class">
                                        <select class = "form-select" name="button_target_${last_data}" value = '${link_target}' id="id_button_target_${last_data}">
                                            <option value="_self">Current Tab</option>
                                            <option value="_blank">New Tab</option>
                                        </select>
                                    </div> 
                                    
                                    <div class="quick_links_${last_data}" data-value="id_quick_links_${last_data}" onclick="deleteQlink(this)">
                                        <a id="delAnchor-1" class="del-anchor" href="javascript:void(0);"> <svg width="24" height="24" viewBox="2 2 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M10 6H14C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4C11.4696 4 10.9609 4.21071 10.5858 4.58579C10.2107 4.96086 10 5.46957 10 6ZM8 6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6H21C21.2652 6 21.5196 6.10536 21.7071 6.29289C21.8946 6.48043 22 6.73478 22 7C22 7.26522 21.8946 7.51957 21.7071 7.70711C21.5196 7.89464 21.2652 8 21 8H20.118L19.232 18.34C19.1468 19.3385 18.69 20.2686 17.9519 20.9463C17.2137 21.6241 16.2481 22.0001 15.246 22H8.754C7.75191 22.0001 6.78628 21.6241 6.04815 20.9463C5.31002 20.2686 4.85318 19.3385 4.768 18.34L3.882 8H3C2.73478 8 2.48043 7.89464 2.29289 7.70711C2.10536 7.51957 2 7.26522 2 7C2 6.73478 2.10536 6.48043 2.29289 6.29289C2.48043 6.10536 2.73478 6 3 6H8ZM15 12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17C14.2652 17 14.5196 16.8946 14.7071 16.7071C14.8946 16.5196 15 16.2652 15 16V12ZM10 11C10.2652 11 10.5196 11.1054 10.7071 11.2929C10.8946 11.4804 11 11.7348 11 12V16C11 16.2652 10.8946 16.5196 10.7071 16.7071C10.5196 16.8946 10.2652 17 10 17C9.73478 17 9.48043 16.8946 9.29289 16.7071C9.10536 16.5196 9 16.2652 9 16V12C9 11.7348 9.10536 11.4804 9.29289 11.2929C9.48043 11.1054 9.73478 11 10 11ZM6.76 18.17C6.8026 18.6694 7.03117 19.1346 7.40044 19.4735C7.76972 19.8124 8.25278 20.0003 8.754 20H15.246C15.7469 19.9998 16.2294 19.8117 16.5983 19.4728C16.9671 19.134 17.1954 18.6691 17.238 18.17L18.11 8H5.89L6.762 18.17H6.76Z" fill="#12BBD2"></path>
                                            </svg></a>
                                    </div>
                                    <div class = "">

                                    </div>
                                    <div class = "opt_link_outer">
                                        <div class="admin-form  horizontal-checkbox ">

                                            <div class="form-check radio-outer d-flex align-items-center p-0 gap-2">
                                                <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field_${last_data}" onclick = "selectRadioOption(this)" id="internal_link_choice_field_${last_data}" value="internal" checked="">
                                                <label class="form-check-label custom-radio-label ml-2" for="internal_link_choice_field_${last_data}">
                                                    Internal link
                                                </label>
                                                <div class="box-theme-form-label">
                                                <span style="position:relative;">
                                                    <img src="/static/images/ic-info.svg" class="abs_meg_icon">
                                                    <div class="form-tooltip">
                                                        An internal link is a link to an existing page on your website. When an internal link button is clicked, the page will open in the same tab.
                                                    </div>
                                                </span>
                                            </div>
                                            </div>
                                        
                                            <div class="form-check radio-outer d-flex align-items-center p-0 gap-2">
                                                <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field_${last_data}" onclick = "selectRadioOption(this)" id="external_link_choice_field_${last_data}" value="external">
                                                <label class="form-check-label custom-radio-label ml-2" for="external_link_choice_field_${last_data}">
                                                    External link
                                                </label>
                                                <div class="box-theme-form-label">
                                                <span style="position:relative;">
                                                    <img src="/static/images/ic-info.svg" class = "abs_meg_icon">
                                                    <div class="form-tooltip">
                                                        An external link is a link that directs users away from your website. When an external link button is clicked, the page will open in a new window or tab.
                                                    </div>
                                                </span>
                                            </div>
                                            </div>
                                        
                                        </div>
                                    </div>
                                    
                                    <div class="box-theme-form-item-inline select-class " id = "internal" >
                                        
                                        <select class="form-select" name="button_internallink_${last_data}" id="button_internallink_${last_data}">
                                            <option value = "">------</option>
                                            {% for data in draft_pages%}
                                                <option value="{{data.2}}" {% if data.2|slugify == page.external_link.internal_link_id%} selected {%endif%}>{{data.0}}</option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                    <div class="box-theme-form-item-inline " id = "external" style = "display : none">
                                        <input class = "form-input ext_link_url" type = 'text' id = "ext_link_url_${last_data}" name = "ext_link_url_${last_data}" value = '${elink}' placeholder ="http://"  required/> 
                                    </div>
                                
                                </div>
                            `).insertAfter($('.checkbox_quick_links').children().last())
                        }

                    $(data).closest('.ck-pad').children('.col-2.box-theme-sub-title').before(`
                        <div class="form-check checkbox-outer align-items-center p-0 external">
                            <input class="form-check-input custom-checkbox m-0" name="external_links" type="checkbox" value="${parent_id}#${count+1}" id="id_quick_links_${last_data}"  ${check}>
                            <div class = "box-theme-form-item-inline pos-wc">
                                <input class = "form-input ext_link_name" type = 'text' id = "ext_link_name_${last_data}" name = "ext_link_name_${last_data}" value = '${ename}' placeholder ="Link name" required/> 
                                <div class = 'l_ext_link_name_${last_data} word_count'>0/20</div> 
                            </div>
                            <div class = "box-theme-form-item-inline select-class">
                                <select class = "form-select" name="button_target_${last_data}" value = '${link_target}' id="id_button_target_${last_data}" >
                                    <option value="_self">Current Tab</option>
                                    <option value="_blank">New Tab</option>
                                </select>
                            </div>
                            
                            <div class="quick_links_${last_data}" data-value="id_quick_links_${last_data}" onclick="deleteQlink(this)">
                                <a id="delAnchor-1" class="del-anchor" href="javascript:void(0);"> <svg width="24" height="24" viewBox="2 2 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M10 6H14C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4C11.4696 4 10.9609 4.21071 10.5858 4.58579C10.2107 4.96086 10 5.46957 10 6ZM8 6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6H21C21.2652 6 21.5196 6.10536 21.7071 6.29289C21.8946 6.48043 22 6.73478 22 7C22 7.26522 21.8946 7.51957 21.7071 7.70711C21.5196 7.89464 21.2652 8 21 8H20.118L19.232 18.34C19.1468 19.3385 18.69 20.2686 17.9519 20.9463C17.2137 21.6241 16.2481 22.0001 15.246 22H8.754C7.75191 22.0001 6.78628 21.6241 6.04815 20.9463C5.31002 20.2686 4.85318 19.3385 4.768 18.34L3.882 8H3C2.73478 8 2.48043 7.89464 2.29289 7.70711C2.10536 7.51957 2 7.26522 2 7C2 6.73478 2.10536 6.48043 2.29289 6.29289C2.48043 6.10536 2.73478 6 3 6H8ZM15 12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17C14.2652 17 14.5196 16.8946 14.7071 16.7071C14.8946 16.5196 15 16.2652 15 16V12ZM10 11C10.2652 11 10.5196 11.1054 10.7071 11.2929C10.8946 11.4804 11 11.7348 11 12V16C11 16.2652 10.8946 16.5196 10.7071 16.7071C10.5196 16.8946 10.2652 17 10 17C9.73478 17 9.48043 16.8946 9.29289 16.7071C9.10536 16.5196 9 16.2652 9 16V12C9 11.7348 9.10536 11.4804 9.29289 11.2929C9.48043 11.1054 9.73478 11 10 11ZM6.76 18.17C6.8026 18.6694 7.03117 19.1346 7.40044 19.4735C7.76972 19.8124 8.25278 20.0003 8.754 20H15.246C15.7469 19.9998 16.2294 19.8117 16.5983 19.4728C16.9671 19.134 17.1954 18.6691 17.238 18.17L18.11 8H5.89L6.762 18.17H6.76Z" fill="#12BBD2"></path>
                                    </svg></a>
                            </div>
                            <div class = "">

                            </div>
                            <div class = "opt_link_outer">
                                <div class="admin-form  horizontal-checkbox ">

                                    <div class="form-check radio-outer d-flex align-items-center p-0 gap-2">
                                        <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field_${last_data}" onclick = "selectRadioOption(this)" id="internal_link_choice_field_${last_data}" value="internal" checked="">
                                        <label class="form-check-label custom-radio-label ml-2" for="internal_link_choice_field_${last_data}">
                                            Internal link
                                        </label>
                                        <div class="box-theme-form-label">
                                        <span style="position:relative;">
                                            <img src="/static/images/ic-info.svg" class="abs_meg_icon">
                                            <div class="form-tooltip">
                                                An internal link is a link to an existing page on your website. When an internal link button is clicked, the page will open in the same tab.
                                            </div>
                                        </span>
                                    </div>
                                    </div>
                                
                                    <div class="form-check radio-outer d-flex align-items-center p-0 gap-2">
                                        <input class="form-check-input custom-radio m-0" type="radio" name="link_choice_field_${last_data}" onclick = "selectRadioOption(this)" id="external_link_choice_field_${last_data}" value="external">
                                        <label class="form-check-label custom-radio-label ml-2" for="external_link_choice_field_${last_data}">
                                            External link
                                        </label>
                                        <div class="box-theme-form-label">
                                        <span style="position:relative;">
                                            <img src="/static/images/ic-info.svg" class = "abs_meg_icon">
                                            <div class="form-tooltip">
                                                An external link is a link that directs users away from your website. When an external link button is clicked, the page will open in a new window or tab.
                                            </div>
                                        </span>
                                    </div>
                                    </div>
                                
                                </div>
                            </div>
                            <div class="box-theme-form-item-inline select-class " id = "internal" >
                                
                                <select class="form-select" name="button_internallink_${last_data}" id="button_internallink_${last_data}">
                                    <option value = "">------</option>
                                    {% for data in draft_pages%}
                                        <option value="{{data.2}}" {% if data.2|slugify == page.external_link.internal_link_id%} selected {%endif%}>{{data.0}}</option>
                                    {%endfor%}
                                </select>
                            </div>
                            <div class="box-theme-form-item-inline " id = "external" style = "display : none">
                                <input class = "form-input ext_link_url" type = 'text' id = "ext_link_url_${last_data}" name = "ext_link_url_${last_data}" value = '${elink}' placeholder ="http://" required/> 
                            </div>
                         
                        </div>
                    `);

                    count = count+1
                    $(`#id_button_target_${last_data}`).val(link_target)
                }
                // changes on delete of external links
                function deleteQlink(delid){
                    let delId = $(delid).data('value')
                    let no = delId.split('_')[3];
                  
                    $(delid).parent('.external').remove()

                    let deleted_childs = $('#external_del_childs').val() // get all the deleted ids
                    deleted_childs = JSON.parse(deleted_childs)
                    deleted_childs.push(no)

                    $('#external_del_childs').val(JSON.stringify(deleted_childs))
                }

    // functionality to linit the charecter in button text
    $('.checkbox_quick_links').on('keyup','.ext_link_name',function(){
        if($(this).val().length > 20){
        $(this).val($(this).val().substring(0,20));
        }
        else{
        $(this).siblings().text($(this).val().length+'/20')
        }
    })
    $(document).ready(function(){
        $('.checkbox_quick_links .ext_link_name').each(function(index,element){
        $(element).siblings().text($(element).val().length+"/20")
        })
    })
    function toggleChild(childId,data){
        $("."+childId).toggle()

        if($('.'+childId).css('display') == 'block'){
            $(data).children().replaceWith(`
                <svg class="only-fill" width="24" height="24" viewBox="0 0 24 24" fill="#003F5A" xmlns="http://www.w3.org/2000/svg">
                <path d="M15.9449 14.7705L11.9991 10.0574L8.05512 14.7705C7.99545 14.8419 7.9194 14.8997 7.83268 14.9394C7.74596 14.9792 7.65081 14.9999 7.55438 15L6.15992 15C6.02626 15 5.95244 14.8551 6.03424 14.7573L11.4982 8.2286C11.7555 7.9238 12.2463 7.9238 12.5016 8.2286L17.9658 14.7573C18.0476 14.8551 17.9737 15 17.8401 15L16.4456 15C16.3492 14.9999 16.254 14.9792 16.1673 14.9394C16.0806 14.8997 16.0045 14.8419 15.9449 14.7705Z"></path>
                </svg>
            `)
        }
        else{
            $(data).children().replaceWith(`<svg class="only-fill" width="24" height="24" viewBox="0 0 24 24" fill="#003F5A" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15.9449 10.2295L11.9991 14.9426L8.05512 10.2295C7.99545 10.1581 7.9194 10.1003 7.83268 10.0606C7.74596 10.0208 7.65081 10.0001 7.55438 10L6.15992 10C6.02626 10 5.95244 10.1449 6.03424 10.2427L11.4982 16.7714C11.7555 17.0762 12.2463 17.0762 12.5016 16.7714L17.9658 10.2427C18.0476 10.1449 17.9737 10 17.8401 10L16.4456 10C16.3492 10.0001 16.254 10.0208 16.1673 10.0606C16.0806 10.1003 16.0045 10.1581 15.9449 10.2295Z"></path>
                        </svg>`)
        }
    }

    // TO TOGGLE THE INTERNAL AND EXTERNAL LINKS
    function selectRadioOption(data){
        
        let int_ext_tag = $(data).parents('.opt_link_outer')
        if($(data).val() == 'internal' ){
            int_ext_tag.siblings('#internal').show()
            int_ext_tag.siblings('#external').hide()
            //$('#internal').show();
            //$("#external").hide();
        }
        else{
            int_ext_tag.siblings('#internal').hide()
            int_ext_tag.siblings('#external').show()
            //$('#internal').hide();
            //$("#external").show();
        }
    }
    </script>
    {% endaddtoblock %}
{% endblock content %}


