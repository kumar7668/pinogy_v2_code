$(document).ready(function () {
  function t() {
    $(".pet-card-play-date-schedule-button").each(function (t, a) {
      var e = $(a);
      if (!e.data("pet-card-play-date-events-installed")) {
        e.data("pet-card-play-date-events-installed", !0),
          e.on("click", function (t) {
            t.preventDefault(),
              t.stopPropagation();
          }),
          e.removeAttr("disabled");
        var d = $(e.data("target")),
          n = $(".pet-card-play-date-form", d);
        if (!n.data("events-installed")) {
          n.data("events-installed", !0);
          var r,
            o = $(".js-pet-card-play-date-accordion", d),
            c = [
              {
                start_at: "2023-04-09T12:00:00-0500",
                finish_at: "2023-04-09T12:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T12:30:00-0500",
                finish_at: "2023-04-09T13:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T13:00:00-0500",
                finish_at: "2023-04-09T13:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T13:30:00-0500",
                finish_at: "2023-04-09T14:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T14:00:00-0500",
                finish_at: "2023-04-09T14:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T14:30:00-0500",
                finish_at: "2023-04-09T15:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T15:00:00-0500",
                finish_at: "2023-04-09T15:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T15:30:00-0500",
                finish_at: "2023-04-09T16:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T16:00:00-0500",
                finish_at: "2023-04-09T16:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T16:30:00-0500",
                finish_at: "2023-04-09T17:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T17:00:00-0500",
                finish_at: "2023-04-09T17:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-09T17:30:00-0500",
                finish_at: "2023-04-09T18:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T10:00:00-0500",
                finish_at: "2023-04-10T10:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T10:30:00-0500",
                finish_at: "2023-04-10T11:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T11:00:00-0500",
                finish_at: "2023-04-10T11:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T11:30:00-0500",
                finish_at: "2023-04-10T12:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T12:00:00-0500",
                finish_at: "2023-04-10T12:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T12:30:00-0500",
                finish_at: "2023-04-10T13:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T13:00:00-0500",
                finish_at: "2023-04-10T13:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T13:30:00-0500",
                finish_at: "2023-04-10T14:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T14:00:00-0500",
                finish_at: "2023-04-10T14:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T14:30:00-0500",
                finish_at: "2023-04-10T15:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T15:00:00-0500",
                finish_at: "2023-04-10T15:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T15:30:00-0500",
                finish_at: "2023-04-10T16:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T16:00:00-0500",
                finish_at: "2023-04-10T16:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T16:30:00-0500",
                finish_at: "2023-04-10T17:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T17:00:00-0500",
                finish_at: "2023-04-10T17:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T17:30:00-0500",
                finish_at: "2023-04-10T18:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T18:00:00-0500",
                finish_at: "2023-04-10T18:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T18:30:00-0500",
                finish_at: "2023-04-10T19:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T19:00:00-0500",
                finish_at: "2023-04-10T19:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T19:30:00-0500",
                finish_at: "2023-04-10T20:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T20:00:00-0500",
                finish_at: "2023-04-10T20:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-10T20:30:00-0500",
                finish_at: "2023-04-10T21:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T10:00:00-0500",
                finish_at: "2023-04-11T10:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T10:30:00-0500",
                finish_at: "2023-04-11T11:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T11:00:00-0500",
                finish_at: "2023-04-11T11:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T11:30:00-0500",
                finish_at: "2023-04-11T12:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T12:00:00-0500",
                finish_at: "2023-04-11T12:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T12:30:00-0500",
                finish_at: "2023-04-11T13:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T13:00:00-0500",
                finish_at: "2023-04-11T13:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T13:30:00-0500",
                finish_at: "2023-04-11T14:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T14:00:00-0500",
                finish_at: "2023-04-11T14:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T14:30:00-0500",
                finish_at: "2023-04-11T15:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T15:00:00-0500",
                finish_at: "2023-04-11T15:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T15:30:00-0500",
                finish_at: "2023-04-11T16:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T16:00:00-0500",
                finish_at: "2023-04-11T16:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T16:30:00-0500",
                finish_at: "2023-04-11T17:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T17:00:00-0500",
                finish_at: "2023-04-11T17:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T17:30:00-0500",
                finish_at: "2023-04-11T18:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T18:00:00-0500",
                finish_at: "2023-04-11T18:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T18:30:00-0500",
                finish_at: "2023-04-11T19:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T19:00:00-0500",
                finish_at: "2023-04-11T19:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T19:30:00-0500",
                finish_at: "2023-04-11T20:00:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T20:00:00-0500",
                finish_at: "2023-04-11T20:30:00-0500",
                can_select: true,
              },
              {
                start_at: "2023-04-11T20:30:00-0500",
                finish_at: "2023-04-11T21:00:00-0500",
                can_select: true,
              },
            ],
            i = o.data("pet-id"),
            s = "",
            l = "",
            p = "";
          c &&
            c.forEach(function (t) {
              var a = new Date(t.start_at),
                e = a.getMonth() + "_" + a.getDate();
              if (e !== l && p) {
                var d = Boolean(s);
                (s =
                  s +
                  '<div class="card"><div class="pet-card-play-date-accordion-title card-header" id="pet-card-play-date-accordion-title-' +
                  e +
                  "_pet-" +
                  i +
                  '"><h4 class="mb-0"><button type="button" data-toggle="collapse" class="btn btn-link ' +
                  (d ? "collapsed" : "") +
                  '" data-target="#pet-card-play-date-accordion-content-' +
                  e +
                  "_pet-" +
                  i +
                  '" aria-expanded="' +
                  (d ? "false" : "true") +
                  '" aria-controls="pet-card-play-date-accordion-content-' +
                  e +
                  "_pet-" +
                  i +
                  '" >' +
                  r.toDateString() +
                  '</button></h4></div><div id="pet-card-play-date-accordion-content-' +
                  e +
                  "_pet-" +
                  i +
                  '" class="pet-card-play-date-accordion-content collapse ' +
                  (d ? "" : "show") +
                  '" aria-labelledby="pet-card-play-date-accordion-title-' +
                  e +
                  "_pet-" +
                  i +
                  '" data-parent=".pet-card-play-date-accordion"><div class="card-body">' +
                  p +
                  "</div></div></div>"),
                  (p = "");
              }
              var n,
                o,
                c,
                u,
                f =
                  ((o = (n = a).getHours()),
                  (c = n.getMinutes()),
                  (u = o >= 12 ? "PM" : "AM"),
                  (o = (o %= 12) || 12) +
                    ":" +
                    (c = c < 10 ? "0" + c : c) +
                    " " +
                    u);
              (p =
                p +
                '<button type="button" ' +
                (t.can_select ? "" : "disabled ") +
                'class="btn btn-outline-secondary btn-rounded pet-card-play-date-slot-button" data-title-selected="' +
                a.toDateString() +
                " " +
                f +
                '" data-start-at="' +
                t.start_at +
                '" data-finish-at="' +
                t.finish_at +
                '" >' +
                f +
                "</button>"),
                (l = e),
                (r = a);
            }),
            o.html(s);
          var u = $(
              ".pet-card-play-date-form-accordion-card_step-1 .pet-card-play-date-form-accordion-title .btn",
              d
            ),
            f =
              ($(
                ".pet-card-play-date-form-accordion-card_step-1 .pet-card-play-date-form-accordion-content",
                d
              ),
              $(
                ".pet-card-play-date-form-accordion-card_step-2 .pet-card-play-date-form-accordion-title .btn",
                d
              )),
            m = $(
              ".pet-card-play-date-form-accordion-card_step-2 .pet-card-play-date-form-accordion-content",
              d
            ),
            y = $(".pet-card-play-date-slot-button", d),
            h = $(".pet-card-play-date-selected", d),
            v = n.find('[name="start_at"]'),
            b = n.find('[name="finish_at"]'),
            g = n.find(".pet-card-play-date-form-agreement-checkbox"),
            _ = n.find(".pet-card-play-date-submit-button .btn"),
            w = n.find(".pet-card-play-date-submit-button .fa-spinner"),
            C = n.find(".pet-enquiry-alert");
          g.change(function () {
            g.prop("checked")
              ? k
                ? _.attr("disabled", !0)
                : _.removeAttr("disabled")
              : _.attr("disabled", !0);
          }),
            y.on("click", function (t) {
              var a = $(this);
              y.removeClass("btn-primary"),
                a.addClass("btn-primary"),
                u.attr("disabled", !1),
                f.attr("disabled", !1),
                m.collapse("show"),
                m.find('input[type="text"]').eq(0).focus(),
                h
                  .removeClass("d-none")
                  .find("strong")
                  .text(a.data("titleSelected")),
                v.val(a.data("start-at")),
                b.val(a.data("finish-at"));
            });
          var k = !1;
          n.on("submit", function (t) {
            t.preventDefault(),
              _.attr("disabled", !0),
              w.show(),
              (k = !0),
              console.log(n.serialize(), ".................."),
              $.ajax({
                type: "POST",
                url: n.attr("action"),
                data: n.serialize(),
                success: function (t) {
                  (C.get(0).innerHTML =
                    '<div class="text-center success">Thank you</div>'),
                    C.removeClass("alert-danger hidden").addClass(
                      "alert-success"
                    ),
                    _.removeAttr("disabled"),
                    w.hide(),
                    (k = !1);
                  var a = window.location.href.split("?")[0];
                  "/" !== a.charAt(a.length - 1) && (a += "/"),
                    (a += "play-date/thank-you/"),
                    (window.location.href = a);
                },
                error: function (t, a, e) {
                  (C.get(0).innerHTML =
                    '<div class="text-center error">' + a + "</div>"),
                    C.removeClass("alert-success hidden").addClass(
                      "alert-danger"
                    ),
                    _.removeAttr("disabled"),
                    w.hide(),
                    (k = !1);
                },
              });
          });
        }
      }
    });
  }
  t(), $(document).on("pet-list-updated", t);
});
